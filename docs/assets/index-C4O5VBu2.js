function $S(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qv={exports:{}},Dc={},Wv={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),GS=Symbol.for("react.portal"),KS=Symbol.for("react.fragment"),QS=Symbol.for("react.strict_mode"),HS=Symbol.for("react.profiler"),YS=Symbol.for("react.provider"),JS=Symbol.for("react.context"),XS=Symbol.for("react.forward_ref"),ZS=Symbol.for("react.suspense"),eA=Symbol.for("react.memo"),tA=Symbol.for("react.lazy"),Jg=Symbol.iterator;function nA(t){return t===null||typeof t!="object"?null:(t=Jg&&t[Jg]||t["@@iterator"],typeof t=="function"?t:null)}var Gv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kv=Object.assign,Qv={};function go(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Gv}go.prototype.isReactComponent={};go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hv(){}Hv.prototype=go.prototype;function Zf(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Gv}var ep=Zf.prototype=new Hv;ep.constructor=Zf;Kv(ep,go.prototype);ep.isPureReactComponent=!0;var Xg=Array.isArray,Yv=Object.prototype.hasOwnProperty,tp={current:null},Jv={key:!0,ref:!0,__self:!0,__source:!0};function Xv(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Yv.call(e,r)&&!Jv.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:fl,type:t,key:s,ref:o,props:i,_owner:tp.current}}function rA(t,e){return{$$typeof:fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function np(t){return typeof t=="object"&&t!==null&&t.$$typeof===fl}function iA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zg=/\/+/g;function Bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iA(""+t.key):e.toString(36)}function Eu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fl:case GS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Bh(o,0):r,Xg(i)?(n="",t!=null&&(n=t.replace(Zg,"$&/")+"/"),Eu(i,e,n,"",function(c){return c})):i!=null&&(np(i)&&(i=rA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Zg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Xg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Bh(s,a);o+=Eu(s,e,n,u,i)}else if(u=nA(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Bh(s,a++),o+=Eu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yl(t,e,n){if(t==null)return t;var r=[],i=0;return Eu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function sA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ot={current:null},Iu={transition:null},oA={ReactCurrentDispatcher:Ot,ReactCurrentBatchConfig:Iu,ReactCurrentOwner:tp};function Zv(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Yl,forEach:function(t,e,n){Yl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yl(t,function(){e++}),e},toArray:function(t){return Yl(t,function(e){return e})||[]},only:function(t){if(!np(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=go;ue.Fragment=KS;ue.Profiler=HS;ue.PureComponent=Zf;ue.StrictMode=QS;ue.Suspense=ZS;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oA;ue.act=Zv;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=tp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Yv.call(e,u)&&!Jv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:fl,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:JS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YS,_context:t},t.Consumer=t};ue.createElement=Xv;ue.createFactory=function(t){var e=Xv.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:XS,render:t}};ue.isValidElement=np;ue.lazy=function(t){return{$$typeof:tA,_payload:{_status:-1,_result:t},_init:sA}};ue.memo=function(t,e){return{$$typeof:eA,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Iu.transition;Iu.transition={};try{t()}finally{Iu.transition=e}};ue.unstable_act=Zv;ue.useCallback=function(t,e){return Ot.current.useCallback(t,e)};ue.useContext=function(t){return Ot.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Ot.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Ot.current.useEffect(t,e)};ue.useId=function(){return Ot.current.useId()};ue.useImperativeHandle=function(t,e,n){return Ot.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Ot.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Ot.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Ot.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Ot.current.useReducer(t,e,n)};ue.useRef=function(t){return Ot.current.useRef(t)};ue.useState=function(t){return Ot.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Ot.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Ot.current.useTransition()};ue.version="18.3.1";Wv.exports=ue;var Q=Wv.exports;const ew=WS(Q),aA=$S({__proto__:null,default:ew},[Q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA=Q,uA=Symbol.for("react.element"),cA=Symbol.for("react.fragment"),hA=Object.prototype.hasOwnProperty,dA=lA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fA={key:!0,ref:!0,__self:!0,__source:!0};function tw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hA.call(e,r)&&!fA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:uA,type:t,key:s,ref:o,props:i,_owner:dA.current}}Dc.Fragment=cA;Dc.jsx=tw;Dc.jsxs=tw;qv.exports=Dc;var re=qv.exports,Id={},nw={exports:{}},on={},rw={exports:{}},iw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,X){var ee=$.length;$.push(X);e:for(;0<ee;){var ge=ee-1>>>1,ae=$[ge];if(0<i(ae,X))$[ge]=X,$[ee]=ae,ee=ge;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],ee=$.pop();if(ee!==X){$[0]=ee;e:for(var ge=0,ae=$.length,Se=ae>>>1;ge<Se;){var cn=2*(ge+1)-1,Ft=$[cn],Qt=cn+1,Ht=$[Qt];if(0>i(Ft,ee))Qt<ae&&0>i(Ht,Ft)?($[ge]=Ht,$[Qt]=ee,ge=Qt):($[ge]=Ft,$[cn]=ee,ge=cn);else if(Qt<ae&&0>i(Ht,ee))$[ge]=Ht,$[Qt]=ee,ge=Qt;else break e}}return X}function i($,X){var ee=$.sortIndex-X.sortIndex;return ee!==0?ee:$.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,f=null,p=3,g=!1,_=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=$)r(c),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(c)}}function k($){if(w=!1,I($),!_)if(n(u)!==null)_=!0,bt(M);else{var X=n(c);X!==null&&ut(k,X.startTime-$)}}function M($,X){_=!1,w&&(w=!1,S(v),v=-1),g=!0;var ee=p;try{for(I(X),f=n(u);f!==null&&(!(f.expirationTime>X)||$&&!R());){var ge=f.callback;if(typeof ge=="function"){f.callback=null,p=f.priorityLevel;var ae=ge(f.expirationTime<=X);X=t.unstable_now(),typeof ae=="function"?f.callback=ae:f===n(u)&&r(u),I(X)}else r(u);f=n(u)}if(f!==null)var Se=!0;else{var cn=n(c);cn!==null&&ut(k,cn.startTime-X),Se=!1}return Se}finally{f=null,p=ee,g=!1}}var B=!1,A=null,v=-1,b=5,P=-1;function R(){return!(t.unstable_now()-P<b)}function C(){if(A!==null){var $=t.unstable_now();P=$;var X=!0;try{X=A(!0,$)}finally{X?x():(B=!1,A=null)}}else B=!1}var x;if(typeof E=="function")x=function(){E(C)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,un=ze.port2;ze.port1.onmessage=C,x=function(){un.postMessage(null)}}else x=function(){T(C,0)};function bt($){A=$,B||(B=!0,x())}function ut($,X){v=T(function(){$(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,bt(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var ee=p;p=X;try{return $()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=p;p=$;try{return X()}finally{p=ee}},t.unstable_scheduleCallback=function($,X,ee){var ge=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ge+ee:ge):ee=ge,$){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ee+ae,$={id:d++,callback:X,priorityLevel:$,startTime:ee,expirationTime:ae,sortIndex:-1},ee>ge?($.sortIndex=ee,e(c,$),n(u)===null&&$===n(c)&&(w?(S(v),v=-1):w=!0,ut(k,ee-ge))):($.sortIndex=ae,e(u,$),_||g||(_=!0,bt(M))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var X=p;return function(){var ee=p;p=X;try{return $.apply(this,arguments)}finally{p=ee}}}})(iw);rw.exports=iw;var pA=rw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA=Q,rn=pA;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sw=new Set,Va={};function Ji(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for(Va[t]=e,t=0;t<e.length;t++)sw.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=Object.prototype.hasOwnProperty,gA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ey={},ty={};function yA(t){return Td.call(ty,t)?!0:Td.call(ey,t)?!1:gA.test(t)?ty[t]=!0:(ey[t]=!0,!1)}function _A(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vA(t,e,n,r){if(e===null||typeof e>"u"||_A(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rp=/[\-:]([a-z])/g;function ip(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rp,ip);mt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rp,ip);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rp,ip);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sp(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vA(e,n,i,r)&&(n=null),r||i===null?yA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var or=mA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jl=Symbol.for("react.element"),As=Symbol.for("react.portal"),bs=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),Sd=Symbol.for("react.profiler"),ow=Symbol.for("react.provider"),aw=Symbol.for("react.context"),ap=Symbol.for("react.forward_ref"),Ad=Symbol.for("react.suspense"),bd=Symbol.for("react.suspense_list"),lp=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),lw=Symbol.for("react.offscreen"),ny=Symbol.iterator;function Ko(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Uh;function la(t){if(Uh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uh=e&&e[1]||""}return`
`+Uh+t}var zh=!1;function jh(t,e){if(!t||zh)return"";zh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{zh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?la(t):""}function wA(t){switch(t.tag){case 5:return la(t.type);case 16:return la("Lazy");case 13:return la("Suspense");case 19:return la("SuspenseList");case 0:case 2:case 15:return t=jh(t.type,!1),t;case 11:return t=jh(t.type.render,!1),t;case 1:return t=jh(t.type,!0),t;default:return""}}function xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bs:return"Fragment";case As:return"Portal";case Sd:return"Profiler";case op:return"StrictMode";case Ad:return"Suspense";case bd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aw:return(t.displayName||"Context")+".Consumer";case ow:return(t._context.displayName||"Context")+".Provider";case ap:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lp:return e=t.displayName||null,e!==null?e:xd(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return xd(t(e))}catch{}}return null}function EA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xd(e);case 8:return e===op?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IA(t){var e=uw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xl(t){t._valueTracker||(t._valueTracker=IA(t))}function cw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pd(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ry(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hw(t,e){e=e.checked,e!=null&&sp(t,"checked",e,!1)}function Rd(t,e){hw(t,e);var n=jr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cd(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cd(t,e,n){(e!=="number"||$u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ua=Array.isArray;function Fs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ua(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jr(n)}}function dw(t,e){var n=jr(e.value),r=jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function oy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zl,pw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zl=Zl||document.createElement("div"),Zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TA=["Webkit","ms","Moz","O"];Object.keys(ga).forEach(function(t){TA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ga[e]=ga[t]})});function mw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ga.hasOwnProperty(t)&&ga[t]?(""+e).trim():e+"px"}function gw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var SA=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dd(t,e){if(e){if(SA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Nd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Od=null;function up(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Md=null,Ls=null,Bs=null;function ay(t){if(t=gl(t)){if(typeof Md!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Lc(e),Md(t.stateNode,t.type,e))}}function yw(t){Ls?Bs?Bs.push(t):Bs=[t]:Ls=t}function _w(){if(Ls){var t=Ls,e=Bs;if(Bs=Ls=null,ay(t),e)for(t=0;t<e.length;t++)ay(e[t])}}function vw(t,e){return t(e)}function ww(){}var $h=!1;function Ew(t,e,n){if($h)return t(e,n);$h=!0;try{return vw(t,e,n)}finally{$h=!1,(Ls!==null||Bs!==null)&&(ww(),_w())}}function Na(t,e){var n=t.stateNode;if(n===null)return null;var r=Lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Fd=!1;if(er)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){Fd=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{Fd=!1}function AA(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ya=!1,qu=null,Wu=!1,Ld=null,bA={onError:function(t){ya=!0,qu=t}};function xA(t,e,n,r,i,s,o,a,u){ya=!1,qu=null,AA.apply(bA,arguments)}function PA(t,e,n,r,i,s,o,a,u){if(xA.apply(this,arguments),ya){if(ya){var c=qu;ya=!1,qu=null}else throw Error(U(198));Wu||(Wu=!0,Ld=c)}}function Xi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Iw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ly(t){if(Xi(t)!==t)throw Error(U(188))}function RA(t){var e=t.alternate;if(!e){if(e=Xi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ly(i),t;if(s===r)return ly(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Tw(t){return t=RA(t),t!==null?Sw(t):null}function Sw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Sw(t);if(e!==null)return e;t=t.sibling}return null}var Aw=rn.unstable_scheduleCallback,uy=rn.unstable_cancelCallback,CA=rn.unstable_shouldYield,kA=rn.unstable_requestPaint,Ke=rn.unstable_now,VA=rn.unstable_getCurrentPriorityLevel,cp=rn.unstable_ImmediatePriority,bw=rn.unstable_UserBlockingPriority,Gu=rn.unstable_NormalPriority,DA=rn.unstable_LowPriority,xw=rn.unstable_IdlePriority,Nc=null,Fn=null;function NA(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Nc,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:FA,OA=Math.log,MA=Math.LN2;function FA(t){return t>>>=0,t===0?32:31-(OA(t)/MA|0)|0}var eu=64,tu=4194304;function ca(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ca(a):(s&=o,s!==0&&(r=ca(s)))}else o=n&~i,o!==0?r=ca(o):s!==0&&(r=ca(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bn(e),i=1<<n,r|=t[n],e&=~i;return r}function LA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=LA(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Bd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pw(){var t=eu;return eu<<=1,!(eu&4194240)&&(eu=64),t}function qh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=n}function UA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function Rw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cw,dp,kw,Vw,Dw,Ud=!1,nu=[],Vr=null,Dr=null,Nr=null,Oa=new Map,Ma=new Map,Tr=[],zA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cy(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(e.pointerId)}}function Ho(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=gl(e),e!==null&&dp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jA(t,e,n,r,i){switch(e){case"focusin":return Vr=Ho(Vr,t,e,n,r,i),!0;case"dragenter":return Dr=Ho(Dr,t,e,n,r,i),!0;case"mouseover":return Nr=Ho(Nr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Oa.set(s,Ho(Oa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ma.set(s,Ho(Ma.get(s)||null,t,e,n,r,i)),!0}return!1}function Nw(t){var e=Ai(t.target);if(e!==null){var n=Xi(e);if(n!==null){if(e=n.tag,e===13){if(e=Iw(n),e!==null){t.blockedOn=e,Dw(t.priority,function(){kw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Od=r,n.target.dispatchEvent(r),Od=null}else return e=gl(n),e!==null&&dp(e),t.blockedOn=n,!1;e.shift()}return!0}function hy(t,e,n){Tu(t)&&n.delete(e)}function $A(){Ud=!1,Vr!==null&&Tu(Vr)&&(Vr=null),Dr!==null&&Tu(Dr)&&(Dr=null),Nr!==null&&Tu(Nr)&&(Nr=null),Oa.forEach(hy),Ma.forEach(hy)}function Yo(t,e){t.blockedOn===e&&(t.blockedOn=null,Ud||(Ud=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,$A)))}function Fa(t){function e(i){return Yo(i,t)}if(0<nu.length){Yo(nu[0],t);for(var n=1;n<nu.length;n++){var r=nu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vr!==null&&Yo(Vr,t),Dr!==null&&Yo(Dr,t),Nr!==null&&Yo(Nr,t),Oa.forEach(e),Ma.forEach(e),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)Nw(n),n.blockedOn===null&&Tr.shift()}var Us=or.ReactCurrentBatchConfig,Qu=!0;function qA(t,e,n,r){var i=Ee,s=Us.transition;Us.transition=null;try{Ee=1,fp(t,e,n,r)}finally{Ee=i,Us.transition=s}}function WA(t,e,n,r){var i=Ee,s=Us.transition;Us.transition=null;try{Ee=4,fp(t,e,n,r)}finally{Ee=i,Us.transition=s}}function fp(t,e,n,r){if(Qu){var i=zd(t,e,n,r);if(i===null)ed(t,e,r,Hu,n),cy(t,r);else if(jA(i,t,e,n,r))r.stopPropagation();else if(cy(t,r),e&4&&-1<zA.indexOf(t)){for(;i!==null;){var s=gl(i);if(s!==null&&Cw(s),s=zd(t,e,n,r),s===null&&ed(t,e,r,Hu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ed(t,e,r,null,n)}}var Hu=null;function zd(t,e,n,r){if(Hu=null,t=up(r),t=Ai(t),t!==null)if(e=Xi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Iw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hu=t,null}function Ow(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VA()){case cp:return 1;case bw:return 4;case Gu:case DA:return 16;case xw:return 536870912;default:return 16}default:return 16}}var xr=null,pp=null,Su=null;function Mw(){if(Su)return Su;var t,e=pp,n=e.length,r,i="value"in xr?xr.value:xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Su=i.slice(t,1<r?1-r:void 0)}function Au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ru(){return!0}function dy(){return!1}function an(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ru:dy,this.isPropagationStopped=dy,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mp=an(yo),ml=Ue({},yo,{view:0,detail:0}),GA=an(ml),Wh,Gh,Jo,Oc=Ue({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(Wh=t.screenX-Jo.screenX,Gh=t.screenY-Jo.screenY):Gh=Wh=0,Jo=t),Wh)},movementY:function(t){return"movementY"in t?t.movementY:Gh}}),fy=an(Oc),KA=Ue({},Oc,{dataTransfer:0}),QA=an(KA),HA=Ue({},ml,{relatedTarget:0}),Kh=an(HA),YA=Ue({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),JA=an(YA),XA=Ue({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZA=an(XA),eb=Ue({},yo,{data:0}),py=an(eb),tb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ib(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rb[t])?!!e[t]:!1}function gp(){return ib}var sb=Ue({},ml,{key:function(t){if(t.key){var e=tb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gp,charCode:function(t){return t.type==="keypress"?Au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ob=an(sb),ab=Ue({},Oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),my=an(ab),lb=Ue({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gp}),ub=an(lb),cb=Ue({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),hb=an(cb),db=Ue({},Oc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fb=an(db),pb=[9,13,27,32],yp=er&&"CompositionEvent"in window,_a=null;er&&"documentMode"in document&&(_a=document.documentMode);var mb=er&&"TextEvent"in window&&!_a,Fw=er&&(!yp||_a&&8<_a&&11>=_a),gy=" ",yy=!1;function Lw(t,e){switch(t){case"keyup":return pb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xs=!1;function gb(t,e){switch(t){case"compositionend":return Bw(e);case"keypress":return e.which!==32?null:(yy=!0,gy);case"textInput":return t=e.data,t===gy&&yy?null:t;default:return null}}function yb(t,e){if(xs)return t==="compositionend"||!yp&&Lw(t,e)?(t=Mw(),Su=pp=xr=null,xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fw&&e.locale!=="ko"?null:e.data;default:return null}}var _b={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_b[t.type]:e==="textarea"}function Uw(t,e,n,r){yw(r),e=Yu(e,"onChange"),0<e.length&&(n=new mp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var va=null,La=null;function vb(t){Jw(t,0)}function Mc(t){var e=Cs(t);if(cw(e))return t}function wb(t,e){if(t==="change")return e}var zw=!1;if(er){var Qh;if(er){var Hh="oninput"in document;if(!Hh){var vy=document.createElement("div");vy.setAttribute("oninput","return;"),Hh=typeof vy.oninput=="function"}Qh=Hh}else Qh=!1;zw=Qh&&(!document.documentMode||9<document.documentMode)}function wy(){va&&(va.detachEvent("onpropertychange",jw),La=va=null)}function jw(t){if(t.propertyName==="value"&&Mc(La)){var e=[];Uw(e,La,t,up(t)),Ew(vb,e)}}function Eb(t,e,n){t==="focusin"?(wy(),va=e,La=n,va.attachEvent("onpropertychange",jw)):t==="focusout"&&wy()}function Ib(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mc(La)}function Tb(t,e){if(t==="click")return Mc(e)}function Sb(t,e){if(t==="input"||t==="change")return Mc(e)}function Ab(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pn=typeof Object.is=="function"?Object.is:Ab;function Ba(t,e){if(Pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Td.call(e,i)||!Pn(t[i],e[i]))return!1}return!0}function Ey(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Iy(t,e){var n=Ey(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ey(n)}}function $w(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$w(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qw(){for(var t=window,e=$u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$u(t.document)}return e}function _p(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bb(t){var e=qw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$w(n.ownerDocument.documentElement,n)){if(r!==null&&_p(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Iy(n,s);var o=Iy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xb=er&&"documentMode"in document&&11>=document.documentMode,Ps=null,jd=null,wa=null,$d=!1;function Ty(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$d||Ps==null||Ps!==$u(r)||(r=Ps,"selectionStart"in r&&_p(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wa&&Ba(wa,r)||(wa=r,r=Yu(jd,"onSelect"),0<r.length&&(e=new mp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function iu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rs={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionend:iu("Transition","TransitionEnd")},Yh={},Ww={};er&&(Ww=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function Fc(t){if(Yh[t])return Yh[t];if(!Rs[t])return t;var e=Rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ww)return Yh[t]=e[n];return t}var Gw=Fc("animationend"),Kw=Fc("animationiteration"),Qw=Fc("animationstart"),Hw=Fc("transitionend"),Yw=new Map,Sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){Yw.set(t,e),Ji(e,[t])}for(var Jh=0;Jh<Sy.length;Jh++){var Xh=Sy[Jh],Pb=Xh.toLowerCase(),Rb=Xh[0].toUpperCase()+Xh.slice(1);ei(Pb,"on"+Rb)}ei(Gw,"onAnimationEnd");ei(Kw,"onAnimationIteration");ei(Qw,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(Hw,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function Ay(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PA(r,e,void 0,t),t.currentTarget=null}function Jw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Ay(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Ay(i,a,c),s=u}}}if(Wu)throw t=Ld,Wu=!1,Ld=null,t}function Ce(t,e){var n=e[Qd];n===void 0&&(n=e[Qd]=new Set);var r=t+"__bubble";n.has(r)||(Xw(e,t,2,!1),n.add(r))}function Zh(t,e,n){var r=0;e&&(r|=4),Xw(n,t,r,e)}var su="_reactListening"+Math.random().toString(36).slice(2);function Ua(t){if(!t[su]){t[su]=!0,sw.forEach(function(n){n!=="selectionchange"&&(Cb.has(n)||Zh(n,!1,t),Zh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[su]||(e[su]=!0,Zh("selectionchange",!1,e))}}function Xw(t,e,n,r){switch(Ow(e)){case 1:var i=qA;break;case 4:i=WA;break;default:i=fp}n=i.bind(null,e,n,t),i=void 0,!Fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ed(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ai(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ew(function(){var c=s,d=up(n),f=[];e:{var p=Yw.get(t);if(p!==void 0){var g=mp,_=t;switch(t){case"keypress":if(Au(n)===0)break e;case"keydown":case"keyup":g=ob;break;case"focusin":_="focus",g=Kh;break;case"focusout":_="blur",g=Kh;break;case"beforeblur":case"afterblur":g=Kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=fy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=QA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ub;break;case Gw:case Kw:case Qw:g=JA;break;case Hw:g=hb;break;case"scroll":g=GA;break;case"wheel":g=fb;break;case"copy":case"cut":case"paste":g=ZA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=my}var w=(e&4)!==0,T=!w&&t==="scroll",S=w?p!==null?p+"Capture":null:p;w=[];for(var E=c,I;E!==null;){I=E;var k=I.stateNode;if(I.tag===5&&k!==null&&(I=k,S!==null&&(k=Na(E,S),k!=null&&w.push(za(E,k,I)))),T)break;E=E.return}0<w.length&&(p=new g(p,_,null,n,d),f.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Od&&(_=n.relatedTarget||n.fromElement)&&(Ai(_)||_[tr]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=c,_=_?Ai(_):null,_!==null&&(T=Xi(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=c),g!==_)){if(w=fy,k="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(w=my,k="onPointerLeave",S="onPointerEnter",E="pointer"),T=g==null?p:Cs(g),I=_==null?p:Cs(_),p=new w(k,E+"leave",g,n,d),p.target=T,p.relatedTarget=I,k=null,Ai(d)===c&&(w=new w(S,E+"enter",_,n,d),w.target=I,w.relatedTarget=T,k=w),T=k,g&&_)t:{for(w=g,S=_,E=0,I=w;I;I=ms(I))E++;for(I=0,k=S;k;k=ms(k))I++;for(;0<E-I;)w=ms(w),E--;for(;0<I-E;)S=ms(S),I--;for(;E--;){if(w===S||S!==null&&w===S.alternate)break t;w=ms(w),S=ms(S)}w=null}else w=null;g!==null&&by(f,p,g,w,!1),_!==null&&T!==null&&by(f,T,_,w,!0)}}e:{if(p=c?Cs(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var M=wb;else if(_y(p))if(zw)M=Sb;else{M=Ib;var B=Eb}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=Tb);if(M&&(M=M(t,c))){Uw(f,M,n,d);break e}B&&B(t,p,c),t==="focusout"&&(B=p._wrapperState)&&B.controlled&&p.type==="number"&&Cd(p,"number",p.value)}switch(B=c?Cs(c):window,t){case"focusin":(_y(B)||B.contentEditable==="true")&&(Ps=B,jd=c,wa=null);break;case"focusout":wa=jd=Ps=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,Ty(f,n,d);break;case"selectionchange":if(xb)break;case"keydown":case"keyup":Ty(f,n,d)}var A;if(yp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else xs?Lw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Fw&&n.locale!=="ko"&&(xs||v!=="onCompositionStart"?v==="onCompositionEnd"&&xs&&(A=Mw()):(xr=d,pp="value"in xr?xr.value:xr.textContent,xs=!0)),B=Yu(c,v),0<B.length&&(v=new py(v,t,null,n,d),f.push({event:v,listeners:B}),A?v.data=A:(A=Bw(n),A!==null&&(v.data=A)))),(A=mb?gb(t,n):yb(t,n))&&(c=Yu(c,"onBeforeInput"),0<c.length&&(d=new py("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=A))}Jw(f,e)})}function za(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Na(t,n),s!=null&&r.unshift(za(t,s,i)),s=Na(t,e),s!=null&&r.push(za(t,s,i))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function by(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Na(n,s),u!=null&&o.unshift(za(n,u,a))):i||(u=Na(n,s),u!=null&&o.push(za(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kb=/\r\n?/g,Vb=/\u0000|\uFFFD/g;function xy(t){return(typeof t=="string"?t:""+t).replace(kb,`
`).replace(Vb,"")}function ou(t,e,n){if(e=xy(e),xy(t)!==e&&n)throw Error(U(425))}function Ju(){}var qd=null,Wd=null;function Gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,Db=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,Nb=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(Ob)}:Kd;function Ob(t){setTimeout(function(){throw t})}function td(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fa(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ry(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Dn="__reactFiber$"+_o,ja="__reactProps$"+_o,tr="__reactContainer$"+_o,Qd="__reactEvents$"+_o,Mb="__reactListeners$"+_o,Fb="__reactHandles$"+_o;function Ai(t){var e=t[Dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[Dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ry(t);t!==null;){if(n=t[Dn])return n;t=Ry(t)}return e}t=n,n=t.parentNode}return null}function gl(t){return t=t[Dn]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Lc(t){return t[ja]||null}var Hd=[],ks=-1;function ti(t){return{current:t}}function Ve(t){0>ks||(t.current=Hd[ks],Hd[ks]=null,ks--)}function Ae(t,e){ks++,Hd[ks]=t.current,t.current=e}var $r={},St=ti($r),qt=ti(!1),Oi=$r;function Ks(t,e){var n=t.type.contextTypes;if(!n)return $r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wt(t){return t=t.childContextTypes,t!=null}function Xu(){Ve(qt),Ve(St)}function Cy(t,e,n){if(St.current!==$r)throw Error(U(168));Ae(St,e),Ae(qt,n)}function Zw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,EA(t)||"Unknown",i));return Ue({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$r,Oi=St.current,Ae(St,t),Ae(qt,qt.current),!0}function ky(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Zw(t,e,Oi),r.__reactInternalMemoizedMergedChildContext=t,Ve(qt),Ve(St),Ae(St,t)):Ve(qt),Ae(qt,n)}var Qn=null,Bc=!1,nd=!1;function e0(t){Qn===null?Qn=[t]:Qn.push(t)}function Lb(t){Bc=!0,e0(t)}function ni(){if(!nd&&Qn!==null){nd=!0;var t=0,e=Ee;try{var n=Qn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qn=null,Bc=!1}catch(i){throw Qn!==null&&(Qn=Qn.slice(t+1)),Aw(cp,ni),i}finally{Ee=e,nd=!1}}return null}var Vs=[],Ds=0,ec=null,tc=0,dn=[],fn=0,Mi=null,Hn=1,Yn="";function gi(t,e){Vs[Ds++]=tc,Vs[Ds++]=ec,ec=t,tc=e}function t0(t,e,n){dn[fn++]=Hn,dn[fn++]=Yn,dn[fn++]=Mi,Mi=t;var r=Hn;t=Yn;var i=32-bn(r)-1;r&=~(1<<i),n+=1;var s=32-bn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Hn=1<<32-bn(e)+i|n<<i|r,Yn=s+t}else Hn=1<<s|n<<i|r,Yn=t}function vp(t){t.return!==null&&(gi(t,1),t0(t,1,0))}function wp(t){for(;t===ec;)ec=Vs[--Ds],Vs[Ds]=null,tc=Vs[--Ds],Vs[Ds]=null;for(;t===Mi;)Mi=dn[--fn],dn[fn]=null,Yn=dn[--fn],dn[fn]=null,Hn=dn[--fn],dn[fn]=null}var nn=null,tn=null,De=!1,An=null;function n0(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,tn=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mi!==null?{id:Hn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,tn=null,!0):!1;default:return!1}}function Yd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jd(t){if(De){var e=tn;if(e){var n=e;if(!Vy(t,e)){if(Yd(t))throw Error(U(418));e=Or(n.nextSibling);var r=nn;e&&Vy(t,e)?n0(r,n):(t.flags=t.flags&-4097|2,De=!1,nn=t)}}else{if(Yd(t))throw Error(U(418));t.flags=t.flags&-4097|2,De=!1,nn=t}}}function Dy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function au(t){if(t!==nn)return!1;if(!De)return Dy(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gd(t.type,t.memoizedProps)),e&&(e=tn)){if(Yd(t))throw r0(),Error(U(418));for(;e;)n0(t,e),e=Or(e.nextSibling)}if(Dy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tn=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=nn?Or(t.stateNode.nextSibling):null;return!0}function r0(){for(var t=tn;t;)t=Or(t.nextSibling)}function Qs(){tn=nn=null,De=!1}function Ep(t){An===null?An=[t]:An.push(t)}var Bb=or.ReactCurrentBatchConfig;function Xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function lu(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ny(t){var e=t._init;return e(t._payload)}function i0(t){function e(S,E){if(t){var I=S.deletions;I===null?(S.deletions=[E],S.flags|=16):I.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function i(S,E){return S=Br(S,E),S.index=0,S.sibling=null,S}function s(S,E,I){return S.index=I,t?(I=S.alternate,I!==null?(I=I.index,I<E?(S.flags|=2,E):I):(S.flags|=2,E)):(S.flags|=1048576,E)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,E,I,k){return E===null||E.tag!==6?(E=ud(I,S.mode,k),E.return=S,E):(E=i(E,I),E.return=S,E)}function u(S,E,I,k){var M=I.type;return M===bs?d(S,E,I.props.children,k,I.key):E!==null&&(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Er&&Ny(M)===E.type)?(k=i(E,I.props),k.ref=Xo(S,E,I),k.return=S,k):(k=Vu(I.type,I.key,I.props,null,S.mode,k),k.ref=Xo(S,E,I),k.return=S,k)}function c(S,E,I,k){return E===null||E.tag!==4||E.stateNode.containerInfo!==I.containerInfo||E.stateNode.implementation!==I.implementation?(E=cd(I,S.mode,k),E.return=S,E):(E=i(E,I.children||[]),E.return=S,E)}function d(S,E,I,k,M){return E===null||E.tag!==7?(E=Vi(I,S.mode,k,M),E.return=S,E):(E=i(E,I),E.return=S,E)}function f(S,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ud(""+E,S.mode,I),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jl:return I=Vu(E.type,E.key,E.props,null,S.mode,I),I.ref=Xo(S,null,E),I.return=S,I;case As:return E=cd(E,S.mode,I),E.return=S,E;case Er:var k=E._init;return f(S,k(E._payload),I)}if(ua(E)||Ko(E))return E=Vi(E,S.mode,I,null),E.return=S,E;lu(S,E)}return null}function p(S,E,I,k){var M=E!==null?E.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return M!==null?null:a(S,E,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Jl:return I.key===M?u(S,E,I,k):null;case As:return I.key===M?c(S,E,I,k):null;case Er:return M=I._init,p(S,E,M(I._payload),k)}if(ua(I)||Ko(I))return M!==null?null:d(S,E,I,k,null);lu(S,I)}return null}function g(S,E,I,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return S=S.get(I)||null,a(E,S,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Jl:return S=S.get(k.key===null?I:k.key)||null,u(E,S,k,M);case As:return S=S.get(k.key===null?I:k.key)||null,c(E,S,k,M);case Er:var B=k._init;return g(S,E,I,B(k._payload),M)}if(ua(k)||Ko(k))return S=S.get(I)||null,d(E,S,k,M,null);lu(E,k)}return null}function _(S,E,I,k){for(var M=null,B=null,A=E,v=E=0,b=null;A!==null&&v<I.length;v++){A.index>v?(b=A,A=null):b=A.sibling;var P=p(S,A,I[v],k);if(P===null){A===null&&(A=b);break}t&&A&&P.alternate===null&&e(S,A),E=s(P,E,v),B===null?M=P:B.sibling=P,B=P,A=b}if(v===I.length)return n(S,A),De&&gi(S,v),M;if(A===null){for(;v<I.length;v++)A=f(S,I[v],k),A!==null&&(E=s(A,E,v),B===null?M=A:B.sibling=A,B=A);return De&&gi(S,v),M}for(A=r(S,A);v<I.length;v++)b=g(A,S,v,I[v],k),b!==null&&(t&&b.alternate!==null&&A.delete(b.key===null?v:b.key),E=s(b,E,v),B===null?M=b:B.sibling=b,B=b);return t&&A.forEach(function(R){return e(S,R)}),De&&gi(S,v),M}function w(S,E,I,k){var M=Ko(I);if(typeof M!="function")throw Error(U(150));if(I=M.call(I),I==null)throw Error(U(151));for(var B=M=null,A=E,v=E=0,b=null,P=I.next();A!==null&&!P.done;v++,P=I.next()){A.index>v?(b=A,A=null):b=A.sibling;var R=p(S,A,P.value,k);if(R===null){A===null&&(A=b);break}t&&A&&R.alternate===null&&e(S,A),E=s(R,E,v),B===null?M=R:B.sibling=R,B=R,A=b}if(P.done)return n(S,A),De&&gi(S,v),M;if(A===null){for(;!P.done;v++,P=I.next())P=f(S,P.value,k),P!==null&&(E=s(P,E,v),B===null?M=P:B.sibling=P,B=P);return De&&gi(S,v),M}for(A=r(S,A);!P.done;v++,P=I.next())P=g(A,S,v,P.value,k),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?v:P.key),E=s(P,E,v),B===null?M=P:B.sibling=P,B=P);return t&&A.forEach(function(C){return e(S,C)}),De&&gi(S,v),M}function T(S,E,I,k){if(typeof I=="object"&&I!==null&&I.type===bs&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Jl:e:{for(var M=I.key,B=E;B!==null;){if(B.key===M){if(M=I.type,M===bs){if(B.tag===7){n(S,B.sibling),E=i(B,I.props.children),E.return=S,S=E;break e}}else if(B.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Er&&Ny(M)===B.type){n(S,B.sibling),E=i(B,I.props),E.ref=Xo(S,B,I),E.return=S,S=E;break e}n(S,B);break}else e(S,B);B=B.sibling}I.type===bs?(E=Vi(I.props.children,S.mode,k,I.key),E.return=S,S=E):(k=Vu(I.type,I.key,I.props,null,S.mode,k),k.ref=Xo(S,E,I),k.return=S,S=k)}return o(S);case As:e:{for(B=I.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===I.containerInfo&&E.stateNode.implementation===I.implementation){n(S,E.sibling),E=i(E,I.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=cd(I,S.mode,k),E.return=S,S=E}return o(S);case Er:return B=I._init,T(S,E,B(I._payload),k)}if(ua(I))return _(S,E,I,k);if(Ko(I))return w(S,E,I,k);lu(S,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,E!==null&&E.tag===6?(n(S,E.sibling),E=i(E,I),E.return=S,S=E):(n(S,E),E=ud(I,S.mode,k),E.return=S,S=E),o(S)):n(S,E)}return T}var Hs=i0(!0),s0=i0(!1),nc=ti(null),rc=null,Ns=null,Ip=null;function Tp(){Ip=Ns=rc=null}function Sp(t){var e=nc.current;Ve(nc),t._currentValue=e}function Xd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zs(t,e){rc=t,Ip=Ns=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(Ip!==t)if(t={context:t,memoizedValue:e,next:null},Ns===null){if(rc===null)throw Error(U(308));Ns=t,rc.dependencies={lanes:0,firstContext:t}}else Ns=Ns.next=t;return e}var bi=null;function Ap(t){bi===null?bi=[t]:bi.push(t)}function o0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ap(e)):(n.next=i.next,i.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ir=!1;function bp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,nr(t,n)}return i=r.interleaved,i===null?(e.next=e,Ap(r)):(e.next=i.next,i.next=e),r.interleaved=e,nr(t,n)}function bu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}function Oy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ic(t,e,n,r){var i=t.updateQueue;Ir=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,d=c=u=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(p=e,g=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){f=_.call(g,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,p=typeof _=="function"?_.call(g,f,p):_,p==null)break e;f=Ue({},f,p);break e;case 2:Ir=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,u=f):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Li|=o,t.lanes=o,t.memoizedState=f}}function My(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var yl={},Ln=ti(yl),$a=ti(yl),qa=ti(yl);function xi(t){if(t===yl)throw Error(U(174));return t}function xp(t,e){switch(Ae(qa,e),Ae($a,t),Ae(Ln,yl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vd(e,t)}Ve(Ln),Ae(Ln,e)}function Ys(){Ve(Ln),Ve($a),Ve(qa)}function l0(t){xi(qa.current);var e=xi(Ln.current),n=Vd(e,t.type);e!==n&&(Ae($a,t),Ae(Ln,n))}function Pp(t){$a.current===t&&(Ve(Ln),Ve($a))}var Fe=ti(0);function sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rd=[];function Rp(){for(var t=0;t<rd.length;t++)rd[t]._workInProgressVersionPrimary=null;rd.length=0}var xu=or.ReactCurrentDispatcher,id=or.ReactCurrentBatchConfig,Fi=0,Le=null,Ze=null,it=null,oc=!1,Ea=!1,Wa=0,Ub=0;function _t(){throw Error(U(321))}function Cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pn(t[n],e[n]))return!1;return!0}function kp(t,e,n,r,i,s){if(Fi=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xu.current=t===null||t.memoizedState===null?qb:Wb,t=n(r,i),Ea){s=0;do{if(Ea=!1,Wa=0,25<=s)throw Error(U(301));s+=1,it=Ze=null,e.updateQueue=null,xu.current=Gb,t=n(r,i)}while(Ea)}if(xu.current=ac,e=Ze!==null&&Ze.next!==null,Fi=0,it=Ze=Le=null,oc=!1,e)throw Error(U(300));return t}function Vp(){var t=Wa!==0;return Wa=0,t}function Vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Le.memoizedState=it=t:it=it.next=t,it}function vn(){if(Ze===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=it===null?Le.memoizedState:it.next;if(e!==null)it=e,Ze=t;else{if(t===null)throw Error(U(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},it===null?Le.memoizedState=it=t:it=it.next=t}return it}function Ga(t,e){return typeof e=="function"?e(t):e}function sd(t){var e=vn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Fi&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Le.lanes|=d,Li|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Pn(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,Li|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function od(t){var e=vn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Pn(s,e.memoizedState)||(Ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function u0(){}function c0(t,e){var n=Le,r=vn(),i=e(),s=!Pn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ut=!0),r=r.queue,Dp(f0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Ka(9,d0.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(U(349));Fi&30||h0(n,e,i)}return i}function h0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function d0(t,e,n,r){e.value=n,e.getSnapshot=r,p0(e)&&m0(t)}function f0(t,e,n){return n(function(){p0(e)&&m0(t)})}function p0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pn(t,n)}catch{return!0}}function m0(t){var e=nr(t,1);e!==null&&xn(e,t,1,-1)}function Fy(t){var e=Vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},e.queue=t,t=t.dispatch=$b.bind(null,Le,t),[e.memoizedState,t]}function Ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function g0(){return vn().memoizedState}function Pu(t,e,n,r){var i=Vn();Le.flags|=t,i.memoizedState=Ka(1|e,n,void 0,r===void 0?null:r)}function Uc(t,e,n,r){var i=vn();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,r!==null&&Cp(r,o.deps)){i.memoizedState=Ka(e,n,s,r);return}}Le.flags|=t,i.memoizedState=Ka(1|e,n,s,r)}function Ly(t,e){return Pu(8390656,8,t,e)}function Dp(t,e){return Uc(2048,8,t,e)}function y0(t,e){return Uc(4,2,t,e)}function _0(t,e){return Uc(4,4,t,e)}function v0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function w0(t,e,n){return n=n!=null?n.concat([t]):null,Uc(4,4,v0.bind(null,e,t),n)}function Np(){}function E0(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function I0(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function T0(t,e,n){return Fi&21?(Pn(n,e)||(n=Pw(),Le.lanes|=n,Li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function zb(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=id.transition;id.transition={};try{t(!1),e()}finally{Ee=n,id.transition=r}}function S0(){return vn().memoizedState}function jb(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A0(t))b0(e,n);else if(n=o0(t,e,n,r),n!==null){var i=kt();xn(n,t,r,i),x0(n,e,r)}}function $b(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A0(t))b0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pn(a,o)){var u=e.interleaved;u===null?(i.next=i,Ap(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=o0(t,e,i,r),n!==null&&(i=kt(),xn(n,t,r,i),x0(n,e,r))}}function A0(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function b0(t,e){Ea=oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function x0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}var ac={readContext:_n,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},qb={readContext:_n,useCallback:function(t,e){return Vn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:Ly,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,v0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=Vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jb.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=Vn();return t={current:t},e.memoizedState=t},useState:Fy,useDebugValue:Np,useDeferredValue:function(t){return Vn().memoizedState=t},useTransition:function(){var t=Fy(!1),e=t[0];return t=zb.bind(null,t[1]),Vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=Vn();if(De){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),ot===null)throw Error(U(349));Fi&30||h0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ly(f0.bind(null,r,s,t),[t]),r.flags|=2048,Ka(9,d0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Vn(),e=ot.identifierPrefix;if(De){var n=Yn,r=Hn;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ub++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Wb={readContext:_n,useCallback:E0,useContext:_n,useEffect:Dp,useImperativeHandle:w0,useInsertionEffect:y0,useLayoutEffect:_0,useMemo:I0,useReducer:sd,useRef:g0,useState:function(){return sd(Ga)},useDebugValue:Np,useDeferredValue:function(t){var e=vn();return T0(e,Ze.memoizedState,t)},useTransition:function(){var t=sd(Ga)[0],e=vn().memoizedState;return[t,e]},useMutableSource:u0,useSyncExternalStore:c0,useId:S0,unstable_isNewReconciler:!1},Gb={readContext:_n,useCallback:E0,useContext:_n,useEffect:Dp,useImperativeHandle:w0,useInsertionEffect:y0,useLayoutEffect:_0,useMemo:I0,useReducer:od,useRef:g0,useState:function(){return od(Ga)},useDebugValue:Np,useDeferredValue:function(t){var e=vn();return Ze===null?e.memoizedState=t:T0(e,Ze.memoizedState,t)},useTransition:function(){var t=od(Ga)[0],e=vn().memoizedState;return[t,e]},useMutableSource:u0,useSyncExternalStore:c0,useId:S0,unstable_isNewReconciler:!1};function Tn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zc={isMounted:function(t){return(t=t._reactInternals)?Xi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Lr(t),s=Xn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mr(t,s,i),e!==null&&(xn(e,t,i,r),bu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Lr(t),s=Xn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mr(t,s,i),e!==null&&(xn(e,t,i,r),bu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=Lr(t),i=Xn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mr(t,i,r),e!==null&&(xn(e,t,r,n),bu(e,t,r))}};function By(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ba(n,r)||!Ba(i,s):!0}function P0(t,e,n){var r=!1,i=$r,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(i=Wt(e)?Oi:St.current,r=e.contextTypes,s=(r=r!=null)?Ks(t,i):$r),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Uy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zc.enqueueReplaceState(e,e.state,null)}function ef(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},bp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_n(s):(s=Wt(e)?Oi:St.current,i.context=Ks(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zc.enqueueReplaceState(i,i.state,null),ic(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=wA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ad(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Kb=typeof WeakMap=="function"?WeakMap:Map;function R0(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uc||(uc=!0,df=r),tf(t,e)},n}function C0(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tf(t,e),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Kb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ax.bind(null,t,e,n),e.then(t,t))}function jy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $y(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Mr(n,e,1))),n.lanes|=1),t)}var Qb=or.ReactCurrentOwner,Ut=!1;function Pt(t,e,n,r){e.child=t===null?s0(e,null,n,r):Hs(e,t.child,n,r)}function qy(t,e,n,r,i){n=n.render;var s=e.ref;return zs(e,i),r=kp(t,e,n,r,s,i),n=Vp(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(De&&n&&vp(e),e.flags|=1,Pt(t,e,r,i),e.child)}function Wy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,k0(t,e,s,r,i)):(t=Vu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ba,n(o,r)&&t.ref===e.ref)return rr(t,e,i)}return e.flags|=1,t=Br(s,r),t.ref=e.ref,t.return=e,e.child=t}function k0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ba(s,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,rr(t,e,i)}return nf(t,e,n,r,i)}function V0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ms,en),en|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Ms,en),en|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(Ms,en),en|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(Ms,en),en|=r;return Pt(t,e,i,n),e.child}function D0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nf(t,e,n,r,i){var s=Wt(n)?Oi:St.current;return s=Ks(e,s),zs(e,i),n=kp(t,e,n,r,s,i),r=Vp(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(De&&r&&vp(e),e.flags|=1,Pt(t,e,n,i),e.child)}function Gy(t,e,n,r,i){if(Wt(n)){var s=!0;Zu(e)}else s=!1;if(zs(e,i),e.stateNode===null)Ru(t,e),P0(e,n,r),ef(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Wt(n)?Oi:St.current,c=Ks(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Uy(e,o,r,c),Ir=!1;var p=e.memoizedState;o.state=p,ic(e,r,o,i),u=e.memoizedState,a!==r||p!==u||qt.current||Ir?(typeof d=="function"&&(Zd(e,n,d,r),u=e.memoizedState),(a=Ir||By(e,n,a,r,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,a0(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Tn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=_n(u):(u=Wt(n)?Oi:St.current,u=Ks(e,u));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==u)&&Uy(e,o,r,u),Ir=!1,p=e.memoizedState,o.state=p,ic(e,r,o,i);var _=e.memoizedState;a!==f||p!==_||qt.current||Ir?(typeof g=="function"&&(Zd(e,n,g,r),_=e.memoizedState),(c=Ir||By(e,n,c,r,p,_,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return rf(t,e,n,r,s,i)}function rf(t,e,n,r,i,s){D0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ky(e,n,!1),rr(t,e,s);r=e.stateNode,Qb.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hs(e,t.child,null,s),e.child=Hs(e,null,a,s)):Pt(t,e,a,s),e.memoizedState=r.state,i&&ky(e,n,!0),e.child}function N0(t){var e=t.stateNode;e.pendingContext?Cy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cy(t,e.context,!1),xp(t,e.containerInfo)}function Ky(t,e,n,r,i){return Qs(),Ep(i),e.flags|=256,Pt(t,e,n,r),e.child}var sf={dehydrated:null,treeContext:null,retryLane:0};function of(t){return{baseLanes:t,cachePool:null,transitions:null}}function O0(t,e,n){var r=e.pendingProps,i=Fe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(Fe,i&1),t===null)return Jd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qc(o,r,0,null),t=Vi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=of(n),e.memoizedState=sf,t):Op(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Hb(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Br(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Br(a,s):(s=Vi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?of(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=sf,r}return s=t.child,t=s.sibling,r=Br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Op(t,e){return e=qc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uu(t,e,n,r){return r!==null&&Ep(r),Hs(e,t.child,null,n),t=Op(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Hb(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ad(Error(U(422))),uu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qc({mode:"visible",children:r.children},i,0,null),s=Vi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Hs(e,t.child,null,o),e.child.memoizedState=of(o),e.memoizedState=sf,s);if(!(e.mode&1))return uu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=ad(s,r,void 0),uu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ut||a){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nr(t,i),xn(r,t,i,-1))}return zp(),r=ad(Error(U(421))),uu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,tn=Or(i.nextSibling),nn=e,De=!0,An=null,t!==null&&(dn[fn++]=Hn,dn[fn++]=Yn,dn[fn++]=Mi,Hn=t.id,Yn=t.overflow,Mi=e),e=Op(e,r.children),e.flags|=4096,e)}function Qy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xd(t.return,e,n)}function ld(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function M0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Pt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qy(t,n,e);else if(t.tag===19)Qy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ld(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ld(e,!0,n,null,s);break;case"together":ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yb(t,e,n){switch(e.tag){case 3:N0(e),Qs();break;case 5:l0(e);break;case 1:Wt(e.type)&&Zu(e);break;case 4:xp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(nc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?O0(t,e,n):(Ae(Fe,Fe.current&1),t=rr(t,e,n),t!==null?t.sibling:null);Ae(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return M0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,V0(t,e,n)}return rr(t,e,n)}var F0,af,L0,B0;F0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};af=function(){};L0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xi(Ln.current);var s=null;switch(n){case"input":i=Pd(t,i),r=Pd(t,r),s=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),s=[];break;case"textarea":i=kd(t,i),r=kd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ju)}Dd(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Va.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Va.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ce("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};B0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zo(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Jb(t,e,n){var r=e.pendingProps;switch(wp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Wt(e.type)&&Xu(),vt(e),null;case 3:return r=e.stateNode,Ys(),Ve(qt),Ve(St),Rp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,An!==null&&(mf(An),An=null))),af(t,e),vt(e),null;case 5:Pp(e);var i=xi(qa.current);if(n=e.type,t!==null&&e.stateNode!=null)L0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return vt(e),null}if(t=xi(Ln.current),au(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Dn]=e,r[ja]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<ha.length;i++)Ce(ha[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":ry(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":sy(r,s),Ce("invalid",r)}Dd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ou(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ou(r.textContent,a,t),i=["children",""+a]):Va.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Xl(r),iy(r,s,!0);break;case"textarea":Xl(r),oy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ju)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Dn]=e,t[ja]=r,F0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nd(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<ha.length;i++)Ce(ha[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":ry(t,r),i=Pd(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":sy(t,r),i=kd(t,r),Ce("invalid",t);break;default:i=r}Dd(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?gw(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&pw(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Da(t,u):typeof u=="number"&&Da(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Va.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ce("scroll",t):u!=null&&sp(t,s,u,o))}switch(n){case"input":Xl(t),iy(t,r,!1);break;case"textarea":Xl(t),oy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)B0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=xi(qa.current),xi(Ln.current),au(e)){if(r=e.stateNode,n=e.memoizedProps,r[Dn]=e,(s=r.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:ou(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ou(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dn]=e,e.stateNode=r}return vt(e),null;case 13:if(Ve(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&tn!==null&&e.mode&1&&!(e.flags&128))r0(),Qs(),e.flags|=98560,s=!1;else if(s=au(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Dn]=e}else Qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),s=!1}else An!==null&&(mf(An),An=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?et===0&&(et=3):zp())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return Ys(),af(t,e),t===null&&Ua(e.stateNode.containerInfo),vt(e),null;case 10:return Sp(e.type._context),vt(e),null;case 17:return Wt(e.type)&&Xu(),vt(e),null;case 19:if(Ve(Fe),s=e.memoizedState,s===null)return vt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Zo(s,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sc(t),o!==null){for(e.flags|=128,Zo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ke()>Xs&&(e.flags|=128,r=!0,Zo(s,!1),e.lanes=4194304)}else{if(!r)if(t=sc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!De)return vt(e),null}else 2*Ke()-s.renderingStartTime>Xs&&n!==1073741824&&(e.flags|=128,r=!0,Zo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ke(),e.sibling=null,n=Fe.current,Ae(Fe,r?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return Up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?en&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function Xb(t,e){switch(wp(e),e.tag){case 1:return Wt(e.type)&&Xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ys(),Ve(qt),Ve(St),Rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pp(e),null;case 13:if(Ve(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Fe),null;case 4:return Ys(),null;case 10:return Sp(e.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var cu=!1,It=!1,Zb=typeof WeakSet=="function"?WeakSet:Set,G=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function lf(t,e,n){try{n()}catch(r){$e(t,e,r)}}var Hy=!1;function ex(t,e){if(qd=Qu,t=qw(),_p(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++d===r&&(u=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wd={focusedElem:t,selectionRange:n},Qu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,T=_.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?w:Tn(e.type,w),T);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(k){$e(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return _=Hy,Hy=!1,_}function Ia(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&lf(e,n,s)}i=i.next}while(i!==r)}}function jc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function U0(t){var e=t.alternate;e!==null&&(t.alternate=null,U0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dn],delete e[ja],delete e[Qd],delete e[Mb],delete e[Fb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function z0(t){return t.tag===5||t.tag===3||t.tag===4}function Yy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ju));else if(r!==4&&(t=t.child,t!==null))for(cf(t,e,n),t=t.sibling;t!==null;)cf(t,e,n),t=t.sibling}function hf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hf(t,e,n),t=t.sibling;t!==null;)hf(t,e,n),t=t.sibling}var ht=null,Sn=!1;function mr(t,e,n){for(n=n.child;n!==null;)j0(t,e,n),n=n.sibling}function j0(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Nc,n)}catch{}switch(n.tag){case 5:It||Os(n,e);case 6:var r=ht,i=Sn;ht=null,mr(t,e,n),ht=r,Sn=i,ht!==null&&(Sn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(Sn?(t=ht,n=n.stateNode,t.nodeType===8?td(t.parentNode,n):t.nodeType===1&&td(t,n),Fa(t)):td(ht,n.stateNode));break;case 4:r=ht,i=Sn,ht=n.stateNode.containerInfo,Sn=!0,mr(t,e,n),ht=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lf(n,e,o),i=i.next}while(i!==r)}mr(t,e,n);break;case 1:if(!It&&(Os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$e(n,e,a)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,mr(t,e,n),It=r):mr(t,e,n);break;default:mr(t,e,n)}}function Jy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Zb),e.forEach(function(r){var i=ux.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function In(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ht=a.stateNode,Sn=!1;break e;case 3:ht=a.stateNode.containerInfo,Sn=!0;break e;case 4:ht=a.stateNode.containerInfo,Sn=!0;break e}a=a.return}if(ht===null)throw Error(U(160));j0(s,o,i),ht=null,Sn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){$e(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$0(e,t),e=e.sibling}function $0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(In(e,t),kn(t),r&4){try{Ia(3,t,t.return),jc(3,t)}catch(w){$e(t,t.return,w)}try{Ia(5,t,t.return)}catch(w){$e(t,t.return,w)}}break;case 1:In(e,t),kn(t),r&512&&n!==null&&Os(n,n.return);break;case 5:if(In(e,t),kn(t),r&512&&n!==null&&Os(n,n.return),t.flags&32){var i=t.stateNode;try{Da(i,"")}catch(w){$e(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&hw(i,s),Nd(a,o);var c=Nd(a,s);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?gw(i,f):d==="dangerouslySetInnerHTML"?pw(i,f):d==="children"?Da(i,f):sp(i,d,f,c)}switch(a){case"input":Rd(i,s);break;case"textarea":dw(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Fs(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Fs(i,!!s.multiple,s.defaultValue,!0):Fs(i,!!s.multiple,s.multiple?[]:"",!1))}i[ja]=s}catch(w){$e(t,t.return,w)}}break;case 6:if(In(e,t),kn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){$e(t,t.return,w)}}break;case 3:if(In(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(w){$e(t,t.return,w)}break;case 4:In(e,t),kn(t);break;case 13:In(e,t),kn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lp=Ke())),r&4&&Jy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(It=(c=It)||d,In(e,t),It=c):In(e,t),kn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(f=G=d;G!==null;){switch(p=G,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ia(4,p,p.return);break;case 1:Os(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){$e(r,n,w)}}break;case 5:Os(p,p.return);break;case 22:if(p.memoizedState!==null){Zy(f);continue}}g!==null?(g.return=p,G=g):Zy(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=mw("display",o))}catch(w){$e(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){$e(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:In(e,t),kn(t),r&4&&Jy(t);break;case 21:break;default:In(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(z0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Da(i,""),r.flags&=-33);var s=Yy(t);hf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Yy(t);cf(t,a,o);break;default:throw Error(U(161))}}catch(u){$e(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tx(t,e,n){G=t,q0(t)}function q0(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cu;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||It;a=cu;var c=It;if(cu=o,(It=u)&&!c)for(G=i;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?e_(i):u!==null?(u.return=o,G=u):e_(i);for(;s!==null;)G=s,q0(s),s=s.sibling;G=i,cu=a,It=c}Xy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):Xy(t)}}function Xy(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||jc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&My(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}My(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Fa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}It||e.flags&512&&uf(e)}catch(p){$e(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Zy(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function e_(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jc(4,e)}catch(u){$e(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){$e(e,i,u)}}var s=e.return;try{uf(e)}catch(u){$e(e,s,u)}break;case 5:var o=e.return;try{uf(e)}catch(u){$e(e,o,u)}}}catch(u){$e(e,e.return,u)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var nx=Math.ceil,lc=or.ReactCurrentDispatcher,Mp=or.ReactCurrentOwner,gn=or.ReactCurrentBatchConfig,pe=0,ot=null,Je=null,pt=0,en=0,Ms=ti(0),et=0,Qa=null,Li=0,$c=0,Fp=0,Ta=null,Bt=null,Lp=0,Xs=1/0,Kn=null,uc=!1,df=null,Fr=null,hu=!1,Pr=null,cc=0,Sa=0,ff=null,Cu=-1,ku=0;function kt(){return pe&6?Ke():Cu!==-1?Cu:Cu=Ke()}function Lr(t){return t.mode&1?pe&2&&pt!==0?pt&-pt:Bb.transition!==null?(ku===0&&(ku=Pw()),ku):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Ow(t.type)),t):1}function xn(t,e,n,r){if(50<Sa)throw Sa=0,ff=null,Error(U(185));pl(t,n,r),(!(pe&2)||t!==ot)&&(t===ot&&(!(pe&2)&&($c|=n),et===4&&Sr(t,pt)),Gt(t,r),n===1&&pe===0&&!(e.mode&1)&&(Xs=Ke()+500,Bc&&ni()))}function Gt(t,e){var n=t.callbackNode;BA(t,e);var r=Ku(t,t===ot?pt:0);if(r===0)n!==null&&uy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uy(n),e===1)t.tag===0?Lb(t_.bind(null,t)):e0(t_.bind(null,t)),Nb(function(){!(pe&6)&&ni()}),n=null;else{switch(Rw(r)){case 1:n=cp;break;case 4:n=bw;break;case 16:n=Gu;break;case 536870912:n=xw;break;default:n=Gu}n=X0(n,W0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function W0(t,e){if(Cu=-1,ku=0,pe&6)throw Error(U(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=Ku(t,t===ot?pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hc(t,r);else{e=r;var i=pe;pe|=2;var s=K0();(ot!==t||pt!==e)&&(Kn=null,Xs=Ke()+500,ki(t,e));do try{sx();break}catch(a){G0(t,a)}while(!0);Tp(),lc.current=s,pe=i,Je!==null?e=0:(ot=null,pt=0,e=et)}if(e!==0){if(e===2&&(i=Bd(t),i!==0&&(r=i,e=pf(t,i))),e===1)throw n=Qa,ki(t,0),Sr(t,r),Gt(t,Ke()),n;if(e===6)Sr(t,r);else{if(i=t.current.alternate,!(r&30)&&!rx(i)&&(e=hc(t,r),e===2&&(s=Bd(t),s!==0&&(r=s,e=pf(t,s))),e===1))throw n=Qa,ki(t,0),Sr(t,r),Gt(t,Ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:yi(t,Bt,Kn);break;case 3:if(Sr(t,r),(r&130023424)===r&&(e=Lp+500-Ke(),10<e)){if(Ku(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kd(yi.bind(null,t,Bt,Kn),e);break}yi(t,Bt,Kn);break;case 4:if(Sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-bn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nx(r/1960))-r,10<r){t.timeoutHandle=Kd(yi.bind(null,t,Bt,Kn),r);break}yi(t,Bt,Kn);break;case 5:yi(t,Bt,Kn);break;default:throw Error(U(329))}}}return Gt(t,Ke()),t.callbackNode===n?W0.bind(null,t):null}function pf(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(ki(t,e).flags|=256),t=hc(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&mf(e)),t}function mf(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function rx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sr(t,e){for(e&=~Fp,e&=~$c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bn(e),r=1<<n;t[n]=-1,e&=~r}}function t_(t){if(pe&6)throw Error(U(327));js();var e=Ku(t,0);if(!(e&1))return Gt(t,Ke()),null;var n=hc(t,e);if(t.tag!==0&&n===2){var r=Bd(t);r!==0&&(e=r,n=pf(t,r))}if(n===1)throw n=Qa,ki(t,0),Sr(t,e),Gt(t,Ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yi(t,Bt,Kn),Gt(t,Ke()),null}function Bp(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Xs=Ke()+500,Bc&&ni())}}function Bi(t){Pr!==null&&Pr.tag===0&&!(pe&6)&&js();var e=pe;pe|=1;var n=gn.transition,r=Ee;try{if(gn.transition=null,Ee=1,t)return t()}finally{Ee=r,gn.transition=n,pe=e,!(pe&6)&&ni()}}function Up(){en=Ms.current,Ve(Ms)}function ki(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Db(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(wp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xu();break;case 3:Ys(),Ve(qt),Ve(St),Rp();break;case 5:Pp(r);break;case 4:Ys();break;case 13:Ve(Fe);break;case 19:Ve(Fe);break;case 10:Sp(r.type._context);break;case 22:case 23:Up()}n=n.return}if(ot=t,Je=t=Br(t.current,null),pt=en=e,et=0,Qa=null,Fp=$c=Li=0,Bt=Ta=null,bi!==null){for(e=0;e<bi.length;e++)if(n=bi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}bi=null}return t}function G0(t,e){do{var n=Je;try{if(Tp(),xu.current=ac,oc){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oc=!1}if(Fi=0,it=Ze=Le=null,Ea=!1,Wa=0,Mp.current=null,n===null||n.return===null){et=1,Qa=e,Je=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=pt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=jy(o);if(g!==null){g.flags&=-257,$y(g,o,a,s,e),g.mode&1&&zy(s,c,e),e=g,u=c;var _=e.updateQueue;if(_===null){var w=new Set;w.add(u),e.updateQueue=w}else _.add(u);break e}else{if(!(e&1)){zy(s,c,e),zp();break e}u=Error(U(426))}}else if(De&&a.mode&1){var T=jy(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),$y(T,o,a,s,e),Ep(Js(u,a));break e}}s=u=Js(u,a),et!==4&&(et=2),Ta===null?Ta=[s]:Ta.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=R0(s,u,e);Oy(s,S);break e;case 1:a=u;var E=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Fr===null||!Fr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=C0(s,a,e);Oy(s,k);break e}}s=s.return}while(s!==null)}H0(n)}catch(M){e=M,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function K0(){var t=lc.current;return lc.current=ac,t===null?ac:t}function zp(){(et===0||et===3||et===2)&&(et=4),ot===null||!(Li&268435455)&&!($c&268435455)||Sr(ot,pt)}function hc(t,e){var n=pe;pe|=2;var r=K0();(ot!==t||pt!==e)&&(Kn=null,ki(t,e));do try{ix();break}catch(i){G0(t,i)}while(!0);if(Tp(),pe=n,lc.current=r,Je!==null)throw Error(U(261));return ot=null,pt=0,et}function ix(){for(;Je!==null;)Q0(Je)}function sx(){for(;Je!==null&&!CA();)Q0(Je)}function Q0(t){var e=J0(t.alternate,t,en);t.memoizedProps=t.pendingProps,e===null?H0(t):Je=e,Mp.current=null}function H0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Xb(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Je=null;return}}else if(n=Jb(n,e,en),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);et===0&&(et=5)}function yi(t,e,n){var r=Ee,i=gn.transition;try{gn.transition=null,Ee=1,ox(t,e,n,r)}finally{gn.transition=i,Ee=r}return null}function ox(t,e,n,r){do js();while(Pr!==null);if(pe&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(UA(t,s),t===ot&&(Je=ot=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hu||(hu=!0,X0(Gu,function(){return js(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gn.transition,gn.transition=null;var o=Ee;Ee=1;var a=pe;pe|=4,Mp.current=null,ex(t,n),$0(n,t),bb(Wd),Qu=!!qd,Wd=qd=null,t.current=n,tx(n),kA(),pe=a,Ee=o,gn.transition=s}else t.current=n;if(hu&&(hu=!1,Pr=t,cc=i),s=t.pendingLanes,s===0&&(Fr=null),NA(n.stateNode),Gt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uc)throw uc=!1,t=df,df=null,t;return cc&1&&t.tag!==0&&js(),s=t.pendingLanes,s&1?t===ff?Sa++:(Sa=0,ff=t):Sa=0,ni(),null}function js(){if(Pr!==null){var t=Rw(cc),e=gn.transition,n=Ee;try{if(gn.transition=null,Ee=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,cc=0,pe&6)throw Error(U(331));var i=pe;for(pe|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(G=c;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:Ia(8,d,s)}var f=d.child;if(f!==null)f.return=d,G=f;else for(;G!==null;){d=G;var p=d.sibling,g=d.return;if(U0(d),d===c){G=null;break}if(p!==null){p.return=g,G=p;break}G=g}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ia(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,G=S;break e}G=s.return}}var E=t.current;for(G=E;G!==null;){o=G;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,G=I;else e:for(o=E;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jc(9,a)}}catch(M){$e(a,a.return,M)}if(a===o){G=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,G=k;break e}G=a.return}}if(pe=i,ni(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Nc,t)}catch{}r=!0}return r}finally{Ee=n,gn.transition=e}}return!1}function n_(t,e,n){e=Js(n,e),e=R0(t,e,1),t=Mr(t,e,1),e=kt(),t!==null&&(pl(t,1,e),Gt(t,e))}function $e(t,e,n){if(t.tag===3)n_(t,t,n);else for(;e!==null;){if(e.tag===3){n_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){t=Js(n,t),t=C0(e,t,1),e=Mr(e,t,1),t=kt(),e!==null&&(pl(e,1,t),Gt(e,t));break}}e=e.return}}function ax(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(pt&n)===n&&(et===4||et===3&&(pt&130023424)===pt&&500>Ke()-Lp?ki(t,0):Fp|=n),Gt(t,e)}function Y0(t,e){e===0&&(t.mode&1?(e=tu,tu<<=1,!(tu&130023424)&&(tu=4194304)):e=1);var n=kt();t=nr(t,e),t!==null&&(pl(t,e,n),Gt(t,n))}function lx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Y0(t,n)}function ux(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Y0(t,n)}var J0;J0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,Yb(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,De&&e.flags&1048576&&t0(e,tc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var i=Ks(e,St.current);zs(e,n),i=kp(null,e,r,t,i,n);var s=Vp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(r)?(s=!0,Zu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bp(e),i.updater=zc,e.stateNode=i,i._reactInternals=e,ef(e,r,t,n),e=rf(null,e,r,!0,s,n)):(e.tag=0,De&&s&&vp(e),Pt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=hx(r),t=Tn(r,t),i){case 0:e=nf(null,e,r,t,n);break e;case 1:e=Gy(null,e,r,t,n);break e;case 11:e=qy(null,e,r,t,n);break e;case 14:e=Wy(null,e,r,Tn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),nf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Gy(t,e,r,i,n);case 3:e:{if(N0(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,a0(t,e),ic(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Js(Error(U(423)),e),e=Ky(t,e,r,n,i);break e}else if(r!==i){i=Js(Error(U(424)),e),e=Ky(t,e,r,n,i);break e}else for(tn=Or(e.stateNode.containerInfo.firstChild),nn=e,De=!0,An=null,n=s0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===i){e=rr(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return l0(e),t===null&&Jd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Gd(r,i)?o=null:s!==null&&Gd(r,s)&&(e.flags|=32),D0(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&Jd(e),null;case 13:return O0(t,e,n);case 4:return xp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hs(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),qy(t,e,r,i,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(nc,r._currentValue),r._currentValue=o,s!==null)if(Pn(s.value,o)){if(s.children===i.children&&!qt.current){e=rr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Xn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Xd(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zs(e,n),i=_n(i),r=r(i),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,i=Tn(r,e.pendingProps),i=Tn(r.type,i),Wy(t,e,r,i,n);case 15:return k0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Ru(t,e),e.tag=1,Wt(r)?(t=!0,Zu(e)):t=!1,zs(e,n),P0(e,r,i),ef(e,r,i,n),rf(null,e,r,!0,t,n);case 19:return M0(t,e,n);case 22:return V0(t,e,n)}throw Error(U(156,e.tag))};function X0(t,e){return Aw(t,e)}function cx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,r){return new cx(t,e,n,r)}function jp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hx(t){if(typeof t=="function")return jp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ap)return 11;if(t===lp)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")jp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bs:return Vi(n.children,i,s,e);case op:o=8,i|=8;break;case Sd:return t=pn(12,n,e,i|2),t.elementType=Sd,t.lanes=s,t;case Ad:return t=pn(13,n,e,i),t.elementType=Ad,t.lanes=s,t;case bd:return t=pn(19,n,e,i),t.elementType=bd,t.lanes=s,t;case lw:return qc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ow:o=10;break e;case aw:o=9;break e;case ap:o=11;break e;case lp:o=14;break e;case Er:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=pn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vi(t,e,n,r){return t=pn(7,t,r,e),t.lanes=n,t}function qc(t,e,n,r){return t=pn(22,t,r,e),t.elementType=lw,t.lanes=n,t.stateNode={isHidden:!1},t}function ud(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function cd(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qh(0),this.expirationTimes=qh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $p(t,e,n,r,i,s,o,a,u){return t=new dx(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bp(s),t}function fx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Z0(t){if(!t)return $r;t=t._reactInternals;e:{if(Xi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Wt(n))return Zw(t,n,e)}return e}function eE(t,e,n,r,i,s,o,a,u){return t=$p(n,r,!0,t,i,s,o,a,u),t.context=Z0(null),n=t.current,r=kt(),i=Lr(n),s=Xn(r,i),s.callback=e??null,Mr(n,s,i),t.current.lanes=i,pl(t,i,r),Gt(t,r),t}function Wc(t,e,n,r){var i=e.current,s=kt(),o=Lr(i);return n=Z0(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mr(i,e,o),t!==null&&(xn(t,i,o,s),bu(t,i,o)),o}function dc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function r_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qp(t,e){r_(t,e),(t=t.alternate)&&r_(t,e)}function px(){return null}var tE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wp(t){this._internalRoot=t}Gc.prototype.render=Wp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Wc(t,e,null,null)};Gc.prototype.unmount=Wp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bi(function(){Wc(null,t,null,null)}),e[tr]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tr.length&&e!==0&&e<Tr[n].priority;n++);Tr.splice(n,0,t),n===0&&Nw(t)}};function Gp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function i_(){}function mx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=dc(o);s.call(c)}}var o=eE(e,r,t,0,null,!1,!1,"",i_);return t._reactRootContainer=o,t[tr]=o.current,Ua(t.nodeType===8?t.parentNode:t),Bi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=dc(u);a.call(c)}}var u=$p(t,0,!1,null,null,!1,!1,"",i_);return t._reactRootContainer=u,t[tr]=u.current,Ua(t.nodeType===8?t.parentNode:t),Bi(function(){Wc(e,u,n,r)}),u}function Qc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=dc(o);a.call(u)}}Wc(e,o,t,i)}else o=mx(n,e,t,i,r);return dc(o)}Cw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ca(e.pendingLanes);n!==0&&(hp(e,n|1),Gt(e,Ke()),!(pe&6)&&(Xs=Ke()+500,ni()))}break;case 13:Bi(function(){var r=nr(t,1);if(r!==null){var i=kt();xn(r,t,1,i)}}),qp(t,1)}};dp=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=kt();xn(e,t,134217728,n)}qp(t,134217728)}};kw=function(t){if(t.tag===13){var e=Lr(t),n=nr(t,e);if(n!==null){var r=kt();xn(n,t,e,r)}qp(t,e)}};Vw=function(){return Ee};Dw=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Md=function(t,e,n){switch(e){case"input":if(Rd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lc(r);if(!i)throw Error(U(90));cw(r),Rd(r,i)}}}break;case"textarea":dw(t,n);break;case"select":e=n.value,e!=null&&Fs(t,!!n.multiple,e,!1)}};vw=Bp;ww=Bi;var gx={usingClientEntryPoint:!1,Events:[gl,Cs,Lc,yw,_w,Bp]},ea={findFiberByHostInstance:Ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yx={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:or.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Tw(t),t===null?null:t.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{Nc=du.inject(yx),Fn=du}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gx;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gp(e))throw Error(U(200));return fx(t,e,null,n)};on.createRoot=function(t,e){if(!Gp(t))throw Error(U(299));var n=!1,r="",i=tE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$p(t,1,!1,null,null,n,!1,r,i),t[tr]=e.current,Ua(t.nodeType===8?t.parentNode:t),new Wp(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Tw(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return Bi(t)};on.hydrate=function(t,e,n){if(!Kc(e))throw Error(U(200));return Qc(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!Gp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=tE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eE(e,null,t,1,n??null,i,!1,s,o),t[tr]=e.current,Ua(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gc(e)};on.render=function(t,e,n){if(!Kc(e))throw Error(U(200));return Qc(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Kc(t))throw Error(U(40));return t._reactRootContainer?(Bi(function(){Qc(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};on.unstable_batchedUpdates=Bp;on.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Qc(t,e,n,!1,r)};on.version="18.3.1-next-f1338f8080-20240426";function nE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nE)}catch(t){console.error(t)}}nE(),nw.exports=on;var _x=nw.exports,s_=_x;Id.createRoot=s_.createRoot,Id.hydrateRoot=s_.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ha(){return Ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ha.apply(this,arguments)}var Rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rr||(Rr={}));const o_="popstate";function vx(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return gf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:iE(i)}return Ex(e,n,null,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wx(){return Math.random().toString(36).substr(2,8)}function a_(t,e){return{usr:t.state,key:t.key,idx:e}}function gf(t,e,n,r){return n===void 0&&(n=null),Ha({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vo(e):e,{state:n,key:e&&e.key||r||wx()})}function iE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Ex(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Rr.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(Ha({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=Rr.Pop;let T=d(),S=T==null?null:T-c;c=T,u&&u({action:a,location:w.location,delta:S})}function p(T,S){a=Rr.Push;let E=gf(w.location,T,S);c=d()+1;let I=a_(E,c),k=w.createHref(E);try{o.pushState(I,"",k)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(k)}s&&u&&u({action:a,location:w.location,delta:1})}function g(T,S){a=Rr.Replace;let E=gf(w.location,T,S);c=d();let I=a_(E,c),k=w.createHref(E);o.replaceState(I,"",k),s&&u&&u({action:a,location:w.location,delta:0})}function _(T){let S=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof T=="string"?T:iE(T);return E=E.replace(/ $/,"%20"),tt(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let w={get action(){return a},get location(){return t(i,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(o_,f),u=T,()=>{i.removeEventListener(o_,f),u=null}},createHref(T){return e(i,T)},createURL:_,encodeLocation(T){let S=_(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:g,go(T){return o.go(T)}};return w}var l_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(l_||(l_={}));function Ix(t,e,n){return n===void 0&&(n="/"),Tx(t,e,n,!1)}function Tx(t,e,n,r){let i=typeof e=="string"?vo(e):e,s=aE(i.pathname||"/",n);if(s==null)return null;let o=sE(t);Sx(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=Ox(s);a=Dx(o[u],c,r)}return a}function sE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(tt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Di([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(tt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),sE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:kx(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of oE(s.path))i(s,o,u)}),e}function oE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=oE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function Sx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Vx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ax=/^:[\w-]+$/,bx=3,xx=2,Px=1,Rx=10,Cx=-2,u_=t=>t==="*";function kx(t,e){let n=t.split("/"),r=n.length;return n.some(u_)&&(r+=Cx),e&&(r+=xx),n.filter(i=>!u_(i)).reduce((i,s)=>i+(Ax.test(s)?bx:s===""?Px:Rx),r)}function Vx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Dx(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=c_({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),p=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=c_({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Di([s,f.pathname]),pathnameBase:zx(Di([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Di([s,f.pathnameBase]))}return o}function c_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Nx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let w=a[f]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const _=a[f];return g&&!_?c[p]=void 0:c[p]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Nx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Ox(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function aE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Mx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?vo(t):t;return{pathname:n?n.startsWith("/")?n:Fx(n,e):e,search:jx(r),hash:$x(i)}}function Fx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Lx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bx(t,e){let n=Lx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ux(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=vo(t):(i=Ha({},t),tt(!i.pathname||!i.pathname.includes("?"),hd("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),hd("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),hd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let u=Mx(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Di=t=>t.join("/").replace(/\/\/+/g,"/"),zx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$x=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lE=["post","put","patch","delete"];new Set(lE);const Wx=["get",...lE];new Set(Wx);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ya.apply(this,arguments)}const Kp=Q.createContext(null),Gx=Q.createContext(null),Hc=Q.createContext(null),Yc=Q.createContext(null),wo=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),uE=Q.createContext(null);function Jc(){return Q.useContext(Yc)!=null}function cE(){return Jc()||tt(!1),Q.useContext(Yc).location}function hE(t){Q.useContext(Hc).static||Q.useLayoutEffect(t)}function dE(){let{isDataRoute:t}=Q.useContext(wo);return t?sP():Kx()}function Kx(){Jc()||tt(!1);let t=Q.useContext(Kp),{basename:e,future:n,navigator:r}=Q.useContext(Hc),{matches:i}=Q.useContext(wo),{pathname:s}=cE(),o=JSON.stringify(Bx(i,n.v7_relativeSplatPath)),a=Q.useRef(!1);return hE(()=>{a.current=!0}),Q.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Ux(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Di([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,s,t])}function Qx(t,e){return Hx(t,e)}function Hx(t,e,n,r){Jc()||tt(!1);let{navigator:i}=Q.useContext(Hc),{matches:s}=Q.useContext(wo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=cE(),d;if(e){var f;let T=typeof e=="string"?vo(e):e;u==="/"||(f=T.pathname)!=null&&f.startsWith(u)||tt(!1),d=T}else d=c;let p=d.pathname||"/",g=p;if(u!=="/"){let T=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=Ix(t,{pathname:g}),w=eP(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:Di([u,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:Di([u,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&w?Q.createElement(Yc.Provider,{value:{location:Ya({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Rr.Pop}},w):w}function Yx(){let t=iP(),e=qx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),n?Q.createElement("pre",{style:i},n):null,null)}const Jx=Q.createElement(Yx,null);class Xx extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Q.createElement(wo.Provider,{value:this.props.routeContext},Q.createElement(uE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zx(t){let{routeContext:e,match:n,children:r}=t,i=Q.useContext(Kp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Q.createElement(wo.Provider,{value:e},r)}function eP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||tt(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:g}=n,_=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||_){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,p)=>{let g,_=!1,w=null,T=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||Jx,u&&(c<0&&p===0?(_=!0,T=null):c===p&&(_=!0,T=f.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,p+1)),E=()=>{let I;return g?I=w:_?I=T:f.route.Component?I=Q.createElement(f.route.Component,null):f.route.element?I=f.route.element:I=d,Q.createElement(Zx,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:I})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?Q.createElement(Xx,{location:n.location,revalidation:n.revalidation,component:w,error:g,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}var fE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fE||{}),fc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fc||{});function tP(t){let e=Q.useContext(Kp);return e||tt(!1),e}function nP(t){let e=Q.useContext(Gx);return e||tt(!1),e}function rP(t){let e=Q.useContext(wo);return e||tt(!1),e}function pE(t){let e=rP(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function iP(){var t;let e=Q.useContext(uE),n=nP(fc.UseRouteError),r=pE(fc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sP(){let{router:t}=tP(fE.UseNavigateStable),e=pE(fc.UseNavigateStable),n=Q.useRef(!1);return hE(()=>{n.current=!0}),Q.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ya({fromRouteId:e},s)))},[t,e])}function yf(t){tt(!1)}function oP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Rr.Pop,navigator:s,static:o=!1,future:a}=t;Jc()&&tt(!1);let u=e.replace(/^\/*/,"/"),c=Q.useMemo(()=>({basename:u,navigator:s,static:o,future:Ya({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=vo(r));let{pathname:d="/",search:f="",hash:p="",state:g=null,key:_="default"}=r,w=Q.useMemo(()=>{let T=aE(d,u);return T==null?null:{location:{pathname:T,search:f,hash:p,state:g,key:_},navigationType:i}},[u,d,f,p,g,_,i]);return w==null?null:Q.createElement(Hc.Provider,{value:c},Q.createElement(Yc.Provider,{children:n,value:w}))}function aP(t){let{children:e,location:n}=t;return Qx(_f(e),n)}new Promise(()=>{});function _f(t,e){e===void 0&&(e=[]);let n=[];return Q.Children.forEach(t,(r,i)=>{if(!Q.isValidElement(r))return;let s=[...e,i];if(r.type===Q.Fragment){n.push.apply(n,_f(r.props.children,s));return}r.type!==yf&&tt(!1),!r.props.index||!r.props.children||tt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_f(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const lP="6";try{window.__reactRouterVersion=lP}catch{}const uP="startTransition",h_=aA[uP];function cP(t){let{basename:e,children:n,future:r,window:i}=t,s=Q.useRef();s.current==null&&(s.current=vx({window:i,v5Compat:!0}));let o=s.current,[a,u]=Q.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=Q.useCallback(f=>{c&&h_?h_(()=>u(f)):u(f)},[u,c]);return Q.useLayoutEffect(()=>o.listen(d),[o,d]),Q.createElement(oP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var d_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(d_||(d_={}));var f_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(f_||(f_={}));function mE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=mE(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function gE(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=mE(t))&&(r&&(r+=" "),r+=e);return r}const Qp="-";function hP(t){const e=fP(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(Qp);return a[0]===""&&a.length!==1&&a.shift(),yE(a,e)||dP(o)}function s(o,a){const u=n[o]||[];return a&&r[o]?[...u,...r[o]]:u}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function yE(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?yE(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Qp);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const p_=/^\[(.+)\]$/;function dP(t){if(p_.test(t)){const e=p_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function fP(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return mP(Object.entries(t.classGroups),n).forEach(([s,o])=>{vf(o,r,s,e)}),r}function vf(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:m_(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(pP(i)){vf(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{vf(o,m_(e,s),n,r)})})}function m_(t,e){let n=t;return e.split(Qp).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function pP(t){return t.isThemeGetter}function mP(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function gP(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const _E="!";function yP(t){const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length;function o(a){const u=[];let c=0,d=0,f;for(let T=0;T<a.length;T++){let S=a[T];if(c===0){if(S===i&&(r||a.slice(T,T+s)===e)){u.push(a.slice(d,T)),d=T+s;continue}if(S==="/"){f=T;continue}}S==="["?c++:S==="]"&&c--}const p=u.length===0?a:a.substring(d),g=p.startsWith(_E),_=g?p.substring(1):p,w=f&&f>d?f-d:void 0;return{modifiers:u,hasImportantModifier:g,baseClassName:_,maybePostfixModifierPosition:w}}return n?function(u){return n({className:u,parseClassName:o})}:o}function _P(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function vP(t){return{cache:gP(t.cacheSize),parseClassName:yP(t),...hP(t)}}const wP=/\s+/;function EP(t,e){const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(wP).map(o=>{const{modifiers:a,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:d}=n(o);let f=!!d,p=r(f?c.substring(0,d):c);if(!p){if(!f)return{isTailwindClass:!1,originalClassName:o};if(p=r(c),!p)return{isTailwindClass:!1,originalClassName:o};f=!1}const g=_P(a).join(":");return{isTailwindClass:!0,modifierId:u?g+_E:g,classGroupId:p,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:u,hasPostfixModifier:c}=o,d=a+u;return s.has(d)?!1:(s.add(d),i(u,c).forEach(f=>s.add(a+f)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function IP(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=vE(e))&&(r&&(r+=" "),r+=n);return r}function vE(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=vE(t[r]))&&(n&&(n+=" "),n+=e);return n}function TP(t,...e){let n,r,i,s=o;function o(u){const c=e.reduce((d,f)=>f(d),t());return n=vP(c),r=n.cache.get,i=n.cache.set,s=a,a(u)}function a(u){const c=r(u);if(c)return c;const d=EP(u,n);return i(u,d),d}return function(){return s(IP.apply(null,arguments))}}function Re(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const wE=/^\[(?:([a-z-]+):)?(.+)\]$/i,SP=/^\d+\/\d+$/,AP=new Set(["px","full","screen"]),bP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,RP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Gn(t){return Pi(t)||AP.has(t)||SP.test(t)}function gr(t){return Eo(t,"length",LP)}function Pi(t){return!!t&&!Number.isNaN(Number(t))}function fu(t){return Eo(t,"number",Pi)}function ta(t){return!!t&&Number.isInteger(Number(t))}function kP(t){return t.endsWith("%")&&Pi(t.slice(0,-1))}function oe(t){return wE.test(t)}function yr(t){return bP.test(t)}const VP=new Set(["length","size","percentage"]);function DP(t){return Eo(t,VP,EE)}function NP(t){return Eo(t,"position",EE)}const OP=new Set(["image","url"]);function MP(t){return Eo(t,OP,UP)}function FP(t){return Eo(t,"",BP)}function na(){return!0}function Eo(t,e,n){const r=wE.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function LP(t){return xP.test(t)&&!PP.test(t)}function EE(){return!1}function BP(t){return RP.test(t)}function UP(t){return CP.test(t)}function zP(){const t=Re("colors"),e=Re("spacing"),n=Re("blur"),r=Re("brightness"),i=Re("borderColor"),s=Re("borderRadius"),o=Re("borderSpacing"),a=Re("borderWidth"),u=Re("contrast"),c=Re("grayscale"),d=Re("hueRotate"),f=Re("invert"),p=Re("gap"),g=Re("gradientColorStops"),_=Re("gradientColorStopPositions"),w=Re("inset"),T=Re("margin"),S=Re("opacity"),E=Re("padding"),I=Re("saturate"),k=Re("scale"),M=Re("sepia"),B=Re("skew"),A=Re("space"),v=Re("translate"),b=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",oe,e],C=()=>[oe,e],x=()=>["",Gn,gr],ze=()=>["auto",Pi,oe],un=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],bt=()=>["solid","dashed","dotted","double","none"],ut=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],X=()=>["","0",oe],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[Pi,fu],ae=()=>[Pi,oe];return{cacheSize:500,separator:":",theme:{colors:[na],spacing:[Gn,gr],blur:["none","",yr,oe],brightness:ge(),borderColor:[t],borderRadius:["none","","full",yr,oe],borderSpacing:C(),borderWidth:x(),contrast:ge(),grayscale:X(),hueRotate:ae(),invert:X(),gap:C(),gradientColorStops:[t],gradientColorStopPositions:[kP,gr],inset:R(),margin:R(),opacity:ge(),padding:C(),saturate:ge(),scale:ge(),sepia:X(),skew:ae(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",oe]}],container:["container"],columns:[{columns:[yr]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...un(),oe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ta,oe]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",oe]}],grow:[{grow:X()}],shrink:[{shrink:X()}],order:[{order:["first","last","none",ta,oe]}],"grid-cols":[{"grid-cols":[na]}],"col-start-end":[{col:["auto",{span:["full",ta,oe]},oe]}],"col-start":[{"col-start":ze()}],"col-end":[{"col-end":ze()}],"grid-rows":[{"grid-rows":[na]}],"row-start-end":[{row:["auto",{span:[ta,oe]},oe]}],"row-start":[{"row-start":ze()}],"row-end":[{"row-end":ze()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",oe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",oe,e]}],"min-w":[{"min-w":[oe,e,"min","max","fit"]}],"max-w":[{"max-w":[oe,e,"none","full","min","max","fit","prose",{screen:[yr]},yr]}],h:[{h:[oe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[oe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[oe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[oe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",yr,gr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fu]}],"font-family":[{font:[na]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",oe]}],"line-clamp":[{"line-clamp":["none",Pi,fu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gn,oe]}],"list-image":[{"list-image":["none",oe]}],"list-style-type":[{list:["none","disc","decimal",oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...bt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gn,gr]}],"underline-offset":[{"underline-offset":["auto",Gn,oe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...un(),NP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",DP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},MP]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...bt(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:bt()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...bt()]}],"outline-offset":[{"outline-offset":[Gn,oe]}],"outline-w":[{outline:[Gn,gr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:x()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Gn,gr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",yr,FP]}],"shadow-color":[{shadow:[na]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...ut(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ut()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",yr,oe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[I]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",oe]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",oe]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[ta,oe]}],"translate-x":[{"translate-x":[v]}],"translate-y":[{"translate-y":[v]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",oe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",oe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",oe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gn,gr,fu]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const jP=TP(zP);function Xc(...t){return jP(gE(t))}const IE=Q.forwardRef(({className:t,...e},n)=>re.jsx("div",{ref:n,className:Xc("flex flex-row",t),...e})),Cr=Q.forwardRef(({className:t,...e},n)=>re.jsx("div",{ref:n,className:Xc("flex flex-col",t),...e})),g_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,y_=gE,TE=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return y_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],f=s==null?void 0:s[c];if(d===null)return null;const p=g_(d)||g_(f);return i[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...g}=d;return Object.entries(g).every(_=>{let[w,T]=_;return Array.isArray(T)?T.includes({...s,...a}[w]):{...s,...a}[w]===T})?[...c,f,p]:c},[]);return y_(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},$P={inherited:"text-inherit",default:"text-foreground",primary:"text-primary",secondary:"text-secondary",success:"text-success",warning:"text-warning",destructive:"text-destructive",info:"text-info",muted:"text-muted-foreground"},qP={displayL:"font-normal text-[57px] leading-[64px] tracking-[-0.25px]",displayM:"font-normal text-[45px] leading-[52px] tracking-[0px]",displayS:"font-normal text-[36px] leading-[44px] tracking-[0px]",headlineL:"font-normal text-[32px] leading-[40px] tracking-[0px]",headlineM:"font-normal text-[28px] leading-[36px] tracking-[0px]",headlineS:"font-normal text-[24px] leading-[32px] tracking-[0px]",titleL:"font-normal text-[22px] leading-[28px] tracking-[0px]",titleM:"font-medium text-[16px] leading-[24px] tracking-[0.15px]",titleS:"font-medium text-[14px] leading-[20px] tracking-[0.1px]",bodyL:"font-normal text-[16px] leading-[24px] tracking-[0.5px]",bodyM:"font-normal text-[14px] leading-[20px] tracking-[0.25px]",bodyS:"font-normal text-[12px] leading-[16px] tracking-[0.4px]",labelL:"font-medium text-[14px] leading-[20px] tracking-[0.1px]",labelM:"font-medium text-[12px] leading-[16px] tracking-[0.5px]",labelS:"font-medium text-[11px] leading-[16px] tracking-[0.5px]"},WP={true:"text-center"},GP=TE("",{variants:{color:$P,size:qP,center:WP,variant:{link:"text-info cursor-pointer"}},defaultVariants:{color:"inherited",size:"bodyM"}}),SE=Q.forwardRef(({color:t,size:e,center:n,variant:r,className:i,...s},o)=>re.jsx("span",{ref:o,className:Xc(GP({color:t,size:e,center:n,variant:r}),i),...s})),KP=TE("inline-flex items-center justify-center whitespace-nowrap ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-info",{variants:{color:{primary:"bg-primary/80 text-primary-foreground hover:bg-primary",secondary:"bg-secondary/80 text-secondary-foreground hover:bg-secondary",success:"bg-success/80 text-success-foreground hover:bg-success",warning:"bg-warning/80 text-warning-foreground hover:bg-warning",destructive:"bg-destructive/80 text-destructive-foreground hover:bg-destructive",info:"bg-info/80 text-info-foreground hover:bg-info",muted:"bg-muted/80 text-muted-foreground hover:bg-muted"},variant:{default:"",ghost:"bg-transparent"},size:{none:"",default:"h-12 px-5",badge:"py-1.5 px-2.5",icon:"aspect-square p-1"},shape:{default:"rounded-md",pill:"rounded-full"}},defaultVariants:{color:"primary",variant:"default",size:"default",shape:"default"}}),AE=Q.forwardRef(({color:t,variant:e,size:n,shape:r,className:i,type:s="button",...o},a)=>re.jsx("button",{ref:a,className:Xc(KP({color:t,variant:e,size:n,shape:r}),i),type:s,...o})),QP={apiKey:"AIzaSyBE6Re-XKH8pY0MW-xoZpHg-x5ZsS636H0",authDomain:"birthdaywebsite-24ae0.firebaseapp.com",projectId:"birthdaywebsite-24ae0",storageBucket:"birthdaywebsite-24ae0.appspot.com",messagingSenderId:"8844631994",appId:"1:8844631994:web:fc330af093c1b56ed1c783",measurementId:"G-1TJTBZJDVP"};var __={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},HP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(p=64)),r.push(n[d],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new YP;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const _=c<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JP=function(t){const e=bE(t);return xE.encodeByteArray(e,!0)},pc=function(t){return JP(t).replace(/\./g,"")},XP=function(t){try{return xE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mc(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!ZP(n)||(t[n]=mc(t[n],e[n]));return t}function ZP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=()=>eR().__FIREBASE_DEFAULTS__,nR=()=>{if(typeof process>"u"||typeof __>"u")return;const t=__.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&XP(t[1]);return e&&JSON.parse(e)},PE=()=>{try{return tR()||nR()||rR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RE=()=>{var t;return(t=PE())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pc(JSON.stringify(n)),pc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oR(){var t;const e=(t=PE())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CE(){return typeof window<"u"||kE()}function kE(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function VE(){return!oR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DE(){try{return typeof indexedDB=="object"}catch{return!1}}function aR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="FirebaseError";class Zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lR,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zc.prototype.create)}}class Zc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?uR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zi(i,a,r)}}function uR(t,e){return t.replace(cR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ja(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(w_(s)&&w_(o)){if(!Ja(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function w_(t){return t!==null&&typeof t=="object"}function hR(t,e){const n=new dR(t,e);return n.subscribe.bind(n)}class dR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=dd),i.error===void 0&&(i.error=dd),i.complete===void 0&&(i.complete=dd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class Ui{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:_i})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_i){return this.instances.has(e)}getOptions(e=_i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_i){return this.component?this.component.multipleInstances?e:_i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mR(t){return t===_i?void 0:t}function gR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=[];var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const OE={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},yR=de.INFO,_R={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},vR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_R[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yp{constructor(e){this.name=e,this._logLevel=yR,this._logHandler=vR,this._userLogHandler=null,Hp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}function wR(t){Hp.forEach(e=>{e.setLogLevel(t)})}function ER(t,e){for(const n of Hp){let r=null;e&&e.level&&(r=OE[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&t({level:de[s].toLowerCase(),message:a,args:o,type:i.name})}}}const IR=(t,e)=>e.some(n=>t instanceof n);let E_,I_;function TR(){return E_||(E_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SR(){return I_||(I_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ME=new WeakMap,wf=new WeakMap,FE=new WeakMap,fd=new WeakMap,Jp=new WeakMap;function AR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ur(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ME.set(n,t)}).catch(()=>{}),Jp.set(e,t),e}function bR(t){if(wf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wf.set(t,e)}let Ef={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xR(t){Ef=t(Ef)}function PR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pd(this),e,...n);return FE.set(r,e.sort?e.sort():[e]),Ur(r)}:SR().includes(t)?function(...e){return t.apply(pd(this),e),Ur(ME.get(this))}:function(...e){return Ur(t.apply(pd(this),e))}}function RR(t){return typeof t=="function"?PR(t):(t instanceof IDBTransaction&&bR(t),IR(t,TR())?new Proxy(t,Ef):t)}function Ur(t){if(t instanceof IDBRequest)return AR(t);if(fd.has(t))return fd.get(t);const e=RR(t);return e!==t&&(fd.set(t,e),Jp.set(e,t)),e}const pd=t=>Jp.get(t);function CR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ur(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ur(o.result),u.oldVersion,u.newVersion,Ur(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const kR=["get","getKey","getAll","getAllKeys","count"],VR=["put","add","delete","clear"],md=new Map;function T_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(md.get(e))return md.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=VR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kR.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return md.set(e,s),s}xR(t=>({...t,get:(e,n,r)=>T_(e,n)||t.get(e,n,r),has:(e,n)=>!!T_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yc="@firebase/app",If="0.10.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Yp("@firebase/app"),OR="@firebase/app-compat",MR="@firebase/analytics-compat",FR="@firebase/analytics",LR="@firebase/app-check-compat",BR="@firebase/app-check",UR="@firebase/auth",zR="@firebase/auth-compat",jR="@firebase/database",$R="@firebase/database-compat",qR="@firebase/functions",WR="@firebase/functions-compat",GR="@firebase/installations",KR="@firebase/installations-compat",QR="@firebase/messaging",HR="@firebase/messaging-compat",YR="@firebase/performance",JR="@firebase/performance-compat",XR="@firebase/remote-config",ZR="@firebase/remote-config-compat",eC="@firebase/storage",tC="@firebase/storage-compat",nC="@firebase/firestore",rC="@firebase/vertexai-preview",iC="@firebase/firestore-compat",sC="firebase",oC="10.12.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]",aC={[yc]:"fire-core",[OR]:"fire-core-compat",[FR]:"fire-analytics",[MR]:"fire-analytics-compat",[BR]:"fire-app-check",[LR]:"fire-app-check-compat",[UR]:"fire-auth",[zR]:"fire-auth-compat",[jR]:"fire-rtdb",[$R]:"fire-rtdb-compat",[qR]:"fire-fn",[WR]:"fire-fn-compat",[GR]:"fire-iid",[KR]:"fire-iid-compat",[QR]:"fire-fcm",[HR]:"fire-fcm-compat",[YR]:"fire-perf",[JR]:"fire-perf-compat",[XR]:"fire-rc",[ZR]:"fire-rc-compat",[eC]:"fire-gcs",[tC]:"fire-gcs-compat",[nC]:"fire-fst",[iC]:"fire-fst-compat",[rC]:"fire-vertex","fire-js":"fire-js",[sC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Map,Zs=new Map,eo=new Map;function Xa(t,e){try{t.container.addComponent(e)}catch(n){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function LE(t,e){t.container.addOrOverwriteComponent(e)}function to(t){const e=t.name;if(eo.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;eo.set(e,t);for(const n of Wr.values())Xa(n,t);for(const n of Zs.values())Xa(n,t);return!0}function BE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lC(t,e,n=qr){BE(t,e).clearInstance(n)}function UE(t){return t.options!==void 0}function uC(t){return t.settings!==void 0}function cC(){eo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yn=new Zc("app","Firebase",hC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zE=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC extends zE{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Zn(yc,If,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){em(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw yn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=oC;function Zp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qr,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw yn.create("bad-app-name",{appName:String(i)});if(n||(n=RE()),!n)throw yn.create("no-options");const s=Wr.get(i);if(s){if(Ja(n,s.options)&&Ja(r,s.config))return s;throw yn.create("duplicate-app",{appName:i})}const o=new NE(i);for(const u of eo.values())o.addComponent(u);const a=new zE(n,r,o);return Wr.set(i,a),a}function fC(t,e){if(CE()&&!kE())throw yn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;UE(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw yn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Zs.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new NE(s);for(const c of eo.values())a.addComponent(c);const u=new dC(n,e,s,a);return Zs.set(s,u),u}function pC(t=qr){const e=Wr.get(t);if(!e&&t===qr&&RE())return Zp();if(!e)throw yn.create("no-app",{appName:t});return e}function mC(){return Array.from(Wr.values())}async function em(t){let e=!1;const n=t.name;Wr.has(n)?(e=!0,Wr.delete(n)):Zs.has(n)&&t.decRefCount()<=0&&(Zs.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Zn(t,e,n){var r;let i=(r=aC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(a.join(" "));return}to(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function jE(t,e){if(t!==null&&typeof t!="function")throw yn.create("invalid-log-argument");ER(t,e)}function $E(t){wR(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="firebase-heartbeat-database",yC=1,Za="firebase-heartbeat-store";let gd=null;function qE(){return gd||(gd=CR(gC,yC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Za)}catch(n){console.warn(n)}}}}).catch(t=>{throw yn.create("idb-open",{originalErrorMessage:t.message})})),gd}async function _C(t){try{const n=(await qE()).transaction(Za),r=await n.objectStore(Za).get(WE(t));return await n.done,r}catch(e){if(e instanceof Zi)zi.warn(e.message);else{const n=yn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zi.warn(n.message)}}}async function S_(t,e){try{const r=(await qE()).transaction(Za,"readwrite");await r.objectStore(Za).put(e,WE(t)),await r.done}catch(n){if(n instanceof Zi)zi.warn(n.message);else{const r=yn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zi.warn(r.message)}}}function WE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=1024,wC=30*24*60*60*1e3;class EC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=A_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=wC}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A_(),{heartbeatsToSend:r,unsentEntries:i}=IC(this._heartbeatsCache.heartbeats),s=pc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function A_(){return new Date().toISOString().substring(0,10)}function IC(t,e=vC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),b_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),b_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DE()?aR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _C(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return S_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return S_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function b_(t){return pc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){to(new Ui("platform-logger",e=>new DR(e),"PRIVATE")),to(new Ui("heartbeat",e=>new EC(e),"PRIVATE")),Zn(yc,If,t),Zn(yc,If,"esm2017"),Zn("fire-js","")}SC("");const AC=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Zi,SDK_VERSION:Xp,_DEFAULT_ENTRY_NAME:qr,_addComponent:Xa,_addOrOverwriteComponent:LE,_apps:Wr,_clearComponents:cC,_components:eo,_getProvider:BE,_isFirebaseApp:UE,_isFirebaseServerApp:uC,_registerComponent:to,_removeServiceInstance:lC,_serverApps:Zs,deleteApp:em,getApp:pC,getApps:mC,initializeApp:Zp,initializeServerApp:fC,onLog:jE,registerVersion:Zn,setLogLevel:$E},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this._delegate=e,this.firebase=n,Xa(e,new Ui("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),em(this._delegate)))}_getService(e,n=qr){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=qr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Xa(this._delegate,e)}_addOrOverwriteComponent(e){LE(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},x_=new Zc("app-compat","Firebase",xC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Zn,setLogLevel:$E,onLog:jE,apps:null,SDK_VERSION:Xp,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:AC}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||qr,!v_(e,c))throw x_.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,d={}){const f=Zp(c,d);if(v_(e,f.name))return e[f.name];const p=new t(f,n);return e[f.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,f=d.replace("-compat","");if(to(c)&&c.type==="PUBLIC"){const p=(g=i())=>{if(typeof g[f]!="function")throw x_.create("invalid-app-argument",{appName:d});return g[f]()};c.serviceProps!==void 0&&mc(p,c.serviceProps),n[f]=p,t.prototype[f]=function(...g){return this._getService.bind(this,d).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?n[f]:null}function u(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){const t=PC(bC);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:GE,extendNamespace:e,createSubscribe:hR,ErrorFactory:Zc,deepExtend:mc});function e(n){mc(t,n)}return t}const RC=GE();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=new Yp("@firebase/app-compat"),CC="@firebase/app-compat",kC="0.2.38";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t){Zn(CC,kC,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(CE()&&window.firebase!==void 0){P_.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=window.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&P_.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const eh=RC;VC();var DC="firebase",NC="10.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */eh.registerVersion(DC,NC,"app-compat");var R_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,KE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,v){function b(){}b.prototype=v.prototype,A.D=v.prototype,A.prototype=new b,A.prototype.constructor=A,A.C=function(P,R,C){for(var x=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)x[ze-2]=arguments[ze];return v.prototype[R].apply(P,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,v,b){b||(b=0);var P=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)P[R]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(R=0;16>R;++R)P[R]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=A.g[0],b=A.g[1],R=A.g[2];var C=A.g[3],x=v+(C^b&(R^C))+P[0]+3614090360&4294967295;v=b+(x<<7&4294967295|x>>>25),x=C+(R^v&(b^R))+P[1]+3905402710&4294967295,C=v+(x<<12&4294967295|x>>>20),x=R+(b^C&(v^b))+P[2]+606105819&4294967295,R=C+(x<<17&4294967295|x>>>15),x=b+(v^R&(C^v))+P[3]+3250441966&4294967295,b=R+(x<<22&4294967295|x>>>10),x=v+(C^b&(R^C))+P[4]+4118548399&4294967295,v=b+(x<<7&4294967295|x>>>25),x=C+(R^v&(b^R))+P[5]+1200080426&4294967295,C=v+(x<<12&4294967295|x>>>20),x=R+(b^C&(v^b))+P[6]+2821735955&4294967295,R=C+(x<<17&4294967295|x>>>15),x=b+(v^R&(C^v))+P[7]+4249261313&4294967295,b=R+(x<<22&4294967295|x>>>10),x=v+(C^b&(R^C))+P[8]+1770035416&4294967295,v=b+(x<<7&4294967295|x>>>25),x=C+(R^v&(b^R))+P[9]+2336552879&4294967295,C=v+(x<<12&4294967295|x>>>20),x=R+(b^C&(v^b))+P[10]+4294925233&4294967295,R=C+(x<<17&4294967295|x>>>15),x=b+(v^R&(C^v))+P[11]+2304563134&4294967295,b=R+(x<<22&4294967295|x>>>10),x=v+(C^b&(R^C))+P[12]+1804603682&4294967295,v=b+(x<<7&4294967295|x>>>25),x=C+(R^v&(b^R))+P[13]+4254626195&4294967295,C=v+(x<<12&4294967295|x>>>20),x=R+(b^C&(v^b))+P[14]+2792965006&4294967295,R=C+(x<<17&4294967295|x>>>15),x=b+(v^R&(C^v))+P[15]+1236535329&4294967295,b=R+(x<<22&4294967295|x>>>10),x=v+(R^C&(b^R))+P[1]+4129170786&4294967295,v=b+(x<<5&4294967295|x>>>27),x=C+(b^R&(v^b))+P[6]+3225465664&4294967295,C=v+(x<<9&4294967295|x>>>23),x=R+(v^b&(C^v))+P[11]+643717713&4294967295,R=C+(x<<14&4294967295|x>>>18),x=b+(C^v&(R^C))+P[0]+3921069994&4294967295,b=R+(x<<20&4294967295|x>>>12),x=v+(R^C&(b^R))+P[5]+3593408605&4294967295,v=b+(x<<5&4294967295|x>>>27),x=C+(b^R&(v^b))+P[10]+38016083&4294967295,C=v+(x<<9&4294967295|x>>>23),x=R+(v^b&(C^v))+P[15]+3634488961&4294967295,R=C+(x<<14&4294967295|x>>>18),x=b+(C^v&(R^C))+P[4]+3889429448&4294967295,b=R+(x<<20&4294967295|x>>>12),x=v+(R^C&(b^R))+P[9]+568446438&4294967295,v=b+(x<<5&4294967295|x>>>27),x=C+(b^R&(v^b))+P[14]+3275163606&4294967295,C=v+(x<<9&4294967295|x>>>23),x=R+(v^b&(C^v))+P[3]+4107603335&4294967295,R=C+(x<<14&4294967295|x>>>18),x=b+(C^v&(R^C))+P[8]+1163531501&4294967295,b=R+(x<<20&4294967295|x>>>12),x=v+(R^C&(b^R))+P[13]+2850285829&4294967295,v=b+(x<<5&4294967295|x>>>27),x=C+(b^R&(v^b))+P[2]+4243563512&4294967295,C=v+(x<<9&4294967295|x>>>23),x=R+(v^b&(C^v))+P[7]+1735328473&4294967295,R=C+(x<<14&4294967295|x>>>18),x=b+(C^v&(R^C))+P[12]+2368359562&4294967295,b=R+(x<<20&4294967295|x>>>12),x=v+(b^R^C)+P[5]+4294588738&4294967295,v=b+(x<<4&4294967295|x>>>28),x=C+(v^b^R)+P[8]+2272392833&4294967295,C=v+(x<<11&4294967295|x>>>21),x=R+(C^v^b)+P[11]+1839030562&4294967295,R=C+(x<<16&4294967295|x>>>16),x=b+(R^C^v)+P[14]+4259657740&4294967295,b=R+(x<<23&4294967295|x>>>9),x=v+(b^R^C)+P[1]+2763975236&4294967295,v=b+(x<<4&4294967295|x>>>28),x=C+(v^b^R)+P[4]+1272893353&4294967295,C=v+(x<<11&4294967295|x>>>21),x=R+(C^v^b)+P[7]+4139469664&4294967295,R=C+(x<<16&4294967295|x>>>16),x=b+(R^C^v)+P[10]+3200236656&4294967295,b=R+(x<<23&4294967295|x>>>9),x=v+(b^R^C)+P[13]+681279174&4294967295,v=b+(x<<4&4294967295|x>>>28),x=C+(v^b^R)+P[0]+3936430074&4294967295,C=v+(x<<11&4294967295|x>>>21),x=R+(C^v^b)+P[3]+3572445317&4294967295,R=C+(x<<16&4294967295|x>>>16),x=b+(R^C^v)+P[6]+76029189&4294967295,b=R+(x<<23&4294967295|x>>>9),x=v+(b^R^C)+P[9]+3654602809&4294967295,v=b+(x<<4&4294967295|x>>>28),x=C+(v^b^R)+P[12]+3873151461&4294967295,C=v+(x<<11&4294967295|x>>>21),x=R+(C^v^b)+P[15]+530742520&4294967295,R=C+(x<<16&4294967295|x>>>16),x=b+(R^C^v)+P[2]+3299628645&4294967295,b=R+(x<<23&4294967295|x>>>9),x=v+(R^(b|~C))+P[0]+4096336452&4294967295,v=b+(x<<6&4294967295|x>>>26),x=C+(b^(v|~R))+P[7]+1126891415&4294967295,C=v+(x<<10&4294967295|x>>>22),x=R+(v^(C|~b))+P[14]+2878612391&4294967295,R=C+(x<<15&4294967295|x>>>17),x=b+(C^(R|~v))+P[5]+4237533241&4294967295,b=R+(x<<21&4294967295|x>>>11),x=v+(R^(b|~C))+P[12]+1700485571&4294967295,v=b+(x<<6&4294967295|x>>>26),x=C+(b^(v|~R))+P[3]+2399980690&4294967295,C=v+(x<<10&4294967295|x>>>22),x=R+(v^(C|~b))+P[10]+4293915773&4294967295,R=C+(x<<15&4294967295|x>>>17),x=b+(C^(R|~v))+P[1]+2240044497&4294967295,b=R+(x<<21&4294967295|x>>>11),x=v+(R^(b|~C))+P[8]+1873313359&4294967295,v=b+(x<<6&4294967295|x>>>26),x=C+(b^(v|~R))+P[15]+4264355552&4294967295,C=v+(x<<10&4294967295|x>>>22),x=R+(v^(C|~b))+P[6]+2734768916&4294967295,R=C+(x<<15&4294967295|x>>>17),x=b+(C^(R|~v))+P[13]+1309151649&4294967295,b=R+(x<<21&4294967295|x>>>11),x=v+(R^(b|~C))+P[4]+4149444226&4294967295,v=b+(x<<6&4294967295|x>>>26),x=C+(b^(v|~R))+P[11]+3174756917&4294967295,C=v+(x<<10&4294967295|x>>>22),x=R+(v^(C|~b))+P[2]+718787259&4294967295,R=C+(x<<15&4294967295|x>>>17),x=b+(C^(R|~v))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+v&4294967295,A.g[1]=A.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+C&4294967295}r.prototype.u=function(A,v){v===void 0&&(v=A.length);for(var b=v-this.blockSize,P=this.B,R=this.h,C=0;C<v;){if(R==0)for(;C<=b;)i(this,A,C),C+=this.blockSize;if(typeof A=="string"){for(;C<v;)if(P[R++]=A.charCodeAt(C++),R==this.blockSize){i(this,P),R=0;break}}else for(;C<v;)if(P[R++]=A[C++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var v=1;v<A.length-8;++v)A[v]=0;var b=8*this.o;for(v=A.length-8;v<A.length;++v)A[v]=b&255,b/=256;for(this.u(A),A=Array(16),v=b=0;4>v;++v)for(var P=0;32>P;P+=8)A[b++]=this.g[v]>>>P&255;return A};function s(A,v){var b=a;return Object.prototype.hasOwnProperty.call(b,A)?b[A]:b[A]=v(A)}function o(A,v){this.h=v;for(var b=[],P=!0,R=A.length-1;0<=R;R--){var C=A[R]|0;P&&C==v||(b[R]=C,P=!1)}this.g=b}var a={};function u(A){return-128<=A&&128>A?s(A,function(v){return new o([v|0],0>v?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return T(c(-A));for(var v=[],b=1,P=0;A>=b;P++)v[P]=A/b|0,b*=4294967296;return new o(v,0)}function d(A,v){if(A.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(A.charAt(0)=="-")return T(d(A.substring(1),v));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(v,8)),P=f,R=0;R<A.length;R+=8){var C=Math.min(8,A.length-R),x=parseInt(A.substring(R,R+C),v);8>C?(C=c(Math.pow(v,C)),P=P.j(C).add(c(x))):(P=P.j(b),P=P.add(c(x)))}return P}var f=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(w(this))return-T(this).m();for(var A=0,v=1,b=0;b<this.g.length;b++){var P=this.i(b);A+=(0<=P?P:4294967296+P)*v,v*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(w(this))return"-"+T(this).toString(A);for(var v=c(Math.pow(A,6)),b=this,P="";;){var R=k(b,v).g;b=S(b,R.j(v));var C=((0<b.g.length?b.g[0]:b.h)>>>0).toString(A);if(b=R,_(b))return C+P;for(;6>C.length;)C="0"+C;P=C+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(var v=0;v<A.g.length;v++)if(A.g[v]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=S(this,A),w(A)?-1:_(A)?0:1};function T(A){for(var v=A.g.length,b=[],P=0;P<v;P++)b[P]=~A.g[P];return new o(b,~A.h).add(p)}t.abs=function(){return w(this)?T(this):this},t.add=function(A){for(var v=Math.max(this.g.length,A.g.length),b=[],P=0,R=0;R<=v;R++){var C=P+(this.i(R)&65535)+(A.i(R)&65535),x=(C>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);P=x>>>16,C&=65535,x&=65535,b[R]=x<<16|C}return new o(b,b[b.length-1]&-2147483648?-1:0)};function S(A,v){return A.add(T(v))}t.j=function(A){if(_(this)||_(A))return f;if(w(this))return w(A)?T(this).j(T(A)):T(T(this).j(A));if(w(A))return T(this.j(T(A)));if(0>this.l(g)&&0>A.l(g))return c(this.m()*A.m());for(var v=this.g.length+A.g.length,b=[],P=0;P<2*v;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<A.g.length;R++){var C=this.i(P)>>>16,x=this.i(P)&65535,ze=A.i(R)>>>16,un=A.i(R)&65535;b[2*P+2*R]+=x*un,E(b,2*P+2*R),b[2*P+2*R+1]+=C*un,E(b,2*P+2*R+1),b[2*P+2*R+1]+=x*ze,E(b,2*P+2*R+1),b[2*P+2*R+2]+=C*ze,E(b,2*P+2*R+2)}for(P=0;P<v;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=v;P<2*v;P++)b[P]=0;return new o(b,0)};function E(A,v){for(;(A[v]&65535)!=A[v];)A[v+1]+=A[v]>>>16,A[v]&=65535,v++}function I(A,v){this.g=A,this.h=v}function k(A,v){if(_(v))throw Error("division by zero");if(_(A))return new I(f,f);if(w(A))return v=k(T(A),v),new I(T(v.g),T(v.h));if(w(v))return v=k(A,T(v)),new I(T(v.g),v.h);if(30<A.g.length){if(w(A)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var b=p,P=v;0>=P.l(A);)b=M(b),P=M(P);var R=B(b,1),C=B(P,1);for(P=B(P,2),b=B(b,2);!_(P);){var x=C.add(P);0>=x.l(A)&&(R=R.add(b),C=x),P=B(P,1),b=B(b,1)}return v=S(A,R.j(v)),new I(R,v)}for(R=f;0<=A.l(v);){for(b=Math.max(1,Math.floor(A.m()/v.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),C=c(b),x=C.j(v);w(x)||0<x.l(A);)b-=P,C=c(b),x=C.j(v);_(C)&&(C=p),R=R.add(C),A=S(A,x)}return new I(R,A)}t.A=function(A){return k(this,A).h},t.and=function(A){for(var v=Math.max(this.g.length,A.g.length),b=[],P=0;P<v;P++)b[P]=this.i(P)&A.i(P);return new o(b,this.h&A.h)},t.or=function(A){for(var v=Math.max(this.g.length,A.g.length),b=[],P=0;P<v;P++)b[P]=this.i(P)|A.i(P);return new o(b,this.h|A.h)},t.xor=function(A){for(var v=Math.max(this.g.length,A.g.length),b=[],P=0;P<v;P++)b[P]=this.i(P)^A.i(P);return new o(b,this.h^A.h)};function M(A){for(var v=A.g.length+1,b=[],P=0;P<v;P++)b[P]=A.i(P)<<1|A.i(P-1)>>>31;return new o(b,A.h)}function B(A,v){var b=v>>5;v%=32;for(var P=A.g.length-b,R=[],C=0;C<P;C++)R[C]=0<v?A.i(C+b)>>>v|A.i(C+b+1)<<32-v:A.i(C+b);return new o(R,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ni=o}).apply(typeof R_<"u"?R_:typeof self<"u"?self:typeof window<"u"?window:{});var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QE,HE,da,YE,Du,Tf,JE,XE,ZE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof pu=="object"&&pu];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var V=l[y];if(!(V in m))break e;m=m[V]}l=l[l.length-1],y=m[l],h=h(y),h!=y&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var m=0,y=!1,V={next:function(){if(!y&&m<l.length){var O=m++;return{value:h(O,l[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,m){return l.call.apply(l.bind,arguments)}function f(l,h,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,y),l.apply(h,V)}}return function(){return l.apply(h,arguments)}}function p(l,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function g(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,V,O){for(var z=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)z[Te-2]=arguments[Te];return h.prototype[V].apply(y,z)}}function w(l){const h=l.length;if(0<h){const m=Array(h);for(let y=0;y<h;y++)m[y]=l[y];return m}return[]}function T(l,h){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(u(y)){const V=l.length||0,O=y.length||0;l.length=V+O;for(let z=0;z<O;z++)l[V+z]=y[z]}else l.push(y)}}class S{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function k(l){return k[" "](l),l}k[" "]=function(){};var M=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function B(l,h,m){for(const y in l)h.call(m,l[y],y,l)}function A(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function v(l){const h={};for(const m in l)h[m]=l[m];return h}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,h){let m,y;for(let V=1;V<arguments.length;V++){y=arguments[V];for(m in y)l[m]=y[m];for(let O=0;O<b.length;O++)m=b[O],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function C(l){a.setTimeout(()=>{throw l},0)}function x(){var l=X;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ze{constructor(){this.h=this.g=null}add(h,m){const y=un.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var un=new S(()=>new bt,l=>l.reset());class bt{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,$=!1,X=new ze,ee=()=>{const l=a.Promise.resolve(void 0);ut=()=>{l.then(ge)}};var ge=()=>{for(var l;l=x();){try{l.h.call(l.g)}catch(m){C(m)}var h=un;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var cn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return l}();function Ft(l,h){if(Se.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(M){e:{try{k(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Qt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ft.aa.h.call(this)}}_(Ft,Se);var Qt={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ht="closure_listenable_"+(1e6*Math.random()|0),Dl=0;function Nl(l,h,m,y,V){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=V,this.key=++Dl,this.da=this.fa=!1}function ui(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ss(l){this.src=l,this.g={},this.h=0}ss.prototype.add=function(l,h,m,y,V){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var z=os(l,h,y,V);return-1<z?(h=l[z],m||(h.fa=!1)):(h=new Nl(h,this.src,O,!!y,V),h.fa=m,l.push(h)),h};function cr(l,h){var m=h.type;if(m in l.g){var y=l.g[m],V=Array.prototype.indexOf.call(y,h,void 0),O;(O=0<=V)&&Array.prototype.splice.call(y,V,1),O&&(ui(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function os(l,h,m,y){for(var V=0;V<l.length;++V){var O=l[V];if(!O.da&&O.listener==h&&O.capture==!!m&&O.ha==y)return V}return-1}var $n="closure_lm_"+(1e6*Math.random()|0),ko={};function as(l,h,m,y,V){if(Array.isArray(h)){for(var O=0;O<h.length;O++)as(l,h[O],m,y,V);return null}return m=le(m),l&&l[Ht]?l.K(h,m,c(y)?!!y.capture:!!y,V):ci(l,h,m,!1,y,V)}function ci(l,h,m,y,V,O){if(!h)throw Error("Invalid event type");var z=c(V)?!!V.capture:!!V,Te=Cn(l);if(Te||(l[$n]=Te=new ss(l)),m=Te.add(h,m,y,z,O),m.proxy)return m;if(y=Vo(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)cn||(V=z),V===void 0&&(V=!1),l.addEventListener(h.toString(),y,V);else if(l.attachEvent)l.attachEvent(Do(h.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Vo(){function l(m){return h.call(l.src,l.listener,m)}const h=Yt;return l}function Ol(l,h,m,y,V){if(Array.isArray(h))for(var O=0;O<h.length;O++)Ol(l,h[O],m,y,V);else y=c(y)?!!y.capture:!!y,m=le(m),l&&l[Ht]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],m=os(O,m,y,V),-1<m&&(ui(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Cn(l))&&(h=l.g[h.toString()],l=-1,h&&(l=os(h,m,y,V)),(m=-1<l?h[l]:null)&&ls(m))}function ls(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Ht])cr(h.i,l);else{var m=l.type,y=l.proxy;h.removeEventListener?h.removeEventListener(m,y,l.capture):h.detachEvent?h.detachEvent(Do(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=Cn(h))?(cr(m,l),m.h==0&&(m.src=null,h[$n]=null)):ui(l)}}}function Do(l){return l in ko?ko[l]:ko[l]="on"+l}function Yt(l,h){if(l.da)l=!0;else{h=new Ft(h,this);var m=l.listener,y=l.ha||l.src;l.fa&&ls(l),l=m.call(y,h)}return l}function Cn(l){return l=l[$n],l instanceof ss?l:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(l){return typeof l=="function"?l:(l[hr]||(l[hr]=function(h){return l.handleEvent(h)}),l[hr])}function te(){ae.call(this),this.i=new ss(this),this.M=this,this.F=null}_(te,ae),te.prototype[Ht]=!0,te.prototype.removeEventListener=function(l,h,m,y){Ol(this,l,h,m,y)};function Y(l,h){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=h.type||h,typeof h=="string")h=new Se(h,l);else if(h instanceof Se)h.target=h.target||l;else{var V=h;h=new Se(y,l),P(h,V)}if(V=!0,m)for(var O=m.length-1;0<=O;O--){var z=h.g=m[O];V=ve(z,y,!0,h)&&V}if(z=h.g=l,V=ve(z,y,!0,h)&&V,V=ve(z,y,!1,h)&&V,m)for(O=0;O<m.length;O++)z=h.g=m[O],V=ve(z,y,!1,h)&&V}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],y=0;y<m.length;y++)ui(m[y]);delete l.g[h],l.h--}}this.F=null},te.prototype.K=function(l,h,m,y){return this.i.add(String(l),h,!1,m,y)},te.prototype.L=function(l,h,m,y){return this.i.add(String(l),h,!0,m,y)};function ve(l,h,m,y){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,O=0;O<h.length;++O){var z=h[O];if(z&&!z.da&&z.capture==m){var Te=z.listener,ct=z.ha||z.src;z.fa&&cr(l.i,z),V=Te.call(ct,y)!==!1&&V}}return V&&!y.defaultPrevented}function hn(l,h,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function Jt(l){l.g=hn(()=>{l.g=null,l.i&&(l.i=!1,Jt(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class ye extends ae{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Jt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(l){ae.call(this),this.h=l,this.g={}}_(Z,ae);var Xt=[];function us(l){B(l.g,function(h,m){this.g.hasOwnProperty(m)&&ls(h)},l),l.g={}}Z.prototype.N=function(){Z.aa.N.call(this),us(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=a.JSON.stringify,_S=a.JSON.parse,vS=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Sh(){}Sh.prototype.h=null;function og(l){return l.h||(l.h=l.i())}function ag(){}var No={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ah(){Se.call(this,"d")}_(Ah,Se);function bh(){Se.call(this,"c")}_(bh,Se);var hi={},lg=null;function Ml(){return lg=lg||new te}hi.La="serverreachability";function ug(l){Se.call(this,hi.La,l)}_(ug,Se);function Oo(l){const h=Ml();Y(h,new ug(h))}hi.STAT_EVENT="statevent";function cg(l,h){Se.call(this,hi.STAT_EVENT,l),this.stat=h}_(cg,Se);function xt(l){const h=Ml();Y(h,new cg(h,l))}hi.Ma="timingevent";function hg(l,h){Se.call(this,hi.Ma,l),this.size=h}_(hg,Se);function Mo(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Fo(){this.g=!0}Fo.prototype.xa=function(){this.g=!1};function wS(l,h,m,y,V,O){l.info(function(){if(l.g)if(O)for(var z="",Te=O.split("&"),ct=0;ct<Te.length;ct++){var _e=Te[ct].split("=");if(1<_e.length){var gt=_e[0];_e=_e[1];var yt=gt.split("_");z=2<=yt.length&&yt[1]=="type"?z+(gt+"="+_e+"&"):z+(gt+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+y+") [attempt "+V+"]: "+h+`
`+m+`
`+z})}function ES(l,h,m,y,V,O,z){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+V+"]: "+h+`
`+m+`
`+O+" "+z})}function hs(l,h,m,y){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+TS(l,m)+(y?" "+y:"")})}function IS(l,h){l.info(function(){return"TIMEOUT: "+h})}Fo.prototype.info=function(){};function TS(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var V=y[1];if(Array.isArray(V)&&!(1>V.length)){var O=V[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<V.length;z++)V[z]=""}}}}return cs(m)}catch{return h}}var Fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xh;function Ll(){}_(Ll,Sh),Ll.prototype.g=function(){return new XMLHttpRequest},Ll.prototype.i=function(){return{}},xh=new Ll;function dr(l,h,m,y){this.j=l,this.i=h,this.l=m,this.R=y||1,this.U=new Z(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fg}function fg(){this.i=null,this.g="",this.h=!1}var pg={},Ph={};function Rh(l,h,m){l.L=1,l.v=jl(qn(h)),l.m=m,l.P=!0,mg(l,null)}function mg(l,h){l.F=Date.now(),Bl(l),l.A=qn(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),Rg(m.i,"t",y),l.C=0,m=l.j.J,l.h=new fg,l.g=Kg(l.j,m?h:null,!l.m),0<l.O&&(l.M=new ye(p(l.Y,l,l.g),l.O)),h=l.U,m=l.g,y=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(Xt[0]=V.toString()),V=Xt);for(var O=0;O<V.length;O++){var z=as(m,V[O],y||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Oo(),wS(l.i,l.u,l.A,l.l,l.R,l.m)}dr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Wn(l)==3?h.j():this.Y(l)},dr.prototype.Y=function(l){try{if(l==this.g)e:{const yt=Wn(this.g);var h=this.g.Ba();const ps=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Mg(this.g)))){this.J||yt!=4||h==7||(h==8||0>=ps?Oo(3):Oo(2)),Ch(this);var m=this.g.Z();this.X=m;t:if(gg(this)){var y=Mg(this.g);l="";var V=y.length,O=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),Lo(this);var z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,l+=this.h.i.decode(y[h],{stream:!(O&&h==V-1)});y.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,ES(this.i,this.u,this.A,this.l,this.R,yt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ct=this.g;if((Te=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Te)){var _e=Te;break t}}_e=null}if(m=_e)hs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kh(this,m);else{this.o=!1,this.s=3,xt(12),di(this),Lo(this);break e}}if(this.P){m=!0;let En;for(;!this.J&&this.C<z.length;)if(En=SS(this,z),En==Ph){yt==4&&(this.s=4,xt(14),m=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(En==pg){this.s=4,xt(15),hs(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else hs(this.i,this.l,En,null),kh(this,En);if(gg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||z.length!=0||this.h.h||(this.s=1,xt(16),m=!1),this.o=this.o&&m,!m)hs(this.i,this.l,z,"[Invalid Chunked Response]"),di(this),Lo(this);else if(0<z.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Fh(gt),gt.M=!0,xt(11))}}else hs(this.i,this.l,z,null),kh(this,z);yt==4&&di(this),this.o&&!this.J&&(yt==4?$g(this.j,this):(this.o=!1,Bl(this)))}else zS(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),di(this),Lo(this)}}}catch{}finally{}};function gg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function SS(l,h){var m=l.C,y=h.indexOf(`
`,m);return y==-1?Ph:(m=Number(h.substring(m,y)),isNaN(m)?pg:(y+=1,y+m>h.length?Ph:(h=h.slice(y,y+m),l.C=y+m,h)))}dr.prototype.cancel=function(){this.J=!0,di(this)};function Bl(l){l.S=Date.now()+l.I,yg(l,l.I)}function yg(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Mo(p(l.ba,l),h)}function Ch(l){l.B&&(a.clearTimeout(l.B),l.B=null)}dr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(IS(this.i,this.A),this.L!=2&&(Oo(),xt(17)),di(this),this.s=2,Lo(this)):yg(this,this.S-l)};function Lo(l){l.j.G==0||l.J||$g(l.j,l)}function di(l){Ch(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,us(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function kh(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Vh(m.h,l))){if(!l.K&&Vh(m.h,l)&&m.G==3){try{var y=m.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var V=y;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Kl(m),Wl(m);else break e;Mh(m),xt(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=Mo(p(m.Za,m),6e3));if(1>=wg(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else pi(m,11)}else if((l.K||m.g==l)&&Kl(m),!E(h))for(V=m.Da.g.parse(h),h=0;h<V.length;h++){let _e=V[h];if(m.T=_e[0],_e=_e[1],m.G==2)if(_e[0]=="c"){m.K=_e[1],m.ia=_e[2];const gt=_e[3];gt!=null&&(m.la=gt,m.j.info("VER="+m.la));const yt=_e[4];yt!=null&&(m.Aa=yt,m.j.info("SVER="+m.Aa));const ps=_e[5];ps!=null&&typeof ps=="number"&&0<ps&&(y=1.5*ps,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const En=l.g;if(En){const Hl=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hl){var O=y.h;O.g||Hl.indexOf("spdy")==-1&&Hl.indexOf("quic")==-1&&Hl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Dh(O,O.h),O.h=null))}if(y.D){const Lh=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Lh&&(y.ya=Lh,Pe(y.I,y.D,Lh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var z=l;if(y.qa=Gg(y,y.J?y.ia:null,y.W),z.K){Eg(y.h,z);var Te=z,ct=y.L;ct&&(Te.I=ct),Te.B&&(Ch(Te),Bl(Te)),y.g=z}else zg(y);0<m.i.length&&Gl(m)}else _e[0]!="stop"&&_e[0]!="close"||pi(m,7);else m.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?pi(m,7):Oh(m):_e[0]!="noop"&&m.l&&m.l.ta(_e),m.v=0)}}Oo(4)}catch{}}var AS=class{constructor(l,h){this.g=l,this.map=h}};function _g(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function wg(l){return l.h?1:l.g?l.g.size:0}function Vh(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Dh(l,h){l.g?l.g.add(h):l.h=h}function Eg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}_g.prototype.cancel=function(){if(this.i=Ig(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ig(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return w(l.i)}function bS(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],m=l.length,y=0;y<m;y++)h.push(l[y]);return h}h=[],m=0;for(y in l)h[m++]=l[y];return h}function xS(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const y in l)h[m++]=y;return h}}}function Tg(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=xS(l),y=bS(l),V=y.length,O=0;O<V;O++)h.call(void 0,y[O],m&&m[O],l)}var Sg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PS(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),V=null;if(0<=y){var O=l[m].substring(0,y);V=l[m].substring(y+1)}else O=l[m];h(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function fi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof fi){this.h=l.h,Ul(this,l.j),this.o=l.o,this.g=l.g,zl(this,l.s),this.l=l.l;var h=l.i,m=new zo;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Ag(this,m),this.m=l.m}else l&&(h=String(l).match(Sg))?(this.h=!1,Ul(this,h[1]||"",!0),this.o=Bo(h[2]||""),this.g=Bo(h[3]||"",!0),zl(this,h[4]),this.l=Bo(h[5]||"",!0),Ag(this,h[6]||"",!0),this.m=Bo(h[7]||"")):(this.h=!1,this.i=new zo(null,this.h))}fi.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Uo(h,bg,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Uo(h,bg,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Uo(m,m.charAt(0)=="/"?kS:CS,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Uo(m,DS)),l.join("")};function qn(l){return new fi(l)}function Ul(l,h,m){l.j=m?Bo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function zl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Ag(l,h,m){h instanceof zo?(l.i=h,NS(l.i,l.h)):(m||(h=Uo(h,VS)),l.i=new zo(h,l.h))}function Pe(l,h,m){l.i.set(h,m)}function jl(l){return Pe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Bo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Uo(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,RS),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function RS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var bg=/[#\/\?@]/g,CS=/[#\?:]/g,kS=/[#\?]/g,VS=/[#\?@]/g,DS=/#/g;function zo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function fr(l){l.g||(l.g=new Map,l.h=0,l.i&&PS(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=zo.prototype,t.add=function(l,h){fr(this),this.i=null,l=ds(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function xg(l,h){fr(l),h=ds(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Pg(l,h){return fr(l),h=ds(l,h),l.g.has(h)}t.forEach=function(l,h){fr(this),this.g.forEach(function(m,y){m.forEach(function(V){l.call(h,V,y,this)},this)},this)},t.na=function(){fr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let y=0;y<h.length;y++){const V=l[y];for(let O=0;O<V.length;O++)m.push(h[y])}return m},t.V=function(l){fr(this);let h=[];if(typeof l=="string")Pg(this,l)&&(h=h.concat(this.g.get(ds(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return fr(this),this.i=null,l=ds(this,l),Pg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Rg(l,h,m){xg(l,h),0<m.length&&(l.i=null,l.g.set(ds(l,h),w(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var y=h[m];const O=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var V=O;z[y]!==""&&(V+="="+encodeURIComponent(String(z[y]))),l.push(V)}}return this.i=l.join("&")};function ds(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function NS(l,h){h&&!l.j&&(fr(l),l.i=null,l.g.forEach(function(m,y){var V=y.toLowerCase();y!=V&&(xg(this,y),Rg(this,V,m))},l)),l.j=h}function OS(l,h){const m=new Fo;if(a.Image){const y=new Image;y.onload=g(pr,m,"TestLoadImage: loaded",!0,h,y),y.onerror=g(pr,m,"TestLoadImage: error",!1,h,y),y.onabort=g(pr,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=g(pr,m,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else h(!1)}function MS(l,h){const m=new Fo,y=new AbortController,V=setTimeout(()=>{y.abort(),pr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:y.signal}).then(O=>{clearTimeout(V),O.ok?pr(m,"TestPingServer: ok",!0,h):pr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),pr(m,"TestPingServer: error",!1,h)})}function pr(l,h,m,y,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),y(m)}catch{}}function FS(){this.g=new vS}function LS(l,h,m){const y=m||"";try{Tg(l,function(V,O){let z=V;c(V)&&(z=cs(V)),h.push(y+O+"="+encodeURIComponent(z))})}catch(V){throw h.push(y+"type="+encodeURIComponent("_badmap")),V}}function jo(l){this.l=l.Ub||null,this.j=l.eb||!1}_(jo,Sh),jo.prototype.g=function(){return new $l(this.l,this.j)},jo.prototype.i=function(l){return function(){return l}}({});function $l(l,h){te.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_($l,te),t=$l.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,qo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,qo(this)),this.g&&(this.readyState=3,qo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?$o(this):qo(this),this.readyState==3&&Cg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,$o(this))},t.Qa=function(l){this.g&&(this.response=l,$o(this))},t.ga=function(){this.g&&$o(this)};function $o(l){l.readyState=4,l.l=null,l.j=null,l.v=null,qo(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function qo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty($l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function kg(l){let h="";return B(l,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function Nh(l,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=kg(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Pe(l,h,m))}function je(l){te.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(je,te);var BS=/^https?$/i,US=["POST","PUT"];t=je.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xh.g(),this.v=this.o?og(this.o):og(xh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){Vg(this,O);return}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var V in y)m.set(V,y[V]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())m.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(US,h,void 0))||y||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of m)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Og(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){Vg(this,O)}};function Vg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Dg(l),ql(l)}function Dg(l){l.A||(l.A=!0,Y(l,"complete"),Y(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Y(this,"complete"),Y(this,"abort"),ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ql(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ng(this):this.bb())},t.bb=function(){Ng(this)};function Ng(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Wn(l)!=4||l.Z()!=2)){if(l.u&&Wn(l)==4)hn(l.Ea,0,l);else if(Y(l,"readystatechange"),Wn(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=z===0){var V=String(l.D).match(Sg)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),y=!BS.test(V?V.toLowerCase():"")}m=y}if(m)Y(l,"complete"),Y(l,"success");else{l.m=6;try{var O=2<Wn(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",Dg(l)}}finally{ql(l)}}}}function ql(l,h){if(l.g){Og(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Y(l,"ready");try{m.onreadystatechange=y}catch{}}}function Og(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Wn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),_S(h)}};function Mg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function zS(l){const h={};l=(l.g&&2<=Wn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(E(l[y]))continue;var m=R(l[y]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=h[V]||[];h[V]=O,O.push(m)}A(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wo(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function Fg(l){this.Aa=0,this.i=[],this.j=new Fo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wo("baseRetryDelayMs",5e3,l),this.cb=Wo("retryDelaySeedMs",1e4,l),this.Wa=Wo("forwardChannelMaxRetries",2,l),this.wa=Wo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new _g(l&&l.concurrentRequestLimit),this.Da=new FS,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fg.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,y){xt(0),this.W=l,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Gg(this,null,this.W),Gl(this)};function Oh(l){if(Lg(l),l.G==3){var h=l.U++,m=qn(l.I);if(Pe(m,"SID",l.K),Pe(m,"RID",h),Pe(m,"TYPE","terminate"),Go(l,m),h=new dr(l,l.j,h),h.L=2,h.v=jl(qn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=Kg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Bl(h)}Wg(l)}function Wl(l){l.g&&(Fh(l),l.g.cancel(),l.g=null)}function Lg(l){Wl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Kl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Gl(l){if(!vg(l.h)&&!l.s){l.s=!0;var h=l.Ga;ut||ee(),$||(ut(),$=!0),X.add(h,l),l.B=0}}function jS(l,h){return wg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Mo(p(l.Ga,l,h),qg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new dr(this,this.j,l);let O=this.o;if(this.S&&(O?(O=v(O),P(O,this.S)):O=this.S),this.m!==null||this.O||(V.H=O,O=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Ug(this,V,h),m=qn(this.I),Pe(m,"RID",l),Pe(m,"CVER",22),this.D&&Pe(m,"X-HTTP-Session-Id",this.D),Go(this,m),O&&(this.O?h="headers="+encodeURIComponent(String(kg(O)))+"&"+h:this.m&&Nh(m,this.m,O)),Dh(this.h,V),this.Ua&&Pe(m,"TYPE","init"),this.P?(Pe(m,"$req",h),Pe(m,"SID","null"),V.T=!0,Rh(V,m,null)):Rh(V,m,h),this.G=2}}else this.G==3&&(l?Bg(this,l):this.i.length==0||vg(this.h)||Bg(this))};function Bg(l,h){var m;h?m=h.l:m=l.U++;const y=qn(l.I);Pe(y,"SID",l.K),Pe(y,"RID",m),Pe(y,"AID",l.T),Go(l,y),l.m&&l.o&&Nh(y,l.m,l.o),m=new dr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Ug(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Dh(l.h,m),Rh(m,y,h)}function Go(l,h){l.H&&B(l.H,function(m,y){Pe(h,y,m)}),l.l&&Tg({},function(m,y){Pe(h,y,m)})}function Ug(l,h,m){m=Math.min(l.i.length,m);var y=l.l?p(l.l.Na,l.l,l):null;e:{var V=l.i;let O=-1;for(;;){const z=["count="+m];O==-1?0<m?(O=V[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let Te=!0;for(let ct=0;ct<m;ct++){let _e=V[ct].g;const gt=V[ct].map;if(_e-=O,0>_e)O=Math.max(0,V[ct].g-100),Te=!1;else try{LS(gt,z,"req"+_e+"_")}catch{y&&y(gt)}}if(Te){y=z.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,y}function zg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ut||ee(),$||(ut(),$=!0),X.add(h,l),l.v=0}}function Mh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Mo(p(l.Fa,l),qg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,jg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Mo(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Wl(this),jg(this))};function Fh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function jg(l){l.g=new dr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=qn(l.qa);Pe(h,"RID","rpc"),Pe(h,"SID",l.K),Pe(h,"AID",l.T),Pe(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Pe(h,"TO",l.ja),Pe(h,"TYPE","xmlhttp"),Go(l,h),l.m&&l.o&&Nh(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=jl(qn(h)),m.m=null,m.P=!0,mg(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Wl(this),Mh(this),xt(19))};function Kl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function $g(l,h){var m=null;if(l.g==h){Kl(l),Fh(l),l.g=null;var y=2}else if(Vh(l.h,h))m=h.D,Eg(l.h,h),y=1;else return;if(l.G!=0){if(h.o)if(y==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var V=l.B;y=Ml(),Y(y,new hg(y,m)),Gl(l)}else zg(l);else if(V=h.s,V==3||V==0&&0<h.X||!(y==1&&jS(l,h)||y==2&&Mh(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),V){case 1:pi(l,5);break;case 4:pi(l,10);break;case 3:pi(l,6);break;default:pi(l,2)}}}function qg(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function pi(l,h){if(l.j.info("Error code "+h),h==2){var m=p(l.fb,l),y=l.Xa;const V=!y;y=new fi(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ul(y,"https"),jl(y),V?OS(y.toString(),m):MS(y.toString(),m)}else xt(2);l.G=0,l.l&&l.l.sa(h),Wg(l),Lg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Wg(l){if(l.G=0,l.ka=[],l.l){const h=Ig(l.h);(h.length!=0||l.i.length!=0)&&(T(l.ka,h),T(l.ka,l.i),l.h.i.length=0,w(l.i),l.i.length=0),l.l.ra()}}function Gg(l,h,m){var y=m instanceof fi?qn(m):new fi(m);if(y.g!="")h&&(y.g=h+"."+y.g),zl(y,y.s);else{var V=a.location;y=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var O=new fi(null);y&&Ul(O,y),h&&(O.g=h),V&&zl(O,V),m&&(O.l=m),y=O}return m=l.D,h=l.ya,m&&h&&Pe(y,m,h),Pe(y,"VER",l.la),Go(l,y),y}function Kg(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new je(new jo({eb:m})):new je(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qg(){}t=Qg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ql(){}Ql.prototype.g=function(l,h){return new Zt(l,h)};function Zt(l,h){te.call(this),this.g=new Fg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!E(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new fs(this)}_(Zt,te),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Oh(this.g)},Zt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=cs(l),l=m);h.i.push(new AS(h.Ya++,l)),h.G==3&&Gl(h)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Oh(this.g),delete this.g,Zt.aa.N.call(this)};function Hg(l){Ah.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}_(Hg,Ah);function Yg(){bh.call(this),this.status=1}_(Yg,bh);function fs(l){this.g=l}_(fs,Qg),fs.prototype.ua=function(){Y(this.g,"a")},fs.prototype.ta=function(l){Y(this.g,new Hg(l))},fs.prototype.sa=function(l){Y(this.g,new Yg)},fs.prototype.ra=function(){Y(this.g,"b")},Ql.prototype.createWebChannel=Ql.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,ZE=function(){return new Ql},XE=function(){return Ml()},JE=hi,Tf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fl.NO_ERROR=0,Fl.TIMEOUT=8,Fl.HTTP_ERROR=6,Du=Fl,dg.COMPLETE="complete",YE=dg,ag.EventType=No,No.OPEN="a",No.CLOSE="b",No.ERROR="c",No.MESSAGE="d",te.prototype.listen=te.prototype.K,da=ag,HE=jo,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,QE=je}).apply(typeof pu<"u"?pu:typeof self<"u"?self:typeof window<"u"?window:{});const C_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="10.12.5";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Yp("@firebase/firestore");function ws(){return Gr.logLevel}function OC(t){Gr.setLogLevel(t)}function L(t,...e){if(Gr.logLevel<=de.DEBUG){const n=e.map(tm);Gr.debug(`Firestore (${Io}): ${t}`,...n)}}function Qe(t,...e){if(Gr.logLevel<=de.ERROR){const n=e.map(tm);Gr.error(`Firestore (${Io}): ${t}`,...n)}}function Rn(t,...e){if(Gr.logLevel<=de.WARN){const n=e.map(tm);Gr.warn(`Firestore (${Io}): ${t}`,...n)}}function tm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t="Unexpected state"){const e=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: `+t;throw Qe(e),new Error(e)}function H(t,e){t||W()}function MC(t,e){t||W()}function q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends Zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}class LC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BC{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new at;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new at,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new at)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(H(typeof r.accessToken=="string"),new eI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return H(e===null||typeof e=="string"),new st(e)}}class UC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new UC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $C{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(H(typeof n.token=="string"),this.R=n.token,new jC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=qC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function no(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function nI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Me(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Me(0,0))}static max(){return new J(new Me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return el.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof el?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ce extends el{construct(e,n,r){return new ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ne extends el{construct(e,n,r){return new Ne(e,n,r)}static isValidIdentifier(e){return WC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ne.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ne(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ne(n)}static emptyPath(){return new Ne([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.path=e}static fromPath(e){return new j(ce.fromString(e))}static fromName(e){return new j(ce.fromString(e).popFirst(5))}static empty(){return new j(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Sf(t){return t.fields.find(e=>e.kind===2)}function vi(t){return t.fields.filter(e=>e.kind!==2)}_c.UNKNOWN_ID=-1;class Nu{constructor(e,n){this.fieldPath=e,this.kind=n}}class tl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new tl(0,sn.min())}}function rI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Me(n+1,0):new Me(n,r));return new sn(i,j.empty(),e)}function iI(t){return new sn(t.readTime,t.key,-1)}class sn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sn(J.min(),j.empty(),-1)}static max(){return new sn(J.max(),j.empty(),-1)}}function nm(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ri(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==sI)throw t;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(i=>i?D.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new D((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new D((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new at,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Aa(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=rm(r.target.error);this.V.reject(new Aa(e,i))}}static open(e,n,r,i){try{return new th(n,e.transaction(i,r))}catch(s){throw new Aa(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new KC(n)}}class Bn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Bn.S(gc())===12.2&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),wi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!DE())return!1;if(Bn.C())return!0;const e=gc(),n=Bn.S(e),r=0<n&&n<10,i=aI(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Aa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new F(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new F(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Aa(e,o))},i.onupgradeneeded=s=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=th.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),D.reject(c))).toPromise();return u.catch(()=>{}),await a.m,u}catch(a){const u=a,c=u.name!=="FirebaseError"&&o<3;if(L("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class GC{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wi(this.B.delete())}}class Aa extends F{constructor(e,n){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ii(t){return t.name==="IndexedDbTransactionError"}class KC{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(L("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wi(r)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),wi(this.store.add(e))}get(e){return wi(this.store.get(e)).next(n=>(n===void 0&&(n=null),L("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),wi(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),wi(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new D((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new D((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){L("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new D((r,i)=>{n.onerror=s=>{const o=rm(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new D((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new GC(a),c=n(a.primaryKey,a.value,u);if(c instanceof D){const d=c.catch(f=>(u.done(),D.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>D.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function wi(t){return new D((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=rm(r.target.error);n(i)}})}let k_=!1;function rm(t){const e=Bn.S(gc());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return k_||(k_=!0,setTimeout(()=>{throw r},0)),r}}return t}class QC{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){L("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{L("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ii(n)?L("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ri(n)}await this.X(6e4)})}}class HC{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return D.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return L("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(L("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=iI(s);nm(o,r)>0&&(r=o)}),new sn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zt.oe=-1;function _l(t){return t==null}function nl(t){return t===0&&1/t==-1/0}function lI(t){return typeof t=="number"&&Number.isInteger(t)&&!nl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=V_(e)),e=YC(t.get(n),e);return V_(e)}function YC(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function V_(t){return t+""}function On(t){const e=t.length;if(H(e>=2),e===2)return H(t.charAt(0)===""&&t.charAt(1)===""),ce.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&W(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:W()}s=o+2}return new ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e){return[t,Vt(e)]}function uI(t,e,n){return[t,Vt(e),n]}const JC={},XC=["prefixPath","collectionGroup","readTime","documentId"],ZC=["prefixPath","collectionGroup","documentId"],ek=["collectionGroup","readTime","prefixPath","documentId"],tk=["canonicalId","targetId"],nk=["targetId","path"],rk=["path","targetId"],ik=["collectionId","parent"],sk=["indexId","uid"],ok=["uid","sequenceNumber"],ak=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lk=["indexId","uid","orderedDocumentKey"],uk=["userId","collectionPath","documentId"],ck=["userId","collectionPath","largestBatchId"],hk=["userId","collectionGroup","largestBatchId"],cI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dk=[...cI,"documentOverlays"],hI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dI=hI,im=[...dI,"indexConfiguration","indexState","indexEntries"],fk=im,pk=[...im,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends oI{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function nt(t,e){const n=q(t);return Bn.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??dt.RED,this.left=i??dt.EMPTY,this.right=s??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new dt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();const e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,i,s){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new O_(this.data.getIterator())}getIteratorFrom(e){return new O_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ie)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ie(this.comparator);return n.data=e,n}}class O_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(Ne.comparator)}static empty(){return new jt([])}unionWith(e){let n=new Ie(Ne.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return no(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pI("Invalid base64 string: "+s):s}}(e);return new We(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new We(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}We.EMPTY_BYTE_STRING=new We("");const gk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ir(t){if(H(!!t),typeof t=="string"){let e=0;const n=gk.exec(t);if(H(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?We.fromBase64String(t):We.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sm(t){const e=t.mapValue.fields.__previous_value__;return nh(e)?sm(e):e}function rl(t){const e=ir(t.mapValue.fields.__local_write_time__.timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Qr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mu={nullValue:"NULL_VALUE"};function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nh(t)?4:mI(t)?9007199254740991:10:W()}function zn(t,e){if(t===e)return!0;const n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ir(i.timestampValue),a=ir(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Kr(i.bytesValue).isEqual(Kr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=qe(i.doubleValue),a=qe(s.doubleValue);return o===a?nl(o)===nl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return no(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(N_(o)!==N_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!zn(o[u],a[u])))return!1;return!0}(t,e);default:return W()}}function il(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function Hr(t,e){if(t===e)return 0;const n=ji(t),r=ji(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=qe(s.integerValue||s.doubleValue),u=qe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return M_(t.timestampValue,e.timestampValue);case 4:return M_(rl(t),rl(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Kr(s),u=Kr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=ie(a[c],u[c]);if(d!==0)return d}return ie(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ie(qe(s.latitude),qe(o.latitude));return a!==0?a:ie(qe(s.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){const d=Hr(a[c],u[c]);if(d)return d}return ie(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===kr.mapValue&&o===kr.mapValue)return 0;if(s===kr.mapValue)return 1;if(o===kr.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){const p=ie(u[f],d[f]);if(p!==0)return p;const g=Hr(a[u[f]],c[d[f]]);if(g!==0)return g}return ie(u.length,d.length)}(t.mapValue,e.mapValue);default:throw W()}}function M_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=ir(t),r=ir(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function ro(t){return bf(t)}function bf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return j.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=bf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bf(n.fields[o])}`;return i+"}"}(t.mapValue):W()}function $i(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xf(t){return!!t&&"integerValue"in t}function sl(t){return!!t&&"arrayValue"in t}function F_(t){return!!t&&"nullValue"in t}function L_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function ba(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return es(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ba(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ba(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function _k(t){return"nullValue"in t?Mu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?$i(Qr.empty(),j.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:W()}function vk(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?$i(Qr.empty(),j.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?kr:W()}function B_(t,e){const n=Hr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function U_(t,e){const n=Hr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.value=e}static empty(){return new ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(n)}setAll(e){let n=Ne.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ba(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Fu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){es(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ft(ba(this.value))}}function gI(t){const e=[];return es(t.fields,(n,r)=>{const i=new Ne([n]);if(Fu(r)){const s=gI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ke(e,0,J.min(),J.min(),J.min(),ft.empty(),0)}static newFoundDocument(e,n,r,i){return new ke(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new ke(e,2,n,J.min(),J.min(),ft.empty(),0)}static newUnknownDocument(e,n){return new ke(e,3,n,J.min(),J.min(),ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ke&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){this.position=e,this.inclusive=n}}function z_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),n.key):r=Hr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function j_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function wk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{}class he extends yI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ek(e,n,r):n==="array-contains"?new Sk(e,r):n==="in"?new TI(e,r):n==="not-in"?new Ak(e,r):n==="array-contains-any"?new bk(e,r):new he(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ik(e,r):new Tk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Hr(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(Hr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class we extends yI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new we(e,n)}matches(e){return io(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function io(t){return t.op==="and"}function Pf(t){return t.op==="or"}function om(t){return _I(t)&&io(t)}function _I(t){for(const e of t.filters)if(e instanceof we)return!1;return!0}function Rf(t){if(t instanceof he)return t.field.canonicalString()+t.op.toString()+ro(t.value);if(om(t))return t.filters.map(e=>Rf(e)).join(",");{const e=t.filters.map(n=>Rf(n)).join(",");return`${t.op}(${e})`}}function vI(t,e){return t instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(t,e):t instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&vI(o,i.filters[a]),!0):!1}(t,e):void W()}function wI(t,e){const n=t.filters.concat(e);return we.create(n,t.op)}function EI(t){return t instanceof he?function(n){return`${n.field.canonicalString()} ${n.op} ${ro(n.value)}`}(t):t instanceof we?function(n){return n.op.toString()+" {"+n.getFilters().map(EI).join(" ,")+"}"}(t):"Filter"}class Ek extends he{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){const n=j.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ik extends he{constructor(e,n){super(e,"in",n),this.keys=II("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Tk extends he{constructor(e,n){super(e,"not-in",n),this.keys=II("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function II(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}class Sk extends he{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sl(n)&&il(n.arrayValue,this.value)}}class TI extends he{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&il(this.value.arrayValue,n)}}class Ak extends he{constructor(e,n){super(e,"not-in",n)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!il(this.value.arrayValue,n)}}class bk extends he{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Cf(t,e=null,n=[],r=[],i=null,s=null,o=null){return new xk(t,e,n,r,i,s,o)}function qi(t){const e=q(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_l(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ro(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ro(r)).join(",")),e.ue=n}return e.ue}function vl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j_(t.startAt,e.startAt)&&j_(t.endAt,e.endAt)}function vc(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wc(t,e){return t.filters.filter(n=>n instanceof he&&n.field.isEqual(e))}function $_(t,e,n){let r=Mu,i=!0;for(const s of wc(t,e)){let o=Mu,a=!0;switch(s.op){case"<":case"<=":o=_k(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Mu}B_({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];B_({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function q_(t,e,n){let r=kr,i=!0;for(const s of wc(t,e)){let o=kr,a=!0;switch(s.op){case">=":case">":o=vk(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=kr}U_({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];U_({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SI(t,e,n,r,i,s,o,a){return new ar(t,e,n,r,i,s,o,a)}function To(t){return new ar(t)}function W_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function am(t){return t.collectionGroup!==null}function $s(t){const e=q(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ie(Ne.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ol(s,r))}),n.has(Ne.keyField().canonicalString())||e.ce.push(new ol(Ne.keyField(),r))}return e.ce}function Dt(t){const e=q(t);return e.le||(e.le=Pk(e,$s(t))),e.le}function Pk(t,e){if(t.limitType==="F")return Cf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ol(i.field,s)});const n=t.endAt?new Yr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yr(t.startAt.position,t.startAt.inclusive):null;return Cf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kf(t,e){const n=t.filters.concat([e]);return new ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ec(t,e,n){return new ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wl(t,e){return vl(Dt(t),Dt(e))&&t.limitType===e.limitType}function AI(t){return`${qi(Dt(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EI(i)).join(", ")}]`),_l(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ro(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ro(i)).join(",")),`Target(${r})`}(Dt(t))}; limitType=${t.limitType})`}function El(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of $s(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=z_(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,$s(r),i)||r.endAt&&!function(o,a,u){const c=z_(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,$s(r),i))}(t,e)}function bI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xI(t){return(e,n)=>{let r=!1;for(const i of $s(t)){const s=Rk(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Rk(t,e,n){const r=t.field.isKeyField()?j.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Hr(u,c):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new be(j.comparator);function $t(){return Ck}const PI=new be(j.comparator);function fa(...t){let e=PI;for(const n of t)e=e.insert(n.key,n);return e}function RI(t){let e=PI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mn(){return xa()}function CI(){return xa()}function xa(){return new si(t=>t.toString(),(t,e)=>t.isEqual(e))}const kk=new be(j.comparator),Vk=new Ie(j.comparator);function se(...t){let e=Vk;for(const n of t)e=e.add(n);return e}const Dk=new Ie(ie);function lm(){return Dk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nl(e)?"-0":e}}function VI(t){return{integerValue:""+t}}function DI(t,e){return lI(e)?VI(e):kI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function Nk(t,e,n){return t instanceof so?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&nh(s)&&(s=sm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Wi?OI(t,e):t instanceof Gi?MI(t,e):function(i,s){const o=NI(i,s),a=G_(o)+G_(i.Pe);return xf(o)&&xf(i.Pe)?VI(a):kI(i.serializer,a)}(t,e)}function Ok(t,e,n){return t instanceof Wi?OI(t,e):t instanceof Gi?MI(t,e):n}function NI(t,e){return t instanceof oo?function(r){return xf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class so extends rh{}class Wi extends rh{constructor(e){super(),this.elements=e}}function OI(t,e){const n=FI(e);for(const r of t.elements)n.some(i=>zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gi extends rh{constructor(e){super(),this.elements=e}}function MI(t,e){let n=FI(e);for(const r of t.elements)n=n.filter(i=>!zn(i,r));return{arrayValue:{values:n}}}class oo extends rh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function G_(t){return qe(t.integerValue||t.doubleValue)}function FI(t){return sl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n){this.field=e,this.transform=n}}function Mk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Wi&&i instanceof Wi||r instanceof Gi&&i instanceof Gi?no(r.elements,i.elements,zn):r instanceof oo&&i instanceof oo?zn(r.Pe,i.Pe):r instanceof so&&i instanceof so}(t.transform,e.transform)}class Fk{constructor(e,n){this.version=e,this.transformResults=n}}class Oe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oe}static exists(e){return new Oe(void 0,e)}static updateTime(e){return new Oe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ih{}function LI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ao(t.key,Oe.none()):new So(t.key,t.data,Oe.none());{const n=t.data,r=ft.empty();let i=new Ie(Ne.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new lr(t.key,r,new jt(i.toArray()),Oe.none())}}function Lk(t,e,n){t instanceof So?function(i,s,o){const a=i.value.clone(),u=Q_(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof lr?function(i,s,o){if(!Lu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Q_(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(BI(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pa(t,e,n,r){return t instanceof So?function(s,o,a,u){if(!Lu(s.precondition,o))return a;const c=s.value.clone(),d=H_(s.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof lr?function(s,o,a,u){if(!Lu(s.precondition,o))return a;const c=H_(s.fieldTransforms,u,o),d=o.data;return d.setAll(BI(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Lu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Bk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=NI(r.transform,i||null);s!=null&&(n===null&&(n=ft.empty()),n.set(r.field,s))}return n||null}function K_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&no(r,i,(s,o)=>Mk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class So extends ih{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class lr extends ih{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function BI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Q_(t,e,n){const r=new Map;H(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ok(o,a,n[i]))}return r}function H_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Nk(s,o,e))}return r}class Ao extends ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class um extends ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Lk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=LI(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&no(this.mutations,e.mutations,(n,r)=>K_(n,r))&&no(this.baseMutations,e.baseMutations,(n,r)=>K_(n,r))}}class hm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){H(e.mutations.length===r.length);let i=function(){return kk}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new hm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,fe;function UI(t){switch(t){default:return W();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function zI(t){if(t===void 0)return Qe("GRPC error has no .code"),N.UNKNOWN;switch(t){case Ye.OK:return N.OK;case Ye.CANCELLED:return N.CANCELLED;case Ye.UNKNOWN:return N.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return N.INTERNAL;case Ye.UNAVAILABLE:return N.UNAVAILABLE;case Ye.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ye.NOT_FOUND:return N.NOT_FOUND;case Ye.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ye.ABORTED:return N.ABORTED;case Ye.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ye.DATA_LOSS:return N.DATA_LOSS;default:return W()}}(fe=Ye||(Ye={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new Ni([4294967295,4294967295],0);function Y_(t){const e=jI().encode(t),n=new KE;return n.update(e),new Uint8Array(n.digest())}function J_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ni([n,r],0),new Ni([i,s],0)]}class fm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pa(`Invalid padding: ${n}`);if(r<0)throw new pa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ni.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ni.fromNumber(r)));return i.compare(zk)===1&&(i=new Ni([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Y_(e),[r,i]=J_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new fm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Y_(e),[r,i]=J_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tl(J.min(),i,new be(ie),$t(),se())}}class Sl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sl(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class $I{constructor(e,n){this.targetId=e,this.me=n}}class qI{constructor(e,n,r=We.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class X_{constructor(){this.fe=0,this.ge=ev(),this.pe=We.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=se(),n=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W()}}),new Sl(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=ev()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,H(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jk{constructor(e){this.Le=e,this.Be=new Map,this.ke=$t(),this.qe=Z_(),this.Qe=new be(ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(vc(s))if(r===0){const o=new j(s.path);this.Ue(n,o,ke.newNoDocument(o,J.min()))}else H(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Kr(r).toUint8Array()}catch(u){if(u instanceof pI)return Rn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new fm(o,i,s)}catch(u){return Rn(u instanceof pa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vc(a.target)){const u=new j(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ke.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Tl(e,n,this.Qe,this.ke,r);return this.ke=$t(),this.qe=Z_(),this.Qe=new be(ie),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new X_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ie(ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new X_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Z_(){return new be(j.comparator)}function ev(){return new be(j.comparator)}const $k={asc:"ASCENDING",desc:"DESCENDING"},qk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wk={and:"AND",or:"OR"};class Gk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vf(t,e){return t.useProto3Json||_l(e)?e:{value:e}}function ao(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Kk(t,e){return ao(t,e.toTimestamp())}function He(t){return H(!!t),J.fromTimestamp(function(n){const r=ir(n);return new Me(r.seconds,r.nanos)}(t))}function pm(t,e){return Df(t,e).canonicalString()}function Df(t,e){const n=function(i){return new ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GI(t){const e=ce.fromString(t);return H(nT(e)),e}function al(t,e){return pm(t.databaseId,e.path)}function Un(t,e){const n=GI(e);if(n.get(1)!==t.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(HI(n))}function KI(t,e){return pm(t.databaseId,e)}function QI(t){const e=GI(t);return e.length===4?ce.emptyPath():HI(e)}function Nf(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HI(t){return H(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tv(t,e,n){return{name:al(t,e),fields:n.value.mapValue.fields}}function YI(t,e,n){const r=Un(t,e.name),i=He(e.updateTime),s=e.createTime?He(e.createTime):J.min(),o=new ft({mapValue:{fields:e.fields}}),a=ke.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Qk(t,e){return"found"in e?function(r,i){H(!!i.found),i.found.name,i.found.updateTime;const s=Un(r,i.found.name),o=He(i.found.updateTime),a=i.found.createTime?He(i.found.createTime):J.min(),u=new ft({mapValue:{fields:i.found.fields}});return ke.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){H(!!i.missing),H(!!i.readTime);const s=Un(r,i.missing),o=He(i.readTime);return ke.newNoDocument(s,o)}(t,e):W()}function Hk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(H(d===void 0||typeof d=="string"),We.fromBase64String(d||"")):(H(d===void 0||d instanceof Buffer||d instanceof Uint8Array),We.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?N.UNKNOWN:zI(c.code);return new F(d,c.message||"")}(o);n=new qI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Un(t,r.document.name),s=He(r.document.updateTime),o=r.document.createTime?He(r.document.createTime):J.min(),a=new ft({mapValue:{fields:r.document.fields}}),u=ke.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Bu(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Un(t,r.document),s=r.readTime?He(r.readTime):J.min(),o=ke.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Bu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Un(t,r.document),s=r.removedTargetIds||[];n=new Bu([],s,i,null)}else{if(!("filter"in e))return W();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Uk(i,s),a=r.targetId;n=new $I(a,o)}}return n}function ll(t,e){let n;if(e instanceof So)n={update:tv(t,e.key,e.value)};else if(e instanceof Ao)n={delete:al(t,e.key)};else if(e instanceof lr)n={update:tv(t,e.key,e.data),updateMask:tV(e.fieldMask)};else{if(!(e instanceof um))return W();n={verify:al(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof so)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Kk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(t,e.precondition)),n}function Of(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Oe.updateTime(He(s.updateTime)):s.exists!==void 0?Oe.exists(s.exists):Oe.none()}(e.currentDocument):Oe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)H(a.setToServerValue==="REQUEST_TIME"),u=new so;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];u=new Wi(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];u=new Gi(d)}else"increment"in a?u=new oo(o,a.increment):W();const c=Ne.fromServerFormat(a.fieldPath);return new Il(c,u)}(t,i)):[];if(e.update){e.update.name;const i=Un(t,e.update.name),s=new ft({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const c=u.fieldPaths||[];return new jt(c.map(d=>Ne.fromServerFormat(d)))}(e.updateMask);return new lr(i,s,o,n,r)}return new So(i,s,n,r)}if(e.delete){const i=Un(t,e.delete);return new Ao(i,n)}if(e.verify){const i=Un(t,e.verify);return new um(i,n)}return W()}function Yk(t,e){return t&&t.length>0?(H(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?He(i.updateTime):He(s);return o.isEqual(J.min())&&(o=He(s)),new Fk(o,i.transformResults||[])}(n,e))):[]}function JI(t,e){return{documents:[KI(t,e.path)]}}function XI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KI(t,i);const s=function(c){if(c.length!==0)return tT(we.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Is(p.field),direction:Xk(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function ZI(t){let e=QI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){H(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const p=eT(f);return p instanceof we&&om(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(_){return new ol(Ts(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,_l(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Yr(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Yr(g,p)}(n.endAt)),SI(e,i,o,s,a,"F",u,c)}function Jk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ts(n.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ts(n.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ts(n.unaryFilter.field);return he.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ts(n.unaryFilter.field);return he.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return he.create(Ts(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return we.create(n.compositeFilter.filters.map(r=>eT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function Xk(t){return $k[t]}function Zk(t){return qk[t]}function eV(t){return Wk[t]}function Is(t){return{fieldPath:t.canonicalString()}}function Ts(t){return Ne.fromServerFormat(t.fieldPath)}function tT(t){return t instanceof he?function(n){if(n.op==="=="){if(L_(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(F_(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L_(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(F_(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:Zk(n.op),value:n.value}}}(t):t instanceof we?function(n){const r=n.getFilters().map(i=>tT(i));return r.length===1?r[0]:{compositeFilter:{op:eV(n.op),filters:r}}}(t):W()}function tV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n,r,i,s=J.min(),o=J.min(),a=We.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Jn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.ct=e}}function nV(t,e){let n;if(e.document)n=YI(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=j.fromSegments(e.noDocument.path),i=Qi(e.noDocument.readTime);n=ke.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return W();{const r=j.fromSegments(e.unknownDocument.path),i=Qi(e.unknownDocument.version);n=ke.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Me(i[0],i[1]);return J.fromTimestamp(s)}(e.readTime)),n}function nv(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ic(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:al(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ao(s,o.version.toTimestamp()),createTime:ao(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ki(e.version)};else{if(!e.isUnknownDocument())return W();r.unknownDocument={path:n.path.toArray(),version:Ki(e.version)}}return r}function Ic(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ki(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qi(t){const e=new Me(t.seconds,t.nanoseconds);return J.fromTimestamp(e)}function Ei(t,e){const n=(e.baseMutations||[]).map(s=>Of(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Of(t.ct,s)),i=Me.fromMillis(e.localWriteTimeMs);return new cm(e.batchId,i,n,r)}function ma(t){const e=Qi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Qi(t.lastLimboFreeSnapshotVersion):J.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return H(s.documents.length===1),Dt(To(QI(s.documents[0])))}(t.query):function(s){return Dt(ZI(s))}(t.query),new Jn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,We.fromBase64String(t.resumeToken))}function iT(t,e){const n=Ki(e.snapshotVersion),r=Ki(e.lastLimboFreeSnapshotVersion);let i;i=vc(e.target)?JI(t.ct,e.target):XI(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qi(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function mm(t){const e=ZI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ec(e,e.limit,"L"):e}function yd(t,e){return new dm(e.largestBatchId,Of(t.ct,e.overlayMutation))}function rv(t,e){const n=e.path.lastSegment();return[t,Vt(e.path.popLast()),n]}function iv(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ki(r.readTime),documentKey:Vt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{getBundleMetadata(e,n){return sv(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Qi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return sv(e).put(function(i){return{bundleId:i.id,createTime:Ki(He(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return ov(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:mm(s.bundledQuery),readTime:Qi(s.readTime)}}(r)})}saveNamedQuery(e,n){return ov(e).put(function(i){return{name:i.name,readTime:Ki(He(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function sv(t){return nt(t,"bundles")}function ov(t){return nt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new sh(e,r)}getOverlay(e,n){return ra(e).get(rv(this.userId,n)).next(r=>r?yd(this.serializer,r):null)}getOverlays(e,n){const r=Mn();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new dm(n,o);i.push(this.ht(e,a))}),D.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Vt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ra(e).j("collectionPathOverlayIndex",a))}),D.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Mn(),s=Vt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ra(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const c=yd(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Mn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ra(e).J({index:"collectionGroupOverlayIndex",range:a},(u,c,d)=>{const f=yd(this.serializer,c);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return ra(e).put(function(i,s,o){const[a,u,c]=rv(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ll(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function ra(t){return nt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{Pt(e){return nt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?We.fromUint8Array(r):We.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(qe(e.integerValue));else if("doubleValue"in e){const r=qe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),nl(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ir(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Kr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?mI(e)?this.dt(n,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.St(e.arrayValue,n),this.ft(n)):W()}Vt(e,n){this.dt(n,25),this.bt(e,n)}bt(e,n){n.Rt(e)}wt(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}St(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),j.fromName(e).path.forEach(r=>{this.dt(n,60),this.bt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Ii.Dt=new Ii;function sV(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function av(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=sV(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class oV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.vt(r.value),r=n.next();this.Ft()}Mt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.xt(r.value),r=n.next();this.Ot()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.vt(r);else if(r<2048)this.vt(960|r>>>6),this.vt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.vt(480|r>>>12),this.vt(128|63&r>>>6),this.vt(128|63&r);else{const i=n.codePointAt(0);this.vt(240|i>>>18),this.vt(128|63&i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i)}}this.Ft()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=n.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}Bt(e){const n=this.kt(e),r=av(n);this.qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Qt(e){const n=this.kt(e),r=av(n);this.qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}vt(e){const n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(n)}xt(e){const n=255&e;n===0?(this.Wt(0),this.Wt(255)):n===255?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class aV{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}}class lV{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}}class ia{constructor(){this.zt=new oV,this.jt=new aV(this.zt),this.Ht=new lV(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return e===0?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Yt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ti(this.indexId,this.documentKey,this.arrayValue,r)}}function _r(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=lv(t.arrayValue,e.arrayValue),n!==0?n:(n=lv(t.directionalValue,e.directionalValue),n!==0?n:j.comparator(t.documentKey,e.documentKey)))}function lv(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this.Zt=new Ie((n,r)=>Ne.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const n of e.filters){const r=n;r.isInequality()?this.Zt=this.Zt.add(r):this.en.push(r)}}get tn(){return this.Zt.size>1}nn(e){if(H(e.collectionGroup===this.collectionId),this.tn)return!1;const n=Sf(e);if(n!==void 0&&!this.rn(n))return!1;const r=vi(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.rn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Zt.size>0){const a=this.Zt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.sn(a,u)||!this.on(this.Xt[o++],u))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Xt.length||!this.on(this.Xt[o++],a))return!1}return!0}_n(){if(this.tn)return null;let e=new Ie(Ne.comparator);const n=[];for(const r of this.en)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Nu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Nu(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Nu(r.field,r.dir==="asc"?0:1)));return new _c(_c.UNKNOWN_ID,this.collectionId,n,tl.empty())}rn(e){for(const n of this.en)if(this.sn(n,e))return!0;return!1}sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}on(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){var e,n;if(H(t instanceof he||t instanceof we),t instanceof he){if(t instanceof TI){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>he.create(t.field,"==",s)))||[];return we.create(i,"or")}return t}const r=t.filters.map(i=>sT(i));return we.create(r,t.op)}function uV(t){if(t.getFilters().length===0)return[];const e=Lf(sT(t));return H(oT(e)),Mf(e)||Ff(e)?[e]:e.getFilters()}function Mf(t){return t instanceof he}function Ff(t){return t instanceof we&&om(t)}function oT(t){return Mf(t)||Ff(t)||function(n){if(n instanceof we&&Pf(n)){for(const r of n.getFilters())if(!Mf(r)&&!Ff(r))return!1;return!0}return!1}(t)}function Lf(t){if(H(t instanceof he||t instanceof we),t instanceof he)return t;if(t.filters.length===1)return Lf(t.filters[0]);const e=t.filters.map(r=>Lf(r));let n=we.create(e,t.op);return n=Tc(n),oT(n)?n:(H(n instanceof we),H(io(n)),H(n.filters.length>1),n.filters.reduce((r,i)=>gm(r,i)))}function gm(t,e){let n;return H(t instanceof he||t instanceof we),H(e instanceof he||e instanceof we),n=t instanceof he?e instanceof he?function(i,s){return we.create([i,s],"and")}(t,e):cv(t,e):e instanceof he?cv(e,t):function(i,s){if(H(i.filters.length>0&&s.filters.length>0),io(i)&&io(s))return wI(i,s.getFilters());const o=Pf(i)?i:s,a=Pf(i)?s:i,u=o.filters.map(c=>gm(c,a));return we.create(u,"or")}(t,e),Tc(n)}function cv(t,e){if(io(e))return wI(e,t.getFilters());{const n=e.filters.map(r=>gm(t,r));return we.create(n,"or")}}function Tc(t){if(H(t instanceof he||t instanceof we),t instanceof he)return t;const e=t.getFilters();if(e.length===1)return Tc(e[0]);if(_I(t))return t;const n=e.map(i=>Tc(i)),r=[];return n.forEach(i=>{i instanceof he?r.push(i):i instanceof we&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:we.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.an=new ym}addToCollectionParentIndex(e,n){return this.an.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(sn.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(sn.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class ym{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ie(ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ie(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=new Uint8Array(0);class hV{constructor(e,n){this.databaseId=n,this.un=new ym,this.cn=new si(r=>qi(r),(r,i)=>vl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.un.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.un.add(n)});const s={collectionId:r,parent:Vt(i)};return hv(e).put(s)}return D.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[nI(n),""],!1,!0);return hv(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(On(o.parent))}return r})}addFieldIndex(e,n){const r=sa(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=_s(e);return s.next(a=>{o.put(iv(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=sa(e),i=_s(e),s=ys(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=sa(e),r=ys(e),i=_s(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return D.forEach(this.ln(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new uv(r)._n();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ys(e);let i=!0;const s=new Map;return D.forEach(this.ln(n),o=>this.hn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=se();const a=[];return D.forEach(s,(u,c)=>{L("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(u)} to execute ${qi(n)}`);const d=function(I,k){const M=Sf(k);if(M===void 0)return null;for(const B of wc(I,M.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(c,u),f=function(I,k){const M=new Map;for(const B of vi(k))for(const A of wc(I,B.fieldPath))switch(A.op){case"==":case"in":M.set(B.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return M.set(B.fieldPath.canonicalString(),A.value),Array.from(M.values())}return null}(c,u),p=function(I,k){const M=[];let B=!0;for(const A of vi(k)){const v=A.kind===0?$_(I,A.fieldPath,I.startAt):q_(I,A.fieldPath,I.startAt);M.push(v.value),B&&(B=v.inclusive)}return new Yr(M,B)}(c,u),g=function(I,k){const M=[];let B=!0;for(const A of vi(k)){const v=A.kind===0?q_(I,A.fieldPath,I.endAt):$_(I,A.fieldPath,I.endAt);M.push(v.value),B&&(B=v.inclusive)}return new Yr(M,B)}(c,u),_=this.Pn(u,c,p),w=this.Pn(u,c,g),T=this.In(u,c,f),S=this.Tn(u.indexId,d,_,p.inclusive,w,g.inclusive,T);return D.forEach(S,E=>r.G(E,n.limit).next(I=>{I.forEach(k=>{const M=j.fromSegments(k.documentKey);o.has(M)||(o=o.add(M),a.push(M))})}))}).next(()=>a)}return D.resolve(null)})}ln(e){let n=this.cn.get(e);return n||(e.filters.length===0?n=[e]:n=uV(we.create(e.filters,"and")).map(r=>Cf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,n),n)}Tn(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),d=[];for(let f=0;f<u;++f){const p=n?this.En(n[f/c]):gu,g=this.dn(e,p,r[f%c],i),_=this.An(e,p,s[f%c],o),w=a.map(T=>this.dn(e,p,T,!0));d.push(...this.createRange(g,_,w))}return d}dn(e,n,r,i){const s=new Ti(e,j.empty(),n,r);return i?s:s.Yt()}An(e,n,r,i){const s=new Ti(e,j.empty(),n,r);return i?s.Yt():s}hn(e,n){const r=new uv(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.nn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.ln(n);return D.forEach(i,s=>this.hn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new Ie(Ne.comparator),d=!1;for(const f of u.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const f of u.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Rn(e,n){const r=new ia;for(const i of vi(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Jt(i.kind);Ii.Dt.It(s,o)}return r.Gt()}En(e){const n=new ia;return Ii.Dt.It(e,n.Jt(0)),n.Gt()}Vn(e,n){const r=new ia;return Ii.Dt.It($i(this.databaseId,n),r.Jt(function(s){const o=vi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Gt()}In(e,n,r){if(r===null)return[];let i=[];i.push(new ia);let s=0;for(const o of vi(e)){const a=r[s++];for(const u of i)if(this.mn(n,o.fieldPath)&&sl(a))i=this.fn(i,o,a);else{const c=u.Jt(o.kind);Ii.Dt.It(a,c)}}return this.gn(i)}Pn(e,n,r){return this.In(e,n,r.position)}gn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Gt();return n}fn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new ia;u.seed(a.Gt()),Ii.Dt.It(o,u.Jt(n.kind)),s.push(u)}return s}mn(e,n){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=sa(e),i=_s(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return D.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(d,f){const p=f?new tl(f.sequenceNumber,new sn(Qi(f.readTime),new j(On(f.documentKey)),f.largestBatchId)):tl.empty(),g=d.fields.map(([_,w])=>new Nu(Ne.fromServerFormat(_),w));return new _c(d.indexId,d.collectionGroup,g,p)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ie(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=sa(e),s=_s(e);return this.pn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>D.forEach(a,u=>s.put(iv(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return D.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?D.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),D.forEach(a,u=>this.yn(e,i,u).next(c=>{const d=this.wn(s,u);return c.isEqual(d)?D.resolve():this.Sn(e,s,u,c,d)}))))})}bn(e,n,r,i){return ys(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,n.key),documentKey:n.key.path.toArray()})}Dn(e,n,r,i){return ys(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,n.key),n.key.path.toArray()])}yn(e,n,r){const i=ys(e);let s=new Ie(_r);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,n)])},(o,a)=>{s=s.add(new Ti(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(e,n){let r=new Ie(_r);const i=this.Rn(n,e);if(i==null)return r;const s=Sf(n);if(s!=null){const o=e.data.field(s.fieldPath);if(sl(o))for(const a of o.arrayValue.values||[])r=r.add(new Ti(n.indexId,e.key,this.En(a),i))}else r=r.add(new Ti(n.indexId,e.key,gu,i));return r}Sn(e,n,r,i,s){L("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,c,d,f,p){const g=u.getIterator(),_=c.getIterator();let w=gs(g),T=gs(_);for(;w||T;){let S=!1,E=!1;if(w&&T){const I=d(w,T);I<0?E=!0:I>0&&(S=!0)}else w!=null?E=!0:S=!0;S?(f(T),T=gs(_)):E?(p(w),w=gs(g)):(w=gs(g),T=gs(_))}}(i,s,_r,a=>{o.push(this.bn(e,n,r,a))},a=>{o.push(this.Dn(e,n,r,a))}),D.waitFor(o)}pn(e){let n=1;return _s(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>_r(o,a)).filter((o,a,u)=>!a||_r(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=_r(o,e),u=_r(o,n);if(a===0)i[0]=e.Yt();else if(a>0&&u<0)i.push(o),i.push(o.Yt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,gu,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,gu,[]];s.push(IDBKeyRange.bound(a,u))}return s}Cn(e,n){return _r(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(dv)}getMinOffset(e,n){return D.mapArray(this.ln(n),r=>this.hn(e,r).next(i=>i||W())).next(dv)}}function hv(t){return nt(t,"collectionParents")}function ys(t){return nt(t,"indexEntries")}function sa(t){return nt(t,"indexConfiguration")}function _s(t){return nt(t,"indexState")}function dv(t){H(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;nm(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new sn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Lt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Lt(e,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},(d,f,p)=>(a++,p.delete()));s.push(u.next(()=>{H(a===1)}));const c=[];for(const d of n.mutations){const f=uI(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return D.waitFor(s).next(()=>c)}function Sc(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw W();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(41943040,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);class oh{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static lt(e,n,r,i){H(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new oh(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ss(e),o=vr(e);return o.add({}).next(a=>{H(typeof a=="number");const u=new cm(a,n,r,i),c=function(g,_,w){const T=w.baseMutations.map(E=>ll(g.ct,E)),S=w.mutations.map(E=>ll(g.ct,E));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:T,mutations:S}}(this.serializer,this.userId,u),d=[];let f=new Ie((p,g)=>ie(p.canonicalString(),g.canonicalString()));for(const p of i){const g=uI(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(g,JC))}return f.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.vn[a]=u.keys()}),D.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return vr(e).get(n).next(r=>r?(H(r.userId===this.userId),Ei(this.serializer,r)):null)}Fn(e,n){return this.vn[n]?D.resolve(this.vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return vr(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(H(a.batchId>=r),s=Ei(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ei(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ou(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ss(e).J({range:i},(o,a,u)=>{const[c,d,f]=o,p=On(d);if(c===this.userId&&n.path.isEqual(p))return vr(e).get(f).next(g=>{if(!g)throw W();H(g.userId===this.userId),s.push(Ei(this.serializer,g))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(ie);const i=[];return n.forEach(s=>{const o=Ou(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Ss(e).J({range:a},(c,d,f)=>{const[p,g,_]=c,w=On(g);p===this.userId&&s.path.isEqual(w)?r=r.add(_):f.done()});i.push(u)}),D.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Ou(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ie(ie);return Ss(e).J({range:o},(u,c,d)=>{const[f,p,g]=u,_=On(p);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(g)):d.done()}).next(()=>this.Mn(e,a))}Mn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(vr(e).get(s).next(o=>{if(o===null)throw W();H(o.userId===this.userId),r.push(Ei(this.serializer,o))}))}),D.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return aT(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.xn(n.batchId)}),D.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return D.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ss(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=On(s[1]);i.push(u)}else a.done()}).next(()=>{H(i.length===0)})})}containsKey(e,n){return lT(e,this.userId,n)}On(e){return uT(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lT(t,e,n){const r=Ou(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ss(t).J({range:s,H:!0},(a,u,c)=>{const[d,f,p]=a;d===e&&f===i&&(o=!0),c.done()}).next(()=>o)}function vr(t){return nt(t,"mutations")}function Ss(t){return nt(t,"documentMutations")}function uT(t){return nt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new Hi(0)}static Bn(){return new Hi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.kn(e).next(n=>{const r=new Hi(n.highestTargetId);return n.highestTargetId=r.next(),this.qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(n=>J.fromTimestamp(new Me(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.qn(e,i)))}addTargetData(e,n){return this.Qn(e,n).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(n,r),this.qn(e,r))))}updateTargetData(e,n){return this.Qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>vs(e).delete(n.targetId)).next(()=>this.kn(e)).next(r=>(H(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return vs(e).J((o,a)=>{const u=ma(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>D.waitFor(s)).next(()=>i)}forEachTarget(e,n){return vs(e).J((r,i)=>{const s=ma(i);n(s)})}kn(e){return pv(e).get("targetGlobalKey").next(n=>(H(n!==null),n))}qn(e,n){return pv(e).put("targetGlobalKey",n)}Qn(e,n){return vs(e).put(iT(this.serializer,n))}Kn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=qi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return vs(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const c=ma(a);vl(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ar(e);return n.forEach(o=>{const a=Vt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),D.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ar(e);return D.forEach(n,s=>{const o=Vt(s.path);return D.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ar(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ar(e);let s=se();return i.J({range:r,H:!0},(o,a,u)=>{const c=On(o[1]),d=new j(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Vt(n.path),i=IDBKeyRange.bound([r],[nI(r)],!1,!0);let s=0;return Ar(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return vs(e).get(n).next(r=>r?ma(r):null)}}function vs(t){return nt(t,"targets")}function pv(t){return nt(t,"targetGlobal")}function Ar(t){return nt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv([t,e],[n,r]){const i=ie(t,n);return i===0?ie(e,r):i}class fV{constructor(e){this.$n=e,this.buffer=new Ie(mv),this.Un=0}Wn(){return++this.Un}Gn(e){const n=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.zn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return this.zn!==null}jn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.zn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ii(n)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ri(n)}await this.jn(3e5)})}}class mV{constructor(e,n){this.Hn=e,this.params=n}calculateTargetCount(e,n){return this.Hn.Jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return D.resolve(zt.oe);const r=new fV(n);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Hn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Hn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fv):this.Zn(e,n))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,n){let r,i,s,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),ws()<=de.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function gV(t,e){return new mV(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n){this.db=e,this.garbageCollector=gV(this,n)}Jn(e){const n=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Xn(e){let n=0;return this.Yn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Yn(e,n){return this.er(e,(r,i)=>n(i))}addReference(e,n,r){return yu(e,r)}removeReference(e,n,r){return yu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return yu(e,n)}tr(e,n){return function(i,s){let o=!1;return uT(i).Y(a=>lT(i,a,s).next(u=>(u&&(o=!0),D.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.er(e,(o,a)=>{if(a<=n){const u=this.tr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,J.min()),Ar(e).delete(function(f){return[0,Vt(f.path)]}(o))))});i.push(u)}}).next(()=>D.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return yu(e,n)}er(e,n){const r=Ar(e);let i,s=zt.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(s!==zt.oe&&n(new j(On(i)),s),s=c,i=u):s=zt.oe}).next(()=>{s!==zt.oe&&n(new j(On(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yu(t,e){return Ar(t).put(function(r,i){return{targetId:0,path:Vt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.changes=new si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ke.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return mi(e).put(r)}removeEntry(e,n,r){return mi(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ic(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.nr(e,r)))}getEntry(e,n){let r=ke.newInvalidDocument(n);return mi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(oa(n))},(i,s)=>{r=this.rr(n,s)}).next(()=>r)}ir(e,n){let r={size:0,document:ke.newInvalidDocument(n)};return mi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(oa(n))},(i,s)=>{r={document:this.rr(n,s),size:Sc(s)}}).next(()=>r)}getEntries(e,n){let r=$t();return this.sr(e,n,(i,s)=>{const o=this.rr(i,s);r=r.insert(i,o)}).next(()=>r)}_r(e,n){let r=$t(),i=new be(j.comparator);return this.sr(e,n,(s,o)=>{const a=this.rr(s,o);r=r.insert(s,a),i=i.insert(s,Sc(o))}).next(()=>({documents:r,ar:i}))}sr(e,n,r){if(n.isEmpty())return D.resolve();let i=new Ie(_v);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(oa(i.first()),oa(i.last())),o=i.getIterator();let a=o.getNext();return mi(e).J({index:"documentKeyIndex",range:s},(u,c,d)=>{const f=j.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&_v(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(oa(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ic(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mi(e).U(IDBKeyRange.bound(a,u,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=$t();for(const f of c){const p=this.rr(j.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(El(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=$t();const o=yv(n,r),a=yv(n,sn.max());return mi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,d)=>{const f=this.rr(j.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new vV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return gv(e).get("remoteDocumentGlobalKey").next(n=>(H(!!n),n))}nr(e,n){return gv(e).put("remoteDocumentGlobalKey",n)}rr(e,n){if(n){const r=nV(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return ke.newInvalidDocument(e)}}function hT(t){return new _V(t)}class vV extends cT{constructor(e,n){super(),this.ur=e,this.trackRemovals=n,this.cr=new si(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ie((s,o)=>ie(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.cr.get(s);if(n.push(this.ur.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=nv(this.ur.serializer,o);i=i.add(s.path.popLast());const c=Sc(u);r+=c-a.size,n.push(this.ur.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=nv(this.ur.serializer,o.convertToNoDocument(J.min()));n.push(this.ur.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ur.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ur.updateMetadata(e,r)),D.waitFor(n)}getFromCache(e,n){return this.ur.ir(e,n).next(r=>(this.cr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ur._r(e,n).next(({documents:r,ar:i})=>(i.forEach((s,o)=>{this.cr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function gv(t){return nt(t,"remoteDocumentGlobal")}function mi(t){return nt(t,"remoteDocumentsV14")}function oa(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yv(t,e){const n=e.documentKey.path.toArray();return[t,Ic(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function _v(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ie(n[s],r[s]),i)return i;return i=ie(n.length,r.length),i||(i=ie(n[n.length-2],r[r.length-2]),i||ie(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pa(r.mutation,i,jt.empty(),Me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=Mn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=fa();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Mn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=$t();const o=xa(),a=function(){return xa()}();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof lr)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Pa(d.mutation,c,d.mutation.getFieldMask(),Me.now())):o.set(c.key,jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new wV(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=xa();let i=new be((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||jt.empty();d=a.applyToLocalView(c,d),r.set(u,d);const f=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,f=CI();d.forEach(p=>{if(!s.has(p)){const g=LI(n.get(p),r.get(p));g!==null&&f.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):am(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):D.resolve(Mn());let a=-1,u=s;return o.next(c=>D.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?D.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,se())).next(d=>({batchId:a,changes:RI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let i=fa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=fa();return this.indexManager.getCollectionParents(e,s).next(a=>D.forEach(a,u=>{const c=function(f,p){return new ar(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,ke.newInvalidDocument(d)))});let a=fa();return o.forEach((u,c)=>{const d=s.get(u);d!==void 0&&Pa(d.mutation,c,jt.empty(),Me.now()),El(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return D.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:He(i.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(i){return{name:i.name,query:mm(i.bundledQuery),readTime:He(i.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this.overlays=new be(j.comparator),this.Pr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Mn();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Pr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const i=Mn(),s=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return D.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Mn(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Mn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return D.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dm(n,r));let s=this.Pr.get(n);s===void 0&&(s=se(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this.Ir=new Ie(rt.Tr),this.Er=new Ie(rt.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Ir=this.Ir.add(r),this.Er=this.Er.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new rt(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new j(new ce([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.Er.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const n=new j(new ce([])),r=new rt(n,e),i=new rt(n,e+1);let s=se();return this.Er.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.yr=n}static Tr(e,n){return j.comparator(e.key,n.key)||ie(e.yr,n.yr)}static dr(e,n){return ie(e.yr,n.yr)||j.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Ie(rt.Tr)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cm(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Dr(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const a=this.br(o.yr);s.push(a)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(ie);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),D.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;j.isDocumentKey(s)||(s=s.child(""));const o=new rt(new j(s),0);let a=new Ie(ie);return this.Sr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.yr)),!0)},o),D.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){H(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return D.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new rt(n,0),i=this.Sr.firstAfterOrEqual(r);return D.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.Fr=e,this.docs=function(){return new be(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():ke.newInvalidDocument(n))}getEntries(e,n){let r=$t();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ke.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=$t();const o=n.path,a=new j(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||nm(iI(d),r)<=0||(i.has(d.key)||El(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,n,r,i){W()}Mr(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bV(this)}getSize(e){return D.resolve(this.size)}}class bV extends cT{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.persistence=e,this.Or=new si(n=>qi(n),vl),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new _m,this.targetCount=0,this.Br=Hi.Ln()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),D.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Hi(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.Qn(n),D.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Lr.mr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.Lr.Ar(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.Lr.Vr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Lr.mr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Lr.pr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.Lr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.kr={},this.overlays={},this.qr=new zt(0),this.Qr=!1,this.Qr=!0,this.Kr=new TV,this.referenceDelegate=e(this),this.$r=new xV(this),this.indexManager=new cV,this.remoteDocumentCache=function(i){return new AV(i)}(r=>this.referenceDelegate.Ur(r)),this.serializer=new rT(n),this.Wr=new EV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new SV(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);const i=new PV(this.qr.next());return this.referenceDelegate.Gr(),r(i).next(s=>this.referenceDelegate.zr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}jr(e,n){return D.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class PV extends oI{constructor(e){super(),this.currentSequenceNumber=e}}class ah{constructor(e){this.persistence=e,this.Hr=new _m,this.Jr=null}static Yr(e){return new ah(e)}get Zr(){if(this.Jr)return this.Jr;throw W()}addReference(e,n,r){return this.Hr.addReference(r,n),this.Zr.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.Hr.removeReference(r,n),this.Zr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Zr.add(n.toString()),D.resolve()}removeTarget(e,n){this.Hr.mr(n.targetId).forEach(i=>this.Zr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Zr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Gr(){this.Jr=new Set}zr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Zr,r=>{const i=j.fromPath(r);return this.Xr(e,i).next(s=>{s||n.removeEntry(i,J.min())})}).next(()=>(this.Jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Xr(e,n).next(r=>{r?this.Zr.delete(n.toString()):this.Zr.add(n.toString())})}Ur(e){return 0}Xr(e,n){return D.or([()=>D.resolve(this.Hr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.jr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.serializer=e}O(e,n,r,i){const s=new th("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D_,{unique:!0}),u.createObjectStore("documentMutations")}(e),vv(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=D.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),vv(e)),o=o.next(()=>function(u){const c=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",D_,{unique:!0});const f=c.store("mutations"),p=d.map(g=>f.put(g));return D.waitFor(p)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ti(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ni(s)))),r<7&&i>=7&&(o=o.next(()=>this.ri(s))),r<8&&i>=8&&(o=o.next(()=>this.ii(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.si(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const c=u.createObjectStore("documentOverlays",{keyPath:uk});c.createIndex("collectionPathOverlayIndex",ck,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",hk,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const c=u.createObjectStore("remoteDocumentsV14",{keyPath:XC});c.createIndex("documentKeyIndex",ZC),c.createIndex("collectionGroupIndex",ek)}(e)).next(()=>this.oi(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this._i(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:sk}).createIndex("sequenceNumberIndex",ok,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:ak}).createIndex("documentKeyIndex",lk,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ni(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Sc(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ti(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>D.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>D.forEach(a,u=>{H(u.userId===s.userId);const c=Ei(this.serializer,u);return aT(e,s.userId,c).next(()=>{})}))}))}ri(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new ce(o),c=function(f){return[0,Vt(f)]}(u);s.push(n.get(c).next(d=>d?D.resolve():(f=>n.put({targetId:0,path:Vt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>D.waitFor(s))})}ii(e,n){e.createObjectStore("collectionParents",{keyPath:ik});const r=n.store("collectionParents"),i=new ym,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Vt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new ce(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],c)=>{const d=On(a);return s(d.popLast())}))}si(e){const n=e.store("targets");return n.J((r,i)=>{const s=ma(i),o=iT(this.serializer,s);return n.put(o)})}oi(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),u=function(f){return f.document?new j(ce.fromString(f.document.name).popFirst(5)):f.noDocument?j.fromSegments(f.noDocument.path):f.unknownDocument?j.fromSegments(f.unknownDocument.path):W()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>D.waitFor(i))}_i(e,n){const r=n.store("mutations"),i=hT(this.serializer),s=new fT(ah.Yr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var c;let d=(c=a.get(u.userId))!==null&&c!==void 0?c:se();Ei(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),D.forEach(a,(u,c)=>{const d=new st(c),f=sh.lt(this.serializer,d),p=s.getIndexManager(d),g=oh.lt(d,this.serializer,p,s.referenceDelegate);return new dT(i,g,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Af(n,zt.oe),u).next()})})}}function vv(t){t.createObjectStore("targetDocuments",{keyPath:nk}).createIndex("documentTargetsIndex",rk,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tk,{unique:!0}),t.createObjectStore("targetGlobal")}const _d="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vm{constructor(e,n,r,i,s,o,a,u,c,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ai=s,this.window=o,this.document=a,this.ui=c,this.ci=d,this.li=f,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=p=>Promise.resolve(),!vm.D())throw new F(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yV(this,i),this.di=n+"main",this.serializer=new rT(u),this.Ai=new Bn(this.di,this.li,new RV(this.serializer)),this.Kr=new iV,this.$r=new dV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hT(this.serializer),this.Wr=new rV,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,d===!1&&Qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(N.FAILED_PRECONDITION,_d);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.$r.getHighestSequenceNumber(e))}).then(e=>{this.qr=new zt(e,this.ui)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ai&&this.Ai.close(),Promise.reject(e)))}pi(e){return this.Ei=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget(async()=>{this.started&&await this.Vi()}))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_u(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.yi(e).next(n=>{n||(this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.Si(e).next(()=>!1):!!n&&this.bi(e).next(()=>!0))).catch(e=>{if(ii(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ai.enqueueRetryable(()=>this.Ei(e)),this.isPrimary=e})}yi(e){return aa(e).get("owner").next(n=>D.resolve(this.Di(n)))}Ci(e){return _u(e).delete(this.clientId)}async vi(){if(this.isPrimary&&!this.Fi(this.Ti,18e5)){this.Ti=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=nt(n,"clientMetadata");return r.U().next(i=>{const s=this.Mi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return D.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ri)for(const n of e)this.Ri.removeItem(this.xi(n.clientId))}}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Vi().then(()=>this.vi()).then(()=>this.gi()))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?D.resolve(!0):aa(e).get("owner").next(n=>{if(n!==null&&this.Fi(n.leaseTimestampMs,5e3)&&!this.Oi(n.ownerId)){if(this.Di(n)&&this.networkEnabled)return!0;if(!this.Di(n)){if(!n.allowTabSynchronization)throw new F(N.FAILED_PRECONDITION,_d);return!1}}return!(!this.networkEnabled||!this.inForeground)||_u(e).U().next(r=>this.Mi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&L("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Qr=!1,this.Ni(),this.Ii&&(this.Ii.cancel(),this.Ii=null),this.Li(),this.Bi(),await this.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Af(e,zt.oe);return this.Si(n).next(()=>this.Ci(n))}),this.Ai.close(),this.ki()}Mi(e,n){return e.filter(r=>this.Fi(r.updateTimeMs,n)&&!this.Oi(r.clientId))}qi(){return this.runTransaction("getActiveClients","readonly",e=>_u(e).U().next(n=>this.Mi(n,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,n){return oh.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hV(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return sh.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,n,r){L("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===17?pk:u===16?fk:u===15?im:u===14?dI:u===13?hI:u===12?dk:u===11?cI:void W()}(this.li);let o;return this.Ai.runTransaction(e,i,s,a=>(o=new Af(a,this.qr?this.qr.next():zt.oe),n==="readwrite-primary"?this.yi(o).next(u=>!!u||this.wi(o)).next(u=>{if(!u)throw Qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)),new F(N.FAILED_PRECONDITION,sI);return r(o)}).next(u=>this.bi(o).next(()=>u)):this.Qi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Qi(e){return aa(e).get("owner").next(n=>{if(n!==null&&this.Fi(n.leaseTimestampMs,5e3)&&!this.Oi(n.ownerId)&&!this.Di(n)&&!(this.ci||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(N.FAILED_PRECONDITION,_d)})}bi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return aa(e).put("owner",n)}static D(){return Bn.D()}Si(e){const n=aa(e);return n.get("owner").next(r=>this.Di(r)?(L("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):D.resolve())}Fi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Qe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}mi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Pi=()=>{this.ai.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Vi()))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground=this.document.visibilityState==="visible")}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.hi=()=>{this.Ni();const n=/(?:Version|Mobile)\/1[456]/;VE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var n;try{const r=((n=this.Ri)===null||n===void 0?void 0:n.getItem(this.xi(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){Qe("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch{}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function aa(t){return nt(t,"owner")}function _u(t){return nt(t,"clientMetadata")}function wm(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ki=r,this.$i=i}static Ui(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Em(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return VE()?8:aI(gc())>0?6:4}()}initialize(e,n){this.Hi=e,this.indexManager=n,this.Wi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new CV;return this.Zi(e,n,o).next(a=>{if(s.result=a,this.Gi)return this.Xi(e,n,o,a.size)})}).next(()=>s.result)}Xi(e,n,r,i){return r.documentReadCount<this.zi?(ws()<=de.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),D.resolve()):(ws()<=de.DEBUG&&L("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ji*i?(ws()<=de.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dt(n))):D.resolve())}Ji(e,n){if(W_(n))return D.resolve(null);let r=Dt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ec(n,null,"F"),r=Dt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.Hi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.es(n,a);return this.ts(n,c,o,u.readTime)?this.Ji(e,Ec(n,null,"F")):this.ns(e,c,n,u)}))})))}Yi(e,n,r,i){return W_(n)||i.isEqual(J.min())?D.resolve(null):this.Hi.getDocuments(e,r).next(s=>{const o=this.es(n,s);return this.ts(n,o,r,i)?D.resolve(null):(ws()<=de.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Es(n)),this.ns(e,o,n,rI(i,-1)).next(a=>a))})}es(e,n){let r=new Ie(xI(e));return n.forEach((i,s)=>{El(e,s)&&(r=r.add(s))}),r}ts(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zi(e,n,r){return ws()<=de.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Es(n)),this.Hi.getDocumentsMatchingQuery(e,n,sn.min(),r)}ns(e,n,r,i){return this.Hi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,r,i){this.persistence=e,this.rs=n,this.serializer=i,this.ss=new be(ie),this.os=new si(s=>qi(s),vl),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(r)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dT(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ss))}}function mT(t,e,n,r){return new kV(t,e,n,r)}async function gT(t,e){const n=q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.cs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=se();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function VV(t,e){const n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.us.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const f=c.batch,p=f.keys();let g=D.resolve();return p.forEach(_=>{g=g.next(()=>d.getEntry(u,_)).next(w=>{const T=c.docVersions.get(_);H(T!==null),w.version.compareTo(T)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),d.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function yT(t){const e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.$r.getLastRemoteSnapshotVersion(n))}function DV(t,e){const n=q(t),r=e.snapshotVersion;let i=n.ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.us.newChangeBuffer({trackRemovals:!0});i=n.ss;const a=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;a.push(n.$r.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.$r.addMatchingKeys(s,d.addedDocuments,f)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(We.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),function(w,T,S){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,g,d)&&a.push(n.$r.updateTargetData(s,g))});let u=$t(),c=se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(_T(s,o,e.documentUpdates).next(d=>{u=d.hs,c=d.Ps})),!r.isEqual(J.min())){const d=n.$r.getLastRemoteSnapshotVersion(s).next(f=>n.$r.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return D.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ss=i,s))}function _T(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=$t();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{hs:o,Ps:i}})}function NV(t,e){const n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lo(t,e){const n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.$r.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):n.$r.allocateTargetId(r).next(o=>(i=new Jn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.$r.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ss=n.ss.insert(r.targetId,r),n.os.set(e,r.targetId)),r})}async function uo(t,e,n){const r=q(t),i=r.ss.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ii(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ss=r.ss.remove(e),r.os.delete(i.target)}function Ac(t,e,n){const r=q(t);let i=J.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const f=q(u),p=f.os.get(d);return p!==void 0?D.resolve(f.ss.get(p)):f.$r.getTargetData(c,d)}(r,o,Dt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.rs.getDocumentsMatchingQuery(o,e,n?i:J.min(),n?s:se())).next(a=>(ET(r,bI(e),a),{documents:a,Is:s})))}function vT(t,e){const n=q(t),r=q(n.$r),i=n.ss.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function wT(t,e){const n=q(t),r=n._s.get(e)||J.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.us.getAllFromCollectionGroup(i,e,rI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ET(n,e,i),i))}function ET(t,e,n){let r=t._s.get(e)||J.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t._s.set(e,r)}async function OV(t,e,n,r){const i=q(t);let s=se(),o=$t();for(const c of n){const d=e.Ts(c.metadata.name);c.document&&(s=s.add(d));const f=e.Es(c);f.setReadTime(e.ds(c.metadata.readTime)),o=o.insert(d,f)}const a=i.us.newChangeBuffer({trackRemovals:!0}),u=await lo(i,function(d){return Dt(To(ce.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>_T(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.$r.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.$r.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.hs,d.Ps)).next(()=>d.hs)))}async function MV(t,e,n=se()){const r=await lo(t,Dt(mm(e.bundledQuery))),i=q(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=He(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Wr.saveNamedQuery(s,e);const a=r.withResumeToken(We.EMPTY_BYTE_STRING,o);return i.ss=i.ss.insert(a.targetId,a),i.$r.updateTargetData(s,a).next(()=>i.$r.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.$r.addMatchingKeys(s,n,r.targetId)).next(()=>i.Wr.saveNamedQuery(s,e))})}function wv(t,e){return`firestore_clients_${t}_${e}`}function Ev(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function vd(t,e){return`firestore_targets_${t}_${e}`}class bc{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static As(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new F(i.error.code,i.error.message))),o?new bc(e,n,i.state,s):(Qe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ra{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static As(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new F(r.error.code,r.error.message))),s?new Ra(e,r.state,i):(Qe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xc{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static As(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=lm();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=lI(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new xc(e,s):(Qe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Im{constructor(e,n){this.clientId=e,this.onlineState=n}static As(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Im(n.clientId,n.onlineState):(Qe("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bf{constructor(){this.activeTargetIds=lm()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wd{constructor(e,n,r,i,s){this.window=e,this.ai=n,this.persistenceKey=r,this.gs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new be(ie),this.started=!1,this.Ss=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.bs=wv(this.persistenceKey,this.gs),this.Ds=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ws=this.ws.insert(this.gs,new Bf),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ms=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.xs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.qi();for(const r of e){if(r===this.gs)continue;const i=this.getItem(wv(this.persistenceKey,r));if(i){const s=xc.As(r,i);s&&(this.ws=this.ws.insert(s.clientId,s))}}this.Os();const n=this.storage.getItem(this.Ms);if(n){const r=this.Ns(n);r&&this.Ls(r)}for(const r of this.Ss)this.ys(r);this.Ss=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let n=!1;return this.ws.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,n,r){this.ks(e,n,r),this.qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(vd(this.persistenceKey,e));if(r){const i=Ra.As(e,r);i&&(n=i.state)}}return this.Qs.Vs(e),this.Os(),n}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vd(this.persistenceKey,e))}updateQueryState(e,n,r){this.Ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return L("SharedClientState","READ",e,n),n}setItem(e,n){L("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){const n=e;if(n.storageArea===this.storage){if(L("SharedClientState","EVENT",n.key,n.newValue),n.key===this.bs)return void Qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Ws(n.key);return this.Gs(r,null)}{const r=this.zs(n.key,n.newValue);if(r)return this.Gs(r.clientId,r)}}else if(this.vs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Js(n.key,n.newValue);if(r)return this.Ys(r)}}else if(n.key===this.Ms){if(n.newValue!==null){const r=this.Ns(n.newValue);if(r)return this.Ls(r)}}else if(n.key===this.Ds){const r=function(s){let o=zt.oe;if(s!=null)try{const a=JSON.parse(s);H(typeof a=="number"),o=a}catch(a){Qe("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==zt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.xs){const r=this.Zs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Xs(i)))}}}else this.Ss.push(n)})}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,n,r){const i=new bc(this.currentUser,e,n,r),s=Ev(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Rs())}qs(e){const n=Ev(this.persistenceKey,this.currentUser,e);this.removeItem(n)}$s(e){const n={clientId:this.gs,onlineState:e};this.storage.setItem(this.Ms,JSON.stringify(n))}Ks(e,n,r){const i=vd(this.persistenceKey,e),s=new Ra(e,n,r);this.setItem(i,s.Rs())}Us(e){const n=JSON.stringify(Array.from(e));this.setItem(this.xs,n)}Ws(e){const n=this.Cs.exec(e);return n?n[1]:null}zs(e,n){const r=this.Ws(e);return xc.As(r,n)}js(e,n){const r=this.vs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return bc.As(new st(s),i,n)}Js(e,n){const r=this.Fs.exec(e),i=Number(r[1]);return Ra.As(i,n)}Ns(e){return Im.As(e)}Zs(e){return JSON.parse(e)}async Hs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.eo(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,n){const r=n?this.ws.insert(e,n):this.ws.remove(e),i=this.Bs(this.ws),s=this.Bs(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.ro(o,a).then(()=>{this.ws=r})}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let n=lm();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class IT{constructor(){this.io=new Bf,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,n,r){this.so[e]=n}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new Bf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu=null;function Ed(){return vu===null?vu=function(){return 268435456+Math.round(2147483648*Math.random())}():vu++,"0x"+vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class UV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=r+"://"+n.host,this.Do=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get vo(){return!1}Fo(n,r,i,s,o){const a=Ed(),u=this.Mo(n,r.toUriEncodedString());L("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(c,s,o),this.Oo(n,u,c,i).then(d=>(L("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Rn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}No(n,r,i,s,o,a){return this.Fo(n,r,i,s,o)}xo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Mo(n,r){const i=LV[n];return`${this.bo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,n,r,i){const s=Ed();return new Promise((o,a)=>{const u=new QE;u.setWithCredentials(!0),u.listenOnce(YE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Du.NO_ERROR:const d=u.getResponseJson();L(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Du.TIMEOUT:L(wt,`RPC '${e}' ${s} timed out`),a(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:const f=u.getStatus();if(L(wt,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const _=function(T){const S=T.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(S)>=0?S:N.UNKNOWN}(g.status);a(new F(_,g.message))}else a(new F(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new F(N.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{L(wt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);L(wt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Lo(e,n,r){const i=Ed(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ZE(),a=XE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new HE({})),this.xo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");L(wt,`Creating RPC '${e}' stream ${i}: ${d}`,u);const f=o.createWebChannel(d,u);let p=!1,g=!1;const _=new BV({Po:T=>{g?L(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(p||(L(wt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),L(wt,`RPC '${e}' stream ${i} sending:`,T),f.send(T))},Io:()=>f.close()}),w=(T,S,E)=>{T.listen(S,I=>{try{E(I)}catch(k){setTimeout(()=>{throw k},0)}})};return w(f,da.EventType.OPEN,()=>{g||(L(wt,`RPC '${e}' stream ${i} transport opened.`),_.po())}),w(f,da.EventType.CLOSE,()=>{g||(g=!0,L(wt,`RPC '${e}' stream ${i} transport closed`),_.wo())}),w(f,da.EventType.ERROR,T=>{g||(g=!0,Rn(wt,`RPC '${e}' stream ${i} transport errored:`,T),_.wo(new F(N.UNAVAILABLE,"The operation could not be completed")))}),w(f,da.EventType.MESSAGE,T=>{var S;if(!g){const E=T.data[0];H(!!E);const I=E,k=I.error||((S=I[0])===null||S===void 0?void 0:S.error);if(k){L(wt,`RPC '${e}' stream ${i} received error:`,k);const M=k.status;let B=function(b){const P=Ye[b];if(P!==void 0)return zI(P)}(M),A=k.message;B===void 0&&(B=N.INTERNAL,A="Unknown error status: "+M+" with message "+k.message),g=!0,_.wo(new F(B,A)),f.close()}else L(wt,`RPC '${e}' stream ${i} received:`,E),_.So(E)}}),w(a,JE.STAT_EVENT,T=>{T.stat===Tf.PROXY?L(wt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Tf.NOPROXY&&L(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.yo()},0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){return typeof window<"u"?window:null}function Uu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){return new Gk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ai=e,this.timerId=n,this.Bo=r,this.ko=i,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const n=Math.floor(this.Qo+this.Go()),r=Math.max(0,Date.now()-this.$o),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Qo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,i,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,r,i,s,o,a,u){this.ai=e,this.jo=r,this.Ho=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Tm(e,n)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}async stop(){this.t_()&&await this.close(0)}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}async o_(){if(this.n_())return this.close(0)}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}async close(e,n){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Qe(n.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Vo(n)}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),n=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Jo===n&&this.h_(r,i)},r=>{e(()=>{const i=new F(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.P_(i)})})}h_(e,n){const r=this.l_(this.Jo);this.stream=this.I_(e,n),this.stream.To(()=>{r(()=>this.listener.To())}),this.stream.Ao(()=>{r(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(i=>{r(()=>this.P_(i))}),this.stream.onMessage(i=>{r(()=>++this.Xo==1?this.T_(i):this.onNext(i))})}r_(){this.state=5,this.e_.Wo(async()=>{this.state=0,this.start()})}P_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return n=>{this.ai.enqueueAndForget(()=>this.Jo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zV extends ST{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}I_(e,n){return this.connection.Lo("Listen",e,n)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const n=Hk(this.serializer,e),r=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?He(o.readTime):J.min()}(e);return this.listener.E_(n,r)}d_(e){const n={};n.database=Nf(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=vc(u)?{documents:JI(s,u)}:{query:XI(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WI(s,o.resumeToken);const c=Vf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=ao(s,o.snapshotVersion.toTimestamp());const c=Vf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Jk(this.serializer,e);r&&(n.labels=r),this.__(n)}A_(e){const n={};n.database=Nf(this.serializer),n.removeTarget=e,this.__(n)}}class jV extends ST{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,n){return this.connection.Lo("Write",e,n)}T_(e){return H(!!e.streamToken),this.lastStreamToken=e.streamToken,H(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){H(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const n=Yk(e.writeResults,e.commitTime),r=He(e.commitTime);return this.listener.f_(r,n)}g_(){const e={};e.database=Nf(this.serializer),this.__(e)}V_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ll(this.serializer,r))};this.__(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.p_=!1}y_(){if(this.p_)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,n,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,Df(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}No(e,n,r,i,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.No(e,Df(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class qV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Qe(n),this.b_=!1):L("OnlineStateTracker",n)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(o=>{r.enqueueAndForget(async()=>{oi(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=q(u);c.N_.add(4),await bo(c),c.k_.set("Unknown"),c.N_.delete(4),await bl(c)}(this))})}),this.k_=new qV(r,i)}}async function bl(t){if(oi(t))for(const e of t.L_)await e(!0)}async function bo(t){for(const e of t.L_)await e(!1)}function lh(t,e){const n=q(t);n.O_.has(e.targetId)||(n.O_.set(e.targetId,e),bm(n)?Am(n):Po(n).n_()&&Sm(n,e))}function co(t,e){const n=q(t),r=Po(n);n.O_.delete(e),r.n_()&&AT(n,e),n.O_.size===0&&(r.n_()?r.s_():oi(n)&&n.k_.set("Unknown"))}function Sm(t,e){if(t.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Po(t).d_(e)}function AT(t,e){t.q_.xe(e),Po(t).A_(e)}function Am(t){t.q_=new jk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.O_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Po(t).start(),t.k_.D_()}function bm(t){return oi(t)&&!Po(t).t_()&&t.O_.size>0}function oi(t){return q(t).N_.size===0}function bT(t){t.q_=void 0}async function GV(t){t.k_.set("Online")}async function KV(t){t.O_.forEach((e,n)=>{Sm(t,e)})}async function QV(t,e){bT(t),bm(t)?(t.k_.F_(e),Am(t)):t.k_.set("Unknown")}async function HV(t,e,n){if(t.k_.set("Online"),e instanceof qI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.O_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.O_.delete(a),i.q_.removeTarget(a))}(t,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pc(t,r)}else if(e instanceof Bu?t.q_.Ke(e):e instanceof $I?t.q_.He(e):t.q_.We(e),!n.isEqual(J.min()))try{const r=await yT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.O_.get(c);d&&s.O_.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=s.O_.get(u);if(!d)return;s.O_.set(u,d.withResumeToken(We.EMPTY_BYTE_STRING,d.snapshotVersion)),AT(s,u);const f=new Jn(d.target,u,c,d.sequenceNumber);Sm(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){L("RemoteStore","Failed to raise snapshot:",r),await Pc(t,r)}}async function Pc(t,e,n){if(!ii(e))throw e;t.N_.add(1),await bo(t),t.k_.set("Offline"),n||(n=()=>yT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),t.N_.delete(1),await bl(t)})}function xT(t,e){return e().catch(n=>Pc(t,n,e))}async function xo(t){const e=q(t),n=Jr(e);let r=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;YV(e);)try{const i=await NV(e.localStore,r);if(i===null){e.x_.length===0&&n.s_();break}r=i.batchId,JV(e,i)}catch(i){await Pc(e,i)}PT(e)&&RT(e)}function YV(t){return oi(t)&&t.x_.length<10}function JV(t,e){t.x_.push(e);const n=Jr(t);n.n_()&&n.R_&&n.V_(e.mutations)}function PT(t){return oi(t)&&!Jr(t).t_()&&t.x_.length>0}function RT(t){Jr(t).start()}async function XV(t){Jr(t).g_()}async function ZV(t){const e=Jr(t);for(const n of t.x_)e.V_(n.mutations)}async function eD(t,e,n){const r=t.x_.shift(),i=hm.from(r,e,n);await xT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xo(t)}async function tD(t,e){e&&Jr(t).R_&&await async function(r,i){if(function(o){return UI(o)&&o!==N.ABORTED}(i.code)){const s=r.x_.shift();Jr(r).i_(),await xT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await xo(r)}}(t,e),PT(t)&&RT(t)}async function Tv(t,e){const n=q(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const r=oi(n);n.N_.add(3),await bo(n),r&&n.k_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.N_.delete(3),await bl(n)}async function Uf(t,e){const n=q(t);e?(n.N_.delete(2),await bl(n)):e||(n.N_.add(2),await bo(n),n.k_.set("Unknown"))}function Po(t){return t.Q_||(t.Q_=function(n,r,i){const s=q(n);return s.y_(),new zV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{To:GV.bind(null,t),Ao:KV.bind(null,t),Vo:QV.bind(null,t),E_:HV.bind(null,t)}),t.L_.push(async e=>{e?(t.Q_.i_(),bm(t)?Am(t):t.k_.set("Unknown")):(await t.Q_.stop(),bT(t))})),t.Q_}function Jr(t){return t.K_||(t.K_=function(n,r,i){const s=q(n);return s.y_(),new jV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{To:()=>Promise.resolve(),Ao:XV.bind(null,t),Vo:tD.bind(null,t),m_:ZV.bind(null,t),f_:eD.bind(null,t)}),t.L_.push(async e=>{e?(t.K_.i_(),await xo(t)):(await t.K_.stop(),t.x_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.x_.length} pending writes`),t.x_=[]))})),t.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new at,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new xm(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ro(t,e){if(Qe("AsyncQueue",`${e}: ${t}`),ii(t))return new F(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=fa(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new qs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.U_=new be(j.comparator)}track(e){const n=e.doc.key,r=this.U_.get(n);r?e.type!==0&&r.type===3?this.U_=this.U_.insert(n,e):e.type===3&&r.type!==1?this.U_=this.U_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.U_=this.U_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.U_=this.U_.remove(n):e.type===1&&r.type===2?this.U_=this.U_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):W():this.U_=this.U_.insert(n,e)}W_(){const e=[];return this.U_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ho(e,n,qs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}}class rD{constructor(){this.queries=Av(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(n,r){const i=q(n),s=i.queries;i.queries=Av(),s.forEach((o,a)=>{for(const u of a.z_)u.onError(r)})})(this,new F(N.ABORTED,"Firestore shutting down"))}}function Av(){return new si(t=>AI(t),wl)}async function Pm(t,e){const n=q(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.j_()&&e.H_()&&(r=2):(s=new nD,r=e.H_()?0:1);try{switch(r){case 0:s.G_=await n.onListen(i,!0);break;case 1:s.G_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ro(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.z_.push(e),e.Y_(n.onlineState),s.G_&&e.Z_(s.G_)&&Cm(n)}async function Rm(t,e){const n=q(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.z_.indexOf(e);o>=0&&(s.z_.splice(o,1),s.z_.length===0?i=e.H_()?0:1:!s.j_()&&e.H_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iD(t,e){const n=q(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.z_)a.Z_(i)&&(r=!0);o.G_=i}}r&&Cm(n)}function sD(t,e,n){const r=q(t),i=r.queries.get(e);if(i)for(const s of i.z_)s.onError(n);r.queries.delete(e)}function Cm(t){t.J_.forEach(e=>{e.next()})}var zf,bv;(bv=zf||(zf={})).X_="default",bv.Cache="cache";class km{constructor(e,n,r){this.query=e,this.ea=n,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=r||{}}Z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ta?this.ra(e)&&(this.ea.next(e),n=!0):this.ia(e,this.onlineState)&&(this.sa(e),n=!0),this.na=e,n}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let n=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),n=!0),n}ia(e,n){if(!e.fromCache||!this.H_())return!0;const r=n!=="Offline";return(!this.options.oa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ra(e){if(e.docChanges.length>0)return!0;const n=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}sa(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==zf.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n){this._a=e,this.byteLength=n}aa(){return"metadata"in this._a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.serializer=e}Ts(e){return Un(this.serializer,e)}Es(e){return e.metadata.exists?YI(this.serializer,e.document,!1):ke.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return He(e)}}class aD{constructor(e,n,r){this.ua=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CT(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++n;const r=ce.fromString(e._a.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}la(e){const n=new Map,r=new xv(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ts(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||se()).add(s);n.set(o,a)}}return n}async complete(){const e=await OV(this.localStore,new xv(this.serializer),this.documents,this.ua.id),n=this.la(this.documents);for(const r of this.queries)await MV(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ha:this.collectionGroups,Pa:e}}}function CT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.key=e}}class VT{constructor(e){this.key=e}}class DT{constructor(e,n){this.query=e,this.Ia=n,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=se(),this.mutatedKeys=se(),this.da=xI(e),this.Aa=new qs(this.da)}get Ra(){return this.Ia}Va(e,n){const r=n?n.ma:new Sv,i=n?n.Aa:this.Aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),g=El(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;p&&g?p.data.isEqual(g.data)?_!==w&&(r.track({type:3,doc:g}),T=!0):this.fa(p,g)||(r.track({type:2,doc:g}),T=!0,(u&&this.da(g,u)>0||c&&this.da(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),T=!0):p&&!g&&(r.track({type:1,doc:p}),T=!0,(u||c)&&(a=!0)),T&&(g?(o=o.add(g),s=w?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Aa:o,ma:r,ts:a,mutatedKeys:s}}fa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const o=e.ma.W_();o.sort((d,f)=>function(g,_){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return w(g)-w(_)}(d.type,f.type)||this.da(d.doc,f.doc)),this.ga(r),i=i!=null&&i;const a=n&&!i?this.pa():[],u=this.Ea.size===0&&this.current&&!i?1:0,c=u!==this.Ta;return this.Ta=u,o.length!==0||c?{snapshot:new ho(this.query,e.Aa,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Sv,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(n=>this.Ia=this.Ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ia=this.Ia.delete(n)),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=se(),this.Aa.forEach(r=>{this.wa(r.key)&&(this.Ea=this.Ea.add(r.key))});const n=[];return e.forEach(r=>{this.Ea.has(r)||n.push(new VT(r))}),this.Ea.forEach(r=>{e.has(r)||n.push(new kT(r))}),n}Sa(e){this.Ia=e.Is,this.Ea=se();const n=this.Va(e.documents);return this.applyChanges(n,!0)}ba(){return ho.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}}class lD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uD{constructor(e){this.key=e,this.Da=!1}}class cD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new si(a=>AI(a),wl),this.Fa=new Map,this.Ma=new Set,this.xa=new be(j.comparator),this.Oa=new Map,this.Na=new _m,this.La={},this.Ba=new Map,this.ka=Hi.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}}async function hD(t,e,n=!0){const r=uh(t);let i;const s=r.va.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ba()):i=await NT(r,e,n,!0),i}async function dD(t,e){const n=uh(t);await NT(n,e,!0,!1)}async function NT(t,e,n,r){const i=await lo(t.localStore,Dt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Vm(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&lh(t.remoteStore,i),a}async function Vm(t,e,n,r,i){t.Qa=(f,p,g)=>async function(w,T,S,E){let I=T.view.Va(S);I.ts&&(I=await Ac(w.localStore,T.query,!1).then(({documents:A})=>T.view.Va(A,I)));const k=E&&E.targetChanges.get(T.targetId),M=E&&E.targetMismatches.get(T.targetId)!=null,B=T.view.applyChanges(I,w.isPrimaryClient,k,M);return jf(w,T.targetId,B.ya),B.snapshot}(t,f,p,g);const s=await Ac(t.localStore,e,!0),o=new DT(e,s.Is),a=o.Va(s.documents),u=Sl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);jf(t,n,c.ya);const d=new lD(e,n,o);return t.va.set(e,d),t.Fa.has(n)?t.Fa.get(n).push(e):t.Fa.set(n,[e]),c.snapshot}async function fD(t,e,n){const r=q(t),i=r.va.get(e),s=r.Fa.get(i.targetId);if(s.length>1)return r.Fa.set(i.targetId,s.filter(o=>!wl(o,e))),void r.va.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&co(r.remoteStore,i.targetId),fo(r,i.targetId)}).catch(ri)):(fo(r,i.targetId),await uo(r.localStore,i.targetId,!0))}async function pD(t,e){const n=q(t),r=n.va.get(e),i=n.Fa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),co(n.remoteStore,r.targetId))}async function mD(t,e,n){const r=Mm(t);try{const i=await function(o,a){const u=q(o),c=Me.now(),d=a.reduce((g,_)=>g.add(_.key),se());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=$t(),w=se();return u.us.getEntries(g,d).next(T=>{_=T,_.forEach((S,E)=>{E.isValidDocument()||(w=w.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,_)).next(T=>{f=T;const S=[];for(const E of a){const I=Bk(E,f.get(E.key).overlayedDocument);I!=null&&S.push(new lr(E.key,I,gI(I.value.mapValue),Oe.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,S,a)}).next(T=>{p=T;const S=T.applyToLocalDocumentSet(f,w);return u.documentOverlayCache.saveOverlays(g,T.batchId,S)})}).then(()=>({batchId:p.batchId,changes:RI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.La[o.currentUser.toKey()];c||(c=new be(ie)),c=c.insert(a,u),o.La[o.currentUser.toKey()]=c}(r,i.batchId,n),await ur(r,i.changes),await xo(r.remoteStore)}catch(i){const s=Ro(i,"Failed to persist write");n.reject(s)}}async function OT(t,e){const n=q(t);try{const r=await DV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Oa.get(s);o&&(H(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Da=!0:i.modifiedDocuments.size>0?H(o.Da):i.removedDocuments.size>0&&(H(o.Da),o.Da=!1))}),await ur(n,r,e)}catch(r){await ri(r)}}function Pv(t,e,n){const r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.va.forEach((s,o)=>{const a=o.view.Y_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=q(o);u.onlineState=a;let c=!1;u.queries.forEach((d,f)=>{for(const p of f.z_)p.Y_(a)&&(c=!0)}),c&&Cm(u)}(r.eventManager,e),i.length&&r.Ca.E_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gD(t,e,n){const r=q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Oa.get(e),s=i&&i.key;if(s){let o=new be(j.comparator);o=o.insert(s,ke.newNoDocument(s,J.min()));const a=se().add(s),u=new Tl(J.min(),new Map,new be(ie),o,a);await OT(r,u),r.xa=r.xa.remove(s),r.Oa.delete(e),Om(r)}else await uo(r.localStore,e,!1).then(()=>fo(r,e,n)).catch(ri)}async function yD(t,e){const n=q(t),r=e.batch.batchId;try{const i=await VV(n.localStore,e);Nm(n,r,null),Dm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ur(n,i)}catch(i){await ri(i)}}async function _D(t,e,n){const r=q(t);try{const i=await function(o,a){const u=q(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(H(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);Nm(r,e,n),Dm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ur(r,i)}catch(i){await ri(i)}}async function vD(t,e){const n=q(t);oi(n.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=q(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ba.get(r)||[];i.push(e),n.Ba.set(r,i)}catch(r){const i=Ro(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Dm(t,e){(t.Ba.get(e)||[]).forEach(n=>{n.resolve()}),t.Ba.delete(e)}function Nm(t,e,n){const r=q(t);let i=r.La[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.La[r.currentUser.toKey()]=i}}function fo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Fa.get(e))t.va.delete(r),n&&t.Ca.Ka(r,n);t.Fa.delete(e),t.isPrimaryClient&&t.Na.mr(e).forEach(r=>{t.Na.containsKey(r)||MT(t,r)})}function MT(t,e){t.Ma.delete(e.path.canonicalString());const n=t.xa.get(e);n!==null&&(co(t.remoteStore,n),t.xa=t.xa.remove(e),t.Oa.delete(n),Om(t))}function jf(t,e,n){for(const r of n)r instanceof kT?(t.Na.addReference(r.key,e),wD(t,r)):r instanceof VT?(L("SyncEngine","Document no longer in limbo: "+r.key),t.Na.removeReference(r.key,e),t.Na.containsKey(r.key)||MT(t,r.key)):W()}function wD(t,e){const n=e.key,r=n.path.canonicalString();t.xa.get(n)||t.Ma.has(r)||(L("SyncEngine","New document in limbo: "+n),t.Ma.add(r),Om(t))}function Om(t){for(;t.Ma.size>0&&t.xa.size<t.maxConcurrentLimboResolutions;){const e=t.Ma.values().next().value;t.Ma.delete(e);const n=new j(ce.fromString(e)),r=t.ka.next();t.Oa.set(r,new uD(n)),t.xa=t.xa.insert(n,r),lh(t.remoteStore,new Jn(Dt(To(n.path)),r,"TargetPurposeLimboResolution",zt.oe))}}async function ur(t,e,n){const r=q(t),i=[],s=[],o=[];r.va.isEmpty()||(r.va.forEach((a,u)=>{o.push(r.Qa(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Em.Ui(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.E_(i),await async function(u,c){const d=q(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>D.forEach(c,p=>D.forEach(p.Ki,g=>d.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>D.forEach(p.$i,g=>d.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!ii(f))throw f;L("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=d.ss.get(p),_=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(_);d.ss=d.ss.insert(p,w)}}}(r.localStore,s))}async function ED(t,e){const n=q(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());const r=await gT(n.localStore,e);n.currentUser=e,function(s,o){s.Ba.forEach(a=>{a.forEach(u=>{u.reject(new F(N.CANCELLED,o))})}),s.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ur(n,r.ls)}}function ID(t,e){const n=q(t),r=n.Oa.get(e);if(r&&r.Da)return se().add(r.key);{let i=se();const s=n.Fa.get(e);if(!s)return i;for(const o of s){const a=n.va.get(o);i=i.unionWith(a.view.Ra)}return i}}async function TD(t,e){const n=q(t),r=await Ac(n.localStore,e.query,!0),i=e.view.Sa(r);return n.isPrimaryClient&&jf(n,e.targetId,i.ya),i}async function SD(t,e){const n=q(t);return wT(n.localStore,e).then(r=>ur(n,r))}async function AD(t,e,n,r){const i=q(t),s=await function(a,u){const c=q(a),d=q(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Fn(f,u).next(p=>p?c.localDocuments.getDocuments(f,p):D.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await xo(i.remoteStore):n==="acknowledged"||n==="rejected"?(Nm(i,e,r||null),Dm(i,e),function(a,u){q(q(a).mutationQueue).xn(u)}(i.localStore,e)):W(),await ur(i,s)):L("SyncEngine","Cannot apply mutation batch with id: "+e)}async function bD(t,e){const n=q(t);if(uh(n),Mm(n),e===!0&&n.qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Rv(n,r.toArray());n.qa=!0,await Uf(n.remoteStore,!0);for(const s of i)lh(n.remoteStore,s)}else if(e===!1&&n.qa!==!1){const r=[];let i=Promise.resolve();n.Fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(fo(n,o),uo(n.localStore,o,!0))),co(n.remoteStore,o)}),await i,await Rv(n,r),function(o){const a=q(o);a.Oa.forEach((u,c)=>{co(a.remoteStore,c)}),a.Na.gr(),a.Oa=new Map,a.xa=new be(j.comparator)}(n),n.qa=!1,await Uf(n.remoteStore,!1)}}async function Rv(t,e,n){const r=q(t),i=[],s=[];for(const o of e){let a;const u=r.Fa.get(o);if(u&&u.length!==0){a=await lo(r.localStore,Dt(u[0]));for(const c of u){const d=r.va.get(c),f=await TD(r,d);f.snapshot&&s.push(f.snapshot)}}else{const c=await vT(r.localStore,o);a=await lo(r.localStore,c),await Vm(r,FT(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.E_(s),i}function FT(t){return SI(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xD(t){return function(n){return q(q(n).persistence).qi()}(q(t).localStore)}async function PD(t,e,n,r){const i=q(t);if(i.qa)return void L("SyncEngine","Ignoring unexpected query state notification.");const s=i.Fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await wT(i.localStore,bI(s[0])),a=Tl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",We.EMPTY_BYTE_STRING);await ur(i,o,a);break}case"rejected":await uo(i.localStore,e,!0),fo(i,e,r);break;default:W()}}async function RD(t,e,n){const r=uh(t);if(r.qa){for(const i of e){if(r.Fa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){L("SyncEngine","Adding an already active target "+i);continue}const s=await vT(r.localStore,i),o=await lo(r.localStore,s);await Vm(r,FT(s),o.targetId,!1,o.resumeToken),lh(r.remoteStore,o)}for(const i of n)r.Fa.has(i)&&await uo(r.localStore,i,!1).then(()=>{co(r.remoteStore,i),fo(r,i)}).catch(ri)}}function uh(t){const e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ID.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gD.bind(null,e),e.Ca.E_=iD.bind(null,e.eventManager),e.Ca.Ka=sD.bind(null,e.eventManager),e}function Mm(t){const e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_D.bind(null,e),e}function CD(t,e,n){const r=q(t);(async function(s,o,a){try{const u=await o.getMetadata();if(await function(g,_){const w=q(g),T=He(_.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",S=>w.Wr.getBundleMetadata(S,_.id)).then(S=>!!S&&S.createTime.compareTo(T)>=0)}(s.localStore,u))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(CT(u));const c=new aD(u,s.localStore,o.serializer);let d=await o.$a();for(;d;){const p=await c.ca(d);p&&a._updateProgress(p),d=await o.$a()}const f=await c.complete();return await ur(s,f.Pa,void 0),await function(g,_){const w=q(g);return w.persistence.runTransaction("Save bundle","readwrite",T=>w.Wr.saveBundleMetadata(T,_))}(s.localStore,u),a._completeWith(f.progress),Promise.resolve(f.ha)}catch(u){return Rn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class $f{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Al(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return mT(this.persistence,new pT,e.initialUser,this.serializer)}createPersistence(e){return new fT(ah.Yr,this.serializer)}createSharedClientState(e){return new IT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class LT extends $f{constructor(e,n,r){super(),this.Ua=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ua.initialize(this,e),await Mm(this.Ua.syncEngine),await xo(this.Ua.remoteStore),await this.persistence.pi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return mT(this.persistence,new pT,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new pV(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new HC(n,this.persistence);return new QC(e.asyncQueue,r)}createPersistence(e){const n=wm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new vm(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,TT(),Uu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new IT}}class kD extends LT{constructor(e,n){super(e,n,!1),this.Ua=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ua.syncEngine;this.sharedClientState instanceof wd&&(this.sharedClientState.syncEngine={eo:AD.bind(null,n),no:PD.bind(null,n),ro:RD.bind(null,n),qi:xD.bind(null,n),Xs:SD.bind(null,n)},await this.sharedClientState.start()),await this.persistence.pi(async r=>{await bD(this.Ua.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=TT();if(!wd.D(n))throw new F(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wd(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ED.bind(null,this.syncEngine),await Uf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rD}()}createDatastore(e){const n=Al(e.databaseInfo.databaseId),r=function(s){return new UV(s)}(e.databaseInfo);return function(s,o,a,u){return new $V(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new WV(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Pv(this.syncEngine,n,0),function(){return Iv.D()?new Iv:new FV}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,d){const f=new cD(i,s,o,a,u,c);return d&&(f.qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=q(i);L("RemoteStore","RemoteStore shutting down."),s.N_.add(5),await bo(s),s.B_.shutdown(),s.k_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):Qe("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.za=e,this.serializer=n,this.metadata=new at,this.buffer=new Uint8Array,this.ja=function(){return new TextDecoder("utf-8")}(),this.Ha().then(r=>{r&&r.aa()?this.metadata.resolve(r._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r._a)}`))},r=>this.metadata.reject(r))}close(){return this.za.cancel()}async getMetadata(){return this.metadata.promise}async $a(){return await this.getMetadata(),this.Ha()}async Ha(){const e=await this.Ja();if(e===null)return null;const n=this.ja.decode(e),r=Number(n);isNaN(r)&&this.Ya(`length string (${n}) is not valid number`);const i=await this.Za(r);return new oD(JSON.parse(i),e.length+r)}Xa(){return this.buffer.findIndex(e=>e===123)}async Ja(){for(;this.Xa()<0&&!await this.eu(););if(this.buffer.length===0)return null;const e=this.Xa();e<0&&this.Ya("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Za(e){for(;this.buffer.length<e;)await this.eu()&&this.Ya("Reached the end of bundle when more is expected.");const n=this.ja.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}async eu(){const e=await this.za.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=q(i),a={documents:s.map(f=>al(o.serializer,f))},u=await o.No("BatchGetDocuments",o.serializer.databaseId,ce.emptyPath(),a,s.length),c=new Map;u.forEach(f=>{const p=Qk(o.serializer,f);c.set(p.key.toString(),p)});const d=[];return s.forEach(f=>{const p=c.get(f.toString());H(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ao(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=j.fromPath(r);this.mutations.push(new um(i,this.precondition(i)))}),await async function(r,i){const s=q(r),o={writes:i.map(a=>ll(s.serializer,a))};await s.Fo("Commit",s.serializer.databaseId,ce.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw W();n=J.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new F(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(J.min())?Oe.exists(!1):Oe.updateTime(n):Oe.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new F(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oe.updateTime(n)}return Oe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.tu=r.maxAttempts,this.e_=new Tm(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){this.e_.Wo(async()=>{const e=new DD(this.datastore),n=this.iu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.su(i)}))}).catch(r=>{this.su(r)})})}iu(e){try{const n=this.updateFunction(e);return!_l(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ru(),Promise.resolve()))):this.deferred.reject(e)}ou(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!UI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=tI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{L("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(L("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new at;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ro(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zu(t,e){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await gT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qf(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Lm(t);L("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Tv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Tv(e.remoteStore,i)),t._onlineComponents=e}function BT(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Lm(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{await zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!BT(n))throw n;Rn("Error using user provided cache. Falling back to memory cache: "+n),await zu(t,new $f)}}else L("FirestoreClient","Using default OfflineComponentProvider"),await zu(t,new $f);return t._offlineComponents}async function hh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),await qf(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),await qf(t,new Fm))),t._onlineComponents}function UT(t){return Lm(t).then(e=>e.persistence)}function Bm(t){return Lm(t).then(e=>e.localStore)}function zT(t){return hh(t).then(e=>e.remoteStore)}function Um(t){return hh(t).then(e=>e.syncEngine)}function MD(t){return hh(t).then(e=>e.datastore)}async function po(t){const e=await hh(t),n=e.eventManager;return n.onListen=hD.bind(null,e.syncEngine),n.onUnlisten=fD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pD.bind(null,e.syncEngine),n}function FD(t){return t.asyncQueue.enqueue(async()=>{const e=await UT(t),n=await zT(t);return e.setNetworkEnabled(!0),function(i){const s=q(i);return s.N_.delete(0),bl(s)}(n)})}function LD(t){return t.asyncQueue.enqueue(async()=>{const e=await UT(t),n=await zT(t);return e.setNetworkEnabled(!1),async function(i){const s=q(i);s.N_.add(0),await bo(s),s.k_.set("Offline")}(n)})}function BD(t,e){const n=new at;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const f=q(c);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new F(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const u=Ro(a,`Failed to get document '${s} from cache`);o.reject(u)}}(await Bm(t),e,n)),n.promise}function jT(t,e,n={}){const r=new at;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new ch({next:p=>{o.enqueueAndForget(()=>Rm(s,f));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new F(N.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?c.reject(new F(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new km(To(a.path),d,{includeMetadataChanges:!0,oa:!0});return Pm(s,f)}(await po(t),t.asyncQueue,e,n,r)),r.promise}function UD(t,e){const n=new at;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Ac(i,s,!0),u=new DT(s,a.Is),c=u.Va(a.documents),d=u.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const u=Ro(a,`Failed to execute query '${s} against cache`);o.reject(u)}}(await Bm(t),e,n)),n.promise}function $T(t,e,n={}){const r=new at;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new ch({next:p=>{o.enqueueAndForget(()=>Rm(s,f)),p.fromCache&&u.source==="server"?c.reject(new F(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new km(a,d,{includeMetadataChanges:!0,oa:!0});return Pm(s,f)}(await po(t),t.asyncQueue,e,n,r)),r.promise}function zD(t,e){const n=new ch(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){q(i).J_.add(s),s.next()}(await po(t),n)),()=>{n.Ga(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){q(i).J_.delete(s)}(await po(t),n))}}function jD(t,e,n,r){const i=function(o,a){let u;return u=typeof o=="string"?jI().encode(o):o,function(d,f){return new VD(d,f)}(function(d,f){if(d instanceof Uint8Array)return Cv(d,f);if(d instanceof ArrayBuffer)return Cv(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Al(e));t.asyncQueue.enqueueAndForget(async()=>{CD(await Um(t),i,r)})}function $D(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=q(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Wr.getNamedQuery(o,i))}(await Bm(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e,n){if(!n)throw new F(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WT(t,e,n,r){if(e===!0&&r===!0)throw new F(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vv(t){if(!j.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dv(t){if(j.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(t);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function GT(t,e){if(e<=0)throw new F(N.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FC;switch(r.type){case"firstParty":return new zC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=kv.get(n);r&&(L("ComponentProvider","Removing Datastore"),kv.delete(n),r.terminate())}(this),Promise.resolve()}}function qD(t,e,n,r={}){var i;const s=(t=me(t,xl))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=st.MOCK_USER;else{a=sR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new st(c)}t._authCredentials=new LC(new eI(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nt=class KT{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new KT(this.firestore,e,this._query)}},Be=class QT{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new QT(this.firestore,e,this._key)}},zr=class HT extends Nt{constructor(e,n,r){super(e,n,To(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new j(e))}withConverter(e){return new HT(this.firestore,e,this._path)}};function YT(t,e,...n){if(t=Xe(t),zm("collection","path",e),t instanceof xl){const r=ce.fromString(e,...n);return Dv(r),new zr(t,null,r)}{if(!(t instanceof Be||t instanceof zr))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return Dv(r),new zr(t.firestore,null,r)}}function WD(t,e){if(t=me(t,xl),zm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Nt(t,null,function(r){return new ar(ce.emptyPath(),r)}(e))}function Rc(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=tI.newId()),zm("doc","path",e),t instanceof xl){const r=ce.fromString(e,...n);return Vv(r),new Be(t,null,new j(r))}{if(!(t instanceof Be||t instanceof zr))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return Vv(r),new Be(t.firestore,t instanceof zr?t.converter:null,new j(r))}}function JT(t,e){return t=Xe(t),e=Xe(e),(t instanceof Be||t instanceof zr)&&(e instanceof Be||e instanceof zr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function XT(t,e){return t=Xe(t),e=Xe(e),t instanceof Nt&&e instanceof Nt&&t.firestore===e.firestore&&wl(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Tm(this,"async_queue_retry"),this.Tu=()=>{const n=Uu();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.e_.zo()};const e=Uu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const n=Uu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});const n=new at;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}async Au(){if(this.au.length!==0){try{await this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!ii(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}}du(e){const n=this._u.then(()=>(this.hu=!0,e().catch(r=>{this.lu=r,this.hu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Qe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.hu=!1,r))));return this._u=n,n}enqueueAfterDelay(e,n,r){this.Eu(),this.Iu.indexOf(e)>-1&&(n=0);const i=xm.createAndSchedule(this,e,n,r,s=>this.Ru(s));return this.cu.push(i),i}Eu(){this.lu&&W()}verifyOperationInProgress(){}async Vu(){let e;do e=this._u,await e;while(e!==this._u)}mu(e){for(const n of this.cu)if(n.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.cu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){const n=this.cu.indexOf(e);this.cu.splice(n,1)}}function Wf(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class KD{constructor(){this._progressObserver={},this._taskCompletionResolver=new at,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=-1;let Ge=class extends xl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new GD}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZT(this),this._firestoreClient.terminate()}};function lt(t){return t._firestoreClient||ZT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZT(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,d){return new yk(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,qT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new OD(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function HD(t,e){t1(t=me(t,Ge));const n=lt(t);if(n._uninitializedComponentsProvider)throw new F(N.FAILED_PRECONDITION,"SDK cache is already specified.");Rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Fm;return e1(n,i,new LT(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function YD(t){t1(t=me(t,Ge));const e=lt(t);if(e._uninitializedComponentsProvider)throw new F(N.FAILED_PRECONDITION,"SDK cache is already specified.");Rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Fm;return e1(e,r,new kD(r,n.cacheSizeBytes))}function e1(t,e,n){const r=new at;return t.asyncQueue.enqueue(async()=>{try{await zu(t,n),await qf(t,e),r.resolve()}catch(i){const s=i;if(!BT(s))throw s;Rn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function JD(t){if(t._initialized&&!t._terminated)throw new F(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new at;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Bn.D())return Promise.resolve();const i=r+"main";await Bn.delete(i)}(wm(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function XD(t){return function(n){const r=new at;return n.asyncQueue.enqueueAndForget(async()=>vD(await Um(n),r)),r.promise}(lt(t=me(t,Ge)))}function ZD(t){return FD(lt(t=me(t,Ge)))}function eN(t){return LD(lt(t=me(t,Ge)))}function tN(t,e){const n=lt(t=me(t,Ge)),r=new KD;return jD(n,t._databaseId,e,r),r}function nN(t,e){return $D(lt(t=me(t,Ge)),e).then(n=>n?new Nt(t,null,n.query):null)}function t1(t){if(t._initialized||t._terminated)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(We.fromBase64String(e))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ne(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ts=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=/^__.*__$/;class iN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new So(e,this.data,n,this.fieldTransforms)}}class n1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function r1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}class ph{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new ph(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.wu({path:r,bu:!1});return i.Du(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.wu({path:r,bu:!1});return i.pu(),i}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return Cc(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if(r1(this.yu)&&rN.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class sN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Al(e)}Ou(e,n,r,i=!1){return new ph({yu:e,methodName:n,xu:r,path:Ne.emptyPath(),bu:!1,Mu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ns(t){const e=t._freezeSettings(),n=Al(t._databaseId);return new sN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mh(t,e,n,r,i,s={}){const o=t.Ou(s.merge||s.mergeFields?2:0,e,n,i);Qm("Data must be an object, but it was:",o,r);const a=o1(r,o);let u,c;if(s.merge)u=new jt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const p=Gf(e,f,n);if(!o.contains(p))throw new F(N.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);l1(d,p)||d.push(p)}u=new jt(d),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new iN(new ft(a),u,c)}class Pl extends ts{_toFieldTransform(e){if(e.yu!==2)throw e.yu===1?e.Fu(`${this._methodName}() can only appear at the top level of your update data`):e.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pl}}function i1(t,e,n){return new ph({yu:3,xu:e.settings.xu,methodName:t._methodName,bu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jm extends ts{_toFieldTransform(e){return new Il(e.path,new so)}isEqual(e){return e instanceof jm}}class $m extends ts{constructor(e,n){super(e),this.Nu=n}_toFieldTransform(e){const n=i1(this,e,!0),r=this.Nu.map(s=>rs(s,n)),i=new Wi(r);return new Il(e.path,i)}isEqual(e){return e instanceof $m&&Ja(this.Nu,e.Nu)}}class qm extends ts{constructor(e,n){super(e),this.Nu=n}_toFieldTransform(e){const n=i1(this,e,!0),r=this.Nu.map(s=>rs(s,n)),i=new Gi(r);return new Il(e.path,i)}isEqual(e){return e instanceof qm&&Ja(this.Nu,e.Nu)}}class Wm extends ts{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=new oo(e.serializer,DI(e.serializer,this.Lu));return new Il(e.path,n)}isEqual(e){return e instanceof Wm&&this.Lu===e.Lu}}function Gm(t,e,n,r){const i=t.Ou(1,e,n);Qm("Data must be an object, but it was:",i,r);const s=[],o=ft.empty();es(r,(u,c)=>{const d=Hm(e,u,n);c=Xe(c);const f=i.Cu(d);if(c instanceof Pl)s.push(d);else{const p=rs(c,f);p!=null&&(s.push(d),o.set(d,p))}});const a=new jt(s);return new n1(o,a,i.fieldTransforms)}function Km(t,e,n,r,i,s){const o=t.Ou(1,e,n),a=[Gf(e,r,n)],u=[i];if(s.length%2!=0)throw new F(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Gf(e,s[p])),u.push(s[p+1]);const c=[],d=ft.empty();for(let p=a.length-1;p>=0;--p)if(!l1(c,a[p])){const g=a[p];let _=u[p];_=Xe(_);const w=o.Cu(g);if(_ instanceof Pl)c.push(g);else{const T=rs(_,w);T!=null&&(c.push(g),d.set(g,T))}}const f=new jt(c);return new n1(d,f,o.fieldTransforms)}function s1(t,e,n,r=!1){return rs(n,t.Ou(r?4:3,e))}function rs(t,e){if(a1(t=Xe(t)))return Qm("Unsupported field value:",e,t),o1(t,e);if(t instanceof ts)return function(r,i){if(!r1(i.yu))throw i.Fu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Fu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=rs(a,i.vu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Me.fromDate(r);return{timestampValue:ao(i.serializer,s)}}if(r instanceof Me){const s=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ao(i.serializer,s)}}if(r instanceof fh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:WI(i.serializer,r._byteString)};if(r instanceof Be){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pm(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Fu(`Unsupported field value: ${dh(r)}`)}(t,e)}function o1(t,e){const n={};return fI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(t,(r,i)=>{const s=rs(i,e.Su(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function a1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof fh||t instanceof jn||t instanceof Be||t instanceof ts)}function Qm(t,e,n){if(!a1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=dh(n);throw r==="an object"?e.Fu(t+" a custom object"):e.Fu(t+" "+r)}}function Gf(t,e,n){if((e=Xe(e))instanceof Xr)return e._internalPath;if(typeof e=="string")return Hm(t,e);throw Cc("Field path arguments must be of type string or ",t,!1,void 0,n)}const oN=new RegExp("[~\\*/\\[\\]]");function Hm(t,e,n){if(e.search(oN)>=0)throw Cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xr(...e.split("."))._internalPath}catch{throw Cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new F(N.INVALID_ARGUMENT,a+t+u)}function l1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aN extends ul{data(){return super.data()}}function gh(t,e){return typeof e=="string"?Hm(t,e):e instanceof Xr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ym{}class Rl extends Ym{}function wr(t,e,...n){let r=[];e instanceof Ym&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Jm).length,a=s.filter(u=>u instanceof yh).length;if(o>1||o>0&&a>0)throw new F(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class yh extends Rl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yh(e,n,r)}_apply(e){const n=this._parse(e);return h1(e._query,n),new Nt(e.firestore,e.converter,kf(e._query,n))}_parse(e){const n=ns(e.firestore);return function(s,o,a,u,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Mv(f,d);const g=[];for(const _ of f)g.push(Ov(u,s,_));p={arrayValue:{values:g}}}else p=Ov(u,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Mv(f,d),p=s1(a,o,f,d==="in"||d==="not-in");return he.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lN(t,e,n){const r=e,i=gh("where",t);return yh._create(i,r,n)}class Jm extends Ym{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:we.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)h1(o,u),o=kf(o,u)}(e._query,n),new Nt(e.firestore,e.converter,kf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xm extends Rl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(s,o)}(e._query,this._field,this._direction);return new Nt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ar(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function uN(t,e="asc"){const n=e,r=gh("orderBy",t);return Xm._create(r,n)}class _h extends Rl{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _h(e,n,r)}_apply(e){return new Nt(e.firestore,e.converter,Ec(e._query,this._limit,this._limitType))}}function cN(t){return GT("limit",t),_h._create("limit",t,"F")}function hN(t){return GT("limitToLast",t),_h._create("limitToLast",t,"L")}class vh extends Rl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new vh(e,n,r)}_apply(e){const n=c1(e,this.type,this._docOrFields,this._inclusive);return new Nt(e.firestore,e.converter,function(i,s){return new ar(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function dN(...t){return vh._create("startAt",t,!0)}function fN(...t){return vh._create("startAfter",t,!1)}class wh extends Rl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new wh(e,n,r)}_apply(e){const n=c1(e,this.type,this._docOrFields,this._inclusive);return new Nt(e.firestore,e.converter,function(i,s){return new ar(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function pN(...t){return wh._create("endBefore",t,!1)}function mN(...t){return wh._create("endAt",t,!0)}function c1(t,e,n,r){if(n[0]=Xe(n[0]),n[0]instanceof ul)return function(s,o,a,u,c){if(!u)throw new F(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of $s(s))if(f.field.isKeyField())d.push($i(o,u.key));else{const p=u.data.field(f.field);if(nh(p))throw new F(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=f.field.canonicalString();throw new F(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new Yr(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ns(t.firestore);return function(o,a,u,c,d,f){const p=o.explicitOrderBy;if(d.length>p.length)throw new F(N.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let _=0;_<d.length;_++){const w=d[_];if(p[_].field.isKeyField()){if(typeof w!="string")throw new F(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!am(o)&&w.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const T=o.path.child(ce.fromString(w));if(!j.isDocumentKey(T))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const S=new j(T);g.push($i(a,S))}else{const T=s1(u,c,w);g.push(T)}}return new Yr(g,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Ov(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!am(e)&&n.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ce.fromString(n));if(!j.isDocumentKey(r))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $i(t,new j(r))}if(n instanceof Be)return $i(t,n._key);throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(n)}.`)}function Mv(t,e){if(!Array.isArray(t)||t.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Zm{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return es(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new fh(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=ir(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ce.fromString(e);H(nT(r));const i=new Qr(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(n)||Qe(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class gN extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let sr=class extends ul{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ca=class extends sr{data(e={}){return super.data(e)}},Zr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ri(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ca(this._firestore,this._userDataWriter,r.key,r,new Ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Ca(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Ca(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:yN(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function yN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}function d1(t,e){return t instanceof sr&&e instanceof sr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zr&&e instanceof Zr&&t._firestore===e._firestore&&XT(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){t=me(t,Be);const e=me(t.firestore,Ge);return jT(lt(e),t._key).then(n=>eg(e,t,n))}class is extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function vN(t){t=me(t,Be);const e=me(t.firestore,Ge),n=lt(e),r=new is(e);return BD(n,t._key).then(i=>new sr(e,r,t._key,i,new Ri(i!==null&&i.hasLocalMutations,!0),t.converter))}function wN(t){t=me(t,Be);const e=me(t.firestore,Ge);return jT(lt(e),t._key,{source:"server"}).then(n=>eg(e,t,n))}function EN(t){t=me(t,Nt);const e=me(t.firestore,Ge),n=lt(e),r=new is(e);return u1(t._query),$T(n,t._query).then(i=>new Zr(e,r,t,i))}function IN(t){t=me(t,Nt);const e=me(t.firestore,Ge),n=lt(e),r=new is(e);return UD(n,t._query).then(i=>new Zr(e,r,t,i))}function TN(t){t=me(t,Nt);const e=me(t.firestore,Ge),n=lt(e),r=new is(e);return $T(n,t._query,{source:"server"}).then(i=>new Zr(e,r,t,i))}function Fv(t,e,n){t=me(t,Be);const r=me(t.firestore,Ge),i=Eh(t.converter,e,n);return Cl(r,[mh(ns(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Oe.none())])}function Lv(t,e,n,...r){t=me(t,Be);const i=me(t.firestore,Ge),s=ns(i);let o;return o=typeof(e=Xe(e))=="string"||e instanceof Xr?Km(s,"updateDoc",t._key,e,n,r):Gm(s,"updateDoc",t._key,e),Cl(i,[o.toMutation(t._key,Oe.exists(!0))])}function SN(t){return Cl(me(t.firestore,Ge),[new Ao(t._key,Oe.none())])}function AN(t,e){const n=me(t.firestore,Ge),r=Rc(t),i=Eh(t.converter,e);return Cl(n,[mh(ns(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Oe.exists(!1))]).then(()=>r)}function f1(t,...e){var n,r,i;t=Xe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Wf(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Wf(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,c,d;if(t instanceof Be)c=me(t.firestore,Ge),d=To(t._key.path),u={next:f=>{e[o]&&e[o](eg(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=me(t,Nt);c=me(f.firestore,Ge),d=f._query;const p=new is(c);u={next:g=>{e[o]&&e[o](new Zr(c,p,f,g))},error:e[o+1],complete:e[o+2]},u1(t._query)}return function(p,g,_,w){const T=new ch(w),S=new km(g,T,_);return p.asyncQueue.enqueueAndForget(async()=>Pm(await po(p),S)),()=>{T.Ga(),p.asyncQueue.enqueueAndForget(async()=>Rm(await po(p),S))}}(lt(c),d,a,u)}function bN(t,e){return zD(lt(t=me(t,Ge)),Wf(e)?e:{next:e})}function Cl(t,e){return function(r,i){const s=new at;return r.asyncQueue.enqueueAndForget(async()=>mD(await Um(r),i,s)),s.promise}(lt(t),e)}function eg(t,e,n){const r=n.docs.get(e._key),i=new is(t);return new sr(t,i,e._key,r,new Ri(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PN=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ns(e)}set(e,n,r){this._verifyNotCommitted();const i=br(e,this._firestore),s=Eh(i.converter,n,r),o=mh(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Oe.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=br(e,this._firestore);let o;return o=typeof(n=Xe(n))=="string"||n instanceof Xr?Km(this._dataReader,"WriteBatch.update",s._key,n,r,i):Gm(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Oe.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=br(e,this._firestore);return this._mutations=this._mutations.concat(new Ao(n._key,Oe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function br(t,e){if((t=Xe(t)).firestore!==e)throw new F(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RN=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ns(n)}get(n){const r=br(n,this._firestore),i=new gN(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return W();const o=s[0];if(o.isFoundDocument())return new ul(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ul(this._firestore,i,r._key,null,r.converter);throw W()})}set(n,r,i){const s=br(n,this._firestore),o=Eh(s.converter,r,i),a=mh(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=br(n,this._firestore);let a;return a=typeof(r=Xe(r))=="string"||r instanceof Xr?Km(this._dataReader,"Transaction.update",o._key,r,i,s):Gm(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=br(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=br(e,this._firestore),r=new is(this._firestore);return super.get(e).then(i=>new sr(this._firestore,r,n._key,i._document,new Ri(!1,!1),n.converter))}};function CN(t,e,n){t=me(t,Ge);const r=Object.assign(Object.assign({},xN),n);return function(s){if(s.maxAttempts<1)throw new F(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new at;return s.asyncQueue.enqueueAndForget(async()=>{const c=await MD(s);new ND(s.asyncQueue,c,a,o,u).nu()}),u.promise}(lt(t),i=>e(new RN(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){return new Pl("deleteField")}function VN(){return new jm("serverTimestamp")}function DN(...t){return new $m("arrayUnion",t)}function NN(...t){return new qm("arrayRemove",t)}function ON(t){return new Wm("increment",t)}(function(e,n=!0){(function(i){Io=i})(Xp),to(new Ui("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ge(new BC(r.getProvider("auth-internal")),new $C(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qr(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Zn(C_,"4.6.5",e),Zn(C_,"4.6.5","esm2017")})();const MN="@firebase/firestore-compat",FN="0.3.34";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function Uv(){if(!mk())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}class cl{constructor(e){this._delegate=e}static fromBase64String(e){return Uv(),new cl(jn.fromBase64String(e))}static fromUint8Array(e){return Bv(),new cl(jn.fromUint8Array(e))}toBase64(){return Uv(),this._delegate.toBase64()}toUint8Array(){return Bv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){return LN(t,["next","error","complete"])}function LN(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{enableIndexedDbPersistence(e,n){return HD(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return YD(e._delegate)}clearIndexedDbPersistence(e){return JD(e._delegate)}}class p1{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){qD(this._delegate,e,n,r)}enableNetwork(){return ZD(this._delegate)}disableNetwork(){return eN(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WT("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return XD(this._delegate)}onSnapshotsInSync(e){return bN(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mo(this,YT(this._delegate,e))}catch(n){throw Ct(n,"collection()","Firestore.collection()")}}doc(e){try{return new mn(this,Rc(this._delegate,e))}catch(n){throw Ct(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rt(this,WD(this._delegate,e))}catch(n){throw Ct(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return CN(this._delegate,n=>e(new m1(this,n)))}batch(){return lt(this._delegate),new g1(new PN(this._delegate,e=>Cl(this._delegate,e)))}loadBundle(e){return tN(this._delegate,e)}namedQuery(e){return nN(this._delegate,e).then(n=>n?new Rt(this,n):null)}}class Ih extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(new jn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return mn.forKey(n,this.firestore,null)}}function UN(t){OC(t)}class m1{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ih(e)}get(e){const n=Ci(e);return this._delegate.get(n).then(r=>new hl(this._firestore,new sr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ci(e);return r?(tg("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ci(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ci(e);return this._delegate.delete(n),this}}class g1{constructor(e){this._delegate=e}set(e,n,r){const i=Ci(e);return r?(tg("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ci(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ci(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Yi{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ca(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dl(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Yi.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Yi(e,new Ih(e),n),i.set(n,s)),s}}Yi.INSTANCES=new WeakMap;class mn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ih(e)}static forPath(e,n,r){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mn(n,new Be(n._delegate,r,new j(e)))}static forKey(e,n,r){return new mn(n,new Be(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mo(this.firestore,YT(this._delegate,e))}catch(n){throw Ct(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Xe(e),e instanceof Be?JT(this._delegate,e):!1}set(e,n){n=tg("DocumentReference.set",n);try{return n?Fv(this._delegate,e,n):Fv(this._delegate,e)}catch(r){throw Ct(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Lv(this._delegate,e):Lv(this._delegate,e,n,...r)}catch(i){throw Ct(i,"updateDoc()","DocumentReference.update()")}}delete(){return SN(this._delegate)}onSnapshot(...e){const n=y1(e),r=_1(e,i=>new hl(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return f1(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=vN(this._delegate):(e==null?void 0:e.source)==="server"?n=wN(this._delegate):n=_N(this._delegate),n.then(r=>new hl(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new mn(this.firestore,e?this._delegate.withConverter(Yi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ct(t,e,n){return t.message=t.message.replace(e,n),t}function y1(t){for(const e of t)if(typeof e=="object"&&!Kf(e))return e;return{}}function _1(t,e){var n,r;let i;return Kf(t[0])?i=t[0]:Kf(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class hl{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new mn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return d1(this._delegate,e._delegate)}}class dl extends hl{data(e){const n=this._delegate.data(e);return this._delegate._converter||MC(n!==void 0),n}}class Rt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ih(e)}where(e,n,r){try{return new Rt(this.firestore,wr(this._delegate,lN(e,n,r)))}catch(i){throw Ct(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Rt(this.firestore,wr(this._delegate,uN(e,n)))}catch(r){throw Ct(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rt(this.firestore,wr(this._delegate,cN(e)))}catch(n){throw Ct(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Rt(this.firestore,wr(this._delegate,hN(e)))}catch(n){throw Ct(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rt(this.firestore,wr(this._delegate,dN(...e)))}catch(n){throw Ct(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rt(this.firestore,wr(this._delegate,fN(...e)))}catch(n){throw Ct(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rt(this.firestore,wr(this._delegate,pN(...e)))}catch(n){throw Ct(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rt(this.firestore,wr(this._delegate,mN(...e)))}catch(n){throw Ct(n,"endAt()","Query.endAt()")}}isEqual(e){return XT(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=IN(this._delegate):(e==null?void 0:e.source)==="server"?n=TN(this._delegate):n=EN(this._delegate),n.then(r=>new Qf(this.firestore,new Zr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=y1(e),r=_1(e,i=>new Qf(this.firestore,new Zr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return f1(this._delegate,n,r)}withConverter(e){return new Rt(this.firestore,e?this._delegate.withConverter(Yi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class zN{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new dl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Qf{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Rt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new zN(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new dl(this._firestore,r))})}isEqual(e){return d1(this._delegate,e._delegate)}}class mo extends Rt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mn(this.firestore,e):null}doc(e){try{return e===void 0?new mn(this.firestore,Rc(this._delegate)):new mn(this.firestore,Rc(this._delegate,e))}catch(n){throw Ct(n,"doc()","CollectionReference.doc()")}}add(e){return AN(this._delegate,e).then(n=>new mn(this.firestore,n))}isEqual(e){return JT(this._delegate,e._delegate)}withConverter(e){return new mo(this.firestore,e?this._delegate.withConverter(Yi.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ci(t){return me(t,Be)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(...e){this._delegate=new Xr(...e)}static documentId(){return new ng(Ne.keyField().canonicalString())}isEqual(e){return e=Xe(e),e instanceof Xr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this._delegate=e}static serverTimestamp(){const e=VN();return e._methodName="FieldValue.serverTimestamp",new Si(e)}static delete(){const e=kN();return e._methodName="FieldValue.delete",new Si(e)}static arrayUnion(...e){const n=DN(...e);return n._methodName="FieldValue.arrayUnion",new Si(n)}static arrayRemove(...e){const n=NN(...e);return n._methodName="FieldValue.arrayRemove",new Si(n)}static increment(e){const n=ON(e);return n._methodName="FieldValue.increment",new Si(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN={Firestore:p1,GeoPoint:fh,Timestamp:Me,Blob:cl,Transaction:m1,WriteBatch:g1,DocumentReference:mn,DocumentSnapshot:hl,Query:Rt,QueryDocumentSnapshot:dl,QuerySnapshot:Qf,CollectionReference:mo,FieldPath:ng,FieldValue:Si,setLogLevel:UN,CACHE_SIZE_UNLIMITED:QD};function $N(t,e){t.INTERNAL.registerComponent(new Ui("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},jN)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){$N(t,(e,n)=>new p1(e,n,new BN)),t.registerVersion(MN,FN)}qN(eh);eh.initializeApp(QP);const v1=eh.firestore();function wu({body:t,date:e,author:n,base64_image:r}){return re.jsxs(Cr,{className:"w-full bg-[#cdb4db] rounded-md justify-between p-4",children:[re.jsx("div",{className:"text-left",children:re.jsx("p",{className:"text-xl font-bold",children:t})}),r&&re.jsx("div",{className:"text-center my-4",children:re.jsx("img",{src:r,alt:"Post Image",className:"max-w-full h-[400px]"})}),re.jsxs("div",{className:"text-sm text-right text-gray-600",children:[re.jsx("p",{children:n}),re.jsx("p",{children:e})]})]})}var K={},Hf={exports:{}};(function(t,e){(function(n,r){var i="1.0.38",s="",o="?",a="function",u="undefined",c="object",d="string",f="major",p="model",g="name",_="type",w="vendor",T="version",S="architecture",E="console",I="mobile",k="tablet",M="smarttv",B="wearable",A="embedded",v=500,b="Amazon",P="Apple",R="ASUS",C="BlackBerry",x="Browser",ze="Chrome",un="Edge",bt="Firefox",ut="Google",$="Huawei",X="LG",ee="Microsoft",ge="Motorola",ae="Opera",Se="Samsung",cn="Sharp",Ft="Sony",Qt="Xiaomi",Ht="Zebra",Dl="Facebook",Nl="Chromium OS",ui="Mac OS",ss=function(le,te){var Y={};for(var ve in le)te[ve]&&te[ve].length%2===0?Y[ve]=te[ve].concat(le[ve]):Y[ve]=le[ve];return Y},cr=function(le){for(var te={},Y=0;Y<le.length;Y++)te[le[Y].toUpperCase()]=le[Y];return te},os=function(le,te){return typeof le===d?$n(te).indexOf($n(le))!==-1:!1},$n=function(le){return le.toLowerCase()},ko=function(le){return typeof le===d?le.replace(/[^\d\.]/g,s).split(".")[0]:r},as=function(le,te){if(typeof le===d)return le=le.replace(/^\s\s*/,s),typeof te===u?le:le.substring(0,v)},ci=function(le,te){for(var Y=0,ve,hn,Jt,ye,Z,Xt;Y<te.length&&!Z;){var us=te[Y],cs=te[Y+1];for(ve=hn=0;ve<us.length&&!Z&&us[ve];)if(Z=us[ve++].exec(le),Z)for(Jt=0;Jt<cs.length;Jt++)Xt=Z[++hn],ye=cs[Jt],typeof ye===c&&ye.length>0?ye.length===2?typeof ye[1]==a?this[ye[0]]=ye[1].call(this,Xt):this[ye[0]]=ye[1]:ye.length===3?typeof ye[1]===a&&!(ye[1].exec&&ye[1].test)?this[ye[0]]=Xt?ye[1].call(this,Xt,ye[2]):r:this[ye[0]]=Xt?Xt.replace(ye[1],ye[2]):r:ye.length===4&&(this[ye[0]]=Xt?ye[3].call(this,Xt.replace(ye[1],ye[2])):r):this[ye]=Xt||r;Y+=2}},Vo=function(le,te){for(var Y in te)if(typeof te[Y]===c&&te[Y].length>0){for(var ve=0;ve<te[Y].length;ve++)if(os(te[Y][ve],le))return Y===o?r:Y}else if(os(te[Y],le))return Y===o?r:Y;return le},Ol={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ls={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Do={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[T,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[T,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,T],[/opios[\/ ]+([\w\.]+)/i],[T,[g,ae+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[T,[g,ae+" GX"]],[/\bopr\/([\w\.]+)/i],[T,[g,ae]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[T,[g,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,T],[/\bddg\/([\w\.]+)/i],[T,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[T,[g,"UC"+x]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[T,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[T,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[T,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[T,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[T,[g,"Smart Lenovo "+x]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+x],T],[/\bfocus\/([\w\.]+)/i],[T,[g,bt+" Focus"]],[/\bopt\/([\w\.]+)/i],[T,[g,ae+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[T,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[T,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[T,[g,ae+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[T,[g,"MIUI "+x]],[/fxios\/([-\w\.]+)/i],[T,[g,bt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+x]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+x],T],[/samsungbrowser\/([\w\.]+)/i],[T,[g,Se+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],T],[/metasr[\/ ]?([\d\.]+)/i],[T,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],T],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[g,T],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,Dl],T],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,T],[/\bgsa\/([\w\.]+) .*safari\//i],[T,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[T,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[T,[g,ze+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,ze+" WebView"],T],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[T,[g,"Android "+x]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,T],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[T,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[T,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[T,Vo,Ol]],[/(webkit|khtml)\/([\w\.]+)/i],[g,T],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],T],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[T,[g,bt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[g,T],[/(cobalt)\/([\w\.]+)/i],[g,[T,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,$n]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,s,$n]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,$n]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[w,Se],[_,k]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[w,Se],[_,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[w,P],[_,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[w,P],[_,k]],[/(macintosh);/i],[p,[w,P]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[w,cn],[_,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[w,$],[_,k]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[w,$],[_,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[w,Qt],[_,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[w,Qt],[_,k]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[w,"OPPO"],[_,I]],[/\b(opd2\d{3}a?) bui/i],[p,[w,"OPPO"],[_,k]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[w,"Vivo"],[_,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[p,[w,"Realme"],[_,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[w,ge],[_,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[w,ge],[_,k]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[w,X],[_,k]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[w,X],[_,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[w,"Lenovo"],[_,k]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[w,"Nokia"],[_,I]],[/(pixel c)\b/i],[p,[w,ut],[_,k]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[w,ut],[_,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[w,Ft],[_,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[w,Ft],[_,k]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[w,"OnePlus"],[_,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[w,b],[_,k]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[w,b],[_,I]],[/(playbook);[-\w\),; ]+(rim)/i],[p,w,[_,k]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[w,C],[_,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[w,R],[_,k]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[w,R],[_,I]],[/(nexus 9)/i],[p,[w,"HTC"],[_,k]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[w,[p,/_/g," "],[_,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[w,"Acer"],[_,k]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[w,"Meizu"],[_,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[p,[w,"Ulefone"],[_,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[w,p,[_,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[w,p,[_,k]],[/(surface duo)/i],[p,[w,ee],[_,k]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[w,"Fairphone"],[_,I]],[/(u304aa)/i],[p,[w,"AT&T"],[_,I]],[/\bsie-(\w*)/i],[p,[w,"Siemens"],[_,I]],[/\b(rct\w+) b/i],[p,[w,"RCA"],[_,k]],[/\b(venue[\d ]{2,7}) b/i],[p,[w,"Dell"],[_,k]],[/\b(q(?:mv|ta)\w+) b/i],[p,[w,"Verizon"],[_,k]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[w,"Barnes & Noble"],[_,k]],[/\b(tm\d{3}\w+) b/i],[p,[w,"NuVision"],[_,k]],[/\b(k88) b/i],[p,[w,"ZTE"],[_,k]],[/\b(nx\d{3}j) b/i],[p,[w,"ZTE"],[_,I]],[/\b(gen\d{3}) b.+49h/i],[p,[w,"Swiss"],[_,I]],[/\b(zur\d{3}) b/i],[p,[w,"Swiss"],[_,k]],[/\b((zeki)?tb.*\b) b/i],[p,[w,"Zeki"],[_,k]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[w,"Dragon Touch"],p,[_,k]],[/\b(ns-?\w{0,9}) b/i],[p,[w,"Insignia"],[_,k]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[w,"NextBook"],[_,k]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[w,"Voice"],p,[_,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[w,"LvTel"],p,[_,I]],[/\b(ph-1) /i],[p,[w,"Essential"],[_,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[w,"Envizen"],[_,k]],[/\b(trio[-\w\. ]+) b/i],[p,[w,"MachSpeed"],[_,k]],[/\btu_(1491) b/i],[p,[w,"Rotor"],[_,k]],[/(shield[\w ]+) b/i],[p,[w,"Nvidia"],[_,k]],[/(sprint) (\w+)/i],[w,p,[_,I]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[w,ee],[_,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[w,Ht],[_,k]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[w,Ht],[_,I]],[/smart-tv.+(samsung)/i],[w,[_,M]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[w,Se],[_,M]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[w,X],[_,M]],[/(apple) ?tv/i],[w,[p,P+" TV"],[_,M]],[/crkey/i],[[p,ze+"cast"],[w,ut],[_,M]],[/droid.+aft(\w+)( bui|\))/i],[p,[w,b],[_,M]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[w,cn],[_,M]],[/(bravia[\w ]+)( bui|\))/i],[p,[w,Ft],[_,M]],[/(mitv-\w{5}) bui/i],[p,[w,Qt],[_,M]],[/Hbbtv.*(technisat) (.*);/i],[w,p,[_,M]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[w,as],[p,as],[_,M]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[_,M]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[w,p,[_,E]],[/droid.+; (shield) bui/i],[p,[w,"Nvidia"],[_,E]],[/(playstation [345portablevi]+)/i],[p,[w,Ft],[_,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[w,ee],[_,E]],[/((pebble))app/i],[w,p,[_,B]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[w,P],[_,B]],[/droid.+; (glass) \d/i],[p,[w,ut],[_,B]],[/droid.+; (wt63?0{2,3})\)/i],[p,[w,Ht],[_,B]],[/(quest( \d| pro)?)/i],[p,[w,Dl],[_,B]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[w,[_,A]],[/(aeobc)\b/i],[p,[w,b],[_,A]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[p,[_,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[_,k]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[_,k]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[_,I]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[w,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[T,[g,un+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[T,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,T],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[T,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,T],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[T,Vo,ls]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[T,Vo,ls],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[T,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,ui],[T,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[T,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,T],[/\(bb(10);/i],[T,[g,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[T,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[T,[g,bt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[T,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[T,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[T,[g,ze+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,Nl],T],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,T],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],T],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,T]]},Yt=function(le,te){if(typeof le===c&&(te=le,le=r),!(this instanceof Yt))return new Yt(le,te).getResult();var Y=typeof n!==u&&n.navigator?n.navigator:r,ve=le||(Y&&Y.userAgent?Y.userAgent:s),hn=Y&&Y.userAgentData?Y.userAgentData:r,Jt=te?ss(Do,te):Do,ye=Y&&Y.userAgent==ve;return this.getBrowser=function(){var Z={};return Z[g]=r,Z[T]=r,ci.call(Z,ve,Jt.browser),Z[f]=ko(Z[T]),ye&&Y&&Y.brave&&typeof Y.brave.isBrave==a&&(Z[g]="Brave"),Z},this.getCPU=function(){var Z={};return Z[S]=r,ci.call(Z,ve,Jt.cpu),Z},this.getDevice=function(){var Z={};return Z[w]=r,Z[p]=r,Z[_]=r,ci.call(Z,ve,Jt.device),ye&&!Z[_]&&hn&&hn.mobile&&(Z[_]=I),ye&&Z[p]=="Macintosh"&&Y&&typeof Y.standalone!==u&&Y.maxTouchPoints&&Y.maxTouchPoints>2&&(Z[p]="iPad",Z[_]=k),Z},this.getEngine=function(){var Z={};return Z[g]=r,Z[T]=r,ci.call(Z,ve,Jt.engine),Z},this.getOS=function(){var Z={};return Z[g]=r,Z[T]=r,ci.call(Z,ve,Jt.os),ye&&!Z[g]&&hn&&hn.platform&&hn.platform!="Unknown"&&(Z[g]=hn.platform.replace(/chrome os/i,Nl).replace(/macos/i,ui)),Z},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ve},this.setUA=function(Z){return ve=typeof Z===d&&Z.length>v?as(Z,v):Z,this},this.setUA(ve),this};Yt.VERSION=i,Yt.BROWSER=cr([g,T,f]),Yt.CPU=cr([S]),Yt.DEVICE=cr([p,w,_,E,I,M,k,B,A]),Yt.ENGINE=Yt.OS=cr([g,T]),t.exports&&(e=t.exports=Yt),e.UAParser=Yt;var Cn=typeof n!==u&&(n.jQuery||n.Zepto);if(Cn&&!Cn.ua){var hr=new Yt;Cn.ua=hr.getResult(),Cn.ua.get=function(){return hr.getUA()},Cn.ua.set=function(le){hr.setUA(le);var te=hr.getResult();for(var Y in te)Cn.ua[Y]=te[Y]}}})(typeof window=="object"?window:qS)})(Hf,Hf.exports);var WN=Hf.exports;Object.defineProperty(K,"__esModule",{value:!0});function GN(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var Tt=Q,xe=GN(Tt),w1=WN,ai=new w1,At=ai.getBrowser(),KN=ai.getCPU(),ln=ai.getDevice(),rg=ai.getEngine(),li=ai.getOS(),kl=ai.getUA(),E1=function(e){return ai.setUA(e)},Vl=function(e){if(!e){console.error("No userAgent string was provided");return}var n=new w1(e);return{UA:n,browser:n.getBrowser(),cpu:n.getCPU(),device:n.getDevice(),engine:n.getEngine(),os:n.getOS(),ua:n.getUA(),setUserAgent:function(i){return n.setUA(i)}}},I1=Object.freeze({ClientUAInstance:ai,browser:At,cpu:KN,device:ln,engine:rg,os:li,ua:kl,setUa:E1,parseUserAgent:Vl});function zv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zv(Object(n),!0).forEach(function(r){XN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ka(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ka=function(e){return typeof e}:ka=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ka(t)}function HN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function JN(t,e,n){return e&&YN(t.prototype,e),t}function XN(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yf(){return Yf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yf.apply(this,arguments)}function ZN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xf(t,e)}function Jf(t){return Jf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Jf(t)}function Xf(t,e){return Xf=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Xf(t,e)}function e2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wn(t,e){if(t==null)return{};var n=e2(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ju(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t2(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ju(t)}function n2(t,e){return r2(t)||i2(t,e)||s2(t,e)||o2()}function r2(t){if(Array.isArray(t))return t}function i2(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,a=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function s2(t,e){if(t){if(typeof t=="string")return jv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jv(t,e)}}function jv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},Kt={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},Co={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},a2={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},l2=function(e){switch(e){case Et.Mobile:return{isMobile:!0};case Et.Tablet:return{isTablet:!0};case Et.SmartTv:return{isSmartTV:!0};case Et.Console:return{isConsole:!0};case Et.Wearable:return{isWearable:!0};case Et.Browser:return{isBrowser:!0};case Et.Embedded:return{isEmbedded:!0};default:return a2}},u2=function(e){return E1(e)},ne=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return e||n},ig=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},sg=function(e){var n=ig();return n&&n.platform&&(n.platform.indexOf(e)!==-1||n.platform==="MacIntel"&&n.maxTouchPoints>1&&!window.MSStream)},c2=function(e,n,r,i,s){return{isBrowser:e,browserMajorVersion:ne(n.major),browserFullVersion:ne(n.version),browserName:ne(n.name),engineName:ne(r.name),engineVersion:ne(r.version),osName:ne(i.name),osVersion:ne(i.version),userAgent:ne(s)}},$v=function(e,n,r,i){return QN({},e,{vendor:ne(n.vendor),model:ne(n.model),os:ne(r.name),osVersion:ne(r.version),ua:ne(i)})},h2=function(e,n,r,i){return{isSmartTV:e,engineName:ne(n.name),engineVersion:ne(n.version),osName:ne(r.name),osVersion:ne(r.version),userAgent:ne(i)}},d2=function(e,n,r,i){return{isConsole:e,engineName:ne(n.name),engineVersion:ne(n.version),osName:ne(r.name),osVersion:ne(r.version),userAgent:ne(i)}},f2=function(e,n,r,i){return{isWearable:e,engineName:ne(n.name),engineVersion:ne(n.version),osName:ne(r.name),osVersion:ne(r.version),userAgent:ne(i)}},p2=function(e,n,r,i,s){return{isEmbedded:e,vendor:ne(n.vendor),model:ne(n.model),engineName:ne(r.name),engineVersion:ne(r.version),osName:ne(i.name),osVersion:ne(i.version),userAgent:ne(s)}};function m2(t){var e=t?Vl(t):I1,n=e.device,r=e.browser,i=e.engine,s=e.os,o=e.ua,a=l2(n.type),u=a.isBrowser,c=a.isMobile,d=a.isTablet,f=a.isSmartTV,p=a.isConsole,g=a.isWearable,_=a.isEmbedded;if(u)return c2(u,r,i,s,o);if(f)return h2(f,i,s,o);if(p)return d2(p,i,s,o);if(c||d)return $v(a,n,s,o);if(g)return f2(g,i,s,o);if(_)return p2(_,n,i,s,o)}var T1=function(e){var n=e.type;return n===Et.Mobile},S1=function(e){var n=e.type;return n===Et.Tablet},A1=function(e){var n=e.type;return n===Et.Mobile||n===Et.Tablet},b1=function(e){var n=e.type;return n===Et.SmartTv},kc=function(e){var n=e.type;return n===Et.Browser},x1=function(e){var n=e.type;return n===Et.Wearable},P1=function(e){var n=e.type;return n===Et.Console},R1=function(e){var n=e.type;return n===Et.Embedded},C1=function(e){var n=e.vendor;return ne(n)},k1=function(e){var n=e.model;return ne(n)},V1=function(e){var n=e.type;return ne(n,"browser")},D1=function(e){var n=e.name;return n===Co.Android},N1=function(e){var n=e.name;return n===Co.Windows},O1=function(e){var n=e.name;return n===Co.MAC_OS},M1=function(e){var n=e.name;return n===Co.WindowsPhone},F1=function(e){var n=e.name;return n===Co.IOS},L1=function(e){var n=e.version;return ne(n)},B1=function(e){var n=e.name;return ne(n)},U1=function(e){var n=e.name;return n===Kt.Chrome},z1=function(e){var n=e.name;return n===Kt.Firefox},j1=function(e){var n=e.name;return n===Kt.Chromium},Vc=function(e){var n=e.name;return n===Kt.Edge},$1=function(e){var n=e.name;return n===Kt.Yandex},q1=function(e){var n=e.name;return n===Kt.Safari||n===Kt.MobileSafari},W1=function(e){var n=e.name;return n===Kt.MobileSafari},G1=function(e){var n=e.name;return n===Kt.Opera},K1=function(e){var n=e.name;return n===Kt.InternetExplorer||n===Kt.Ie},Q1=function(e){var n=e.name;return n===Kt.MIUI},H1=function(e){var n=e.name;return n===Kt.SamsungBrowser},Y1=function(e){var n=e.version;return ne(n)},J1=function(e){var n=e.major;return ne(n)},X1=function(e){var n=e.name;return ne(n)},Z1=function(e){var n=e.name;return ne(n)},eS=function(e){var n=e.version;return ne(n)},tS=function(){var e=ig(),n=e&&e.userAgent&&e.userAgent.toLowerCase();return typeof n=="string"?/electron/.test(n):!1},Ws=function(e){return typeof e=="string"&&e.indexOf("Edg/")!==-1},nS=function(){var e=ig();return e&&(/iPad|iPhone|iPod/.test(e.platform)||e.platform==="MacIntel"&&e.maxTouchPoints>1)&&!window.MSStream},Nn=function(){return sg("iPad")},rS=function(){return sg("iPhone")},iS=function(){return sg("iPod")},sS=function(e){return ne(e)};function oS(t){var e=t||I1,n=e.device,r=e.browser,i=e.os,s=e.engine,o=e.ua;return{isSmartTV:b1(n),isConsole:P1(n),isWearable:x1(n),isEmbedded:R1(n),isMobileSafari:W1(r)||Nn(),isChromium:j1(r),isMobile:A1(n)||Nn(),isMobileOnly:T1(n),isTablet:S1(n)||Nn(),isBrowser:kc(n),isDesktop:kc(n),isAndroid:D1(i),isWinPhone:M1(i),isIOS:F1(i)||Nn(),isChrome:U1(r),isFirefox:z1(r),isSafari:q1(r),isOpera:G1(r),isIE:K1(r),osVersion:L1(i),osName:B1(i),fullBrowserVersion:Y1(r),browserVersion:J1(r),browserName:X1(r),mobileVendor:C1(n),mobileModel:k1(n),engineName:Z1(s),engineVersion:eS(s),getUA:sS(o),isEdge:Vc(r)||Ws(o),isYandex:$1(r),deviceType:V1(n),isIOS13:nS(),isIPad13:Nn(),isIPhone13:rS(),isIPod13:iS(),isElectron:tS(),isEdgeChromium:Ws(o),isLegacyEdge:Vc(r)&&!Ws(o),isWindows:N1(i),isMacOs:O1(i),isMIUI:Q1(r),isSamsungBrowser:H1(r)}}var aS=b1(ln),lS=P1(ln),uS=x1(ln),g2=R1(ln),y2=W1(At)||Nn(),_2=j1(At),Th=A1(ln)||Nn(),cS=T1(ln),hS=S1(ln)||Nn(),dS=kc(ln),v2=kc(ln),fS=D1(li),pS=M1(li),mS=F1(li)||Nn(),w2=U1(At),E2=z1(At),I2=q1(At),T2=G1(At),gS=K1(At),S2=L1(li),A2=B1(li),b2=Y1(At),x2=J1(At),P2=X1(At),R2=C1(ln),C2=k1(ln),k2=Z1(rg),V2=eS(rg),D2=sS(kl),N2=Vc(At)||Ws(kl),O2=$1(At),M2=V1(ln),F2=nS(),L2=Nn(),B2=rS(),U2=iS(),z2=tS(),j2=Ws(kl),$2=Vc(At)&&!Ws(kl),q2=N1(li),W2=O1(li),G2=Q1(At),K2=H1(At),Q2=function(e){if(!e||typeof e!="string"){console.error("No valid user agent string was provided");return}var n=Vl(e),r=n.device,i=n.browser,s=n.os,o=n.engine,a=n.ua;return oS({device:r,browser:i,os:s,engine:o,ua:a})},H2=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return fS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},Y2=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return dS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},J2=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return gS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},X2=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return mS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},Z2=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return Th?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},eO=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return hS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},tO=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return pS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},nO=function(e){var n=e.renderWithFragment,r=e.children;e.viewClassName,e.style;var i=wn(e,["renderWithFragment","children","viewClassName","style"]);return cS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},rO=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return aS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},iO=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return lS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},sO=function(e){var n=e.renderWithFragment,r=e.children,i=wn(e,["renderWithFragment","children"]);return uS?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",i,r):null},oO=function(e){var n=e.renderWithFragment,r=e.children;e.viewClassName,e.style;var i=e.condition,s=wn(e,["renderWithFragment","children","viewClassName","style","condition"]);return i?n?xe.createElement(Tt.Fragment,null,r):xe.createElement("div",s,r):null};function aO(t){return function(e){ZN(n,e);function n(r){var i;return HN(this,n),i=t2(this,Jf(n).call(this,r)),i.isEventListenerAdded=!1,i.handleOrientationChange=i.handleOrientationChange.bind(ju(i)),i.onOrientationChange=i.onOrientationChange.bind(ju(i)),i.onPageLoad=i.onPageLoad.bind(ju(i)),i.state={isLandscape:!1,isPortrait:!1},i}return JN(n,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var i=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:i===0,isLandscape:i===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":ka(window))!==void 0&&Th&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return xe.createElement(t,Yf({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),n}(xe.Component)}function lO(){var t=Tt.useState(function(){var s=window.innerWidth>window.innerHeight?90:0;return{isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"}}),e=n2(t,2),n=e[0],r=e[1],i=Tt.useCallback(function(){var s=window.innerWidth>window.innerHeight?90:0,o={isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"};n.orientation!==o.orientation&&r(o)},[n.orientation]);return Tt.useEffect(function(){return(typeof window>"u"?"undefined":ka(window))!==void 0&&Th&&(i(),window.addEventListener("load",i,!1),window.addEventListener("resize",i,!1)),function(){window.removeEventListener("resize",i,!1),window.removeEventListener("load",i,!1)}},[i]),n}function yS(t){var e=t||window.navigator.userAgent;return Vl(e)}function uO(t){var e=t||window.navigator.userAgent,n=yS(e),r=oS(n);return[r,n]}K.AndroidView=H2;K.BrowserTypes=Kt;K.BrowserView=Y2;K.ConsoleView=iO;K.CustomView=oO;K.IEView=J2;K.IOSView=X2;K.MobileOnlyView=nO;K.MobileView=Z2;K.OsTypes=Co;K.SmartTVView=rO;K.TabletView=eO;K.WearableView=sO;K.WinPhoneView=tO;K.browserName=P2;K.browserVersion=x2;K.deviceDetect=m2;K.deviceType=M2;K.engineName=k2;K.engineVersion=V2;K.fullBrowserVersion=b2;K.getSelectorsByUserAgent=Q2;K.getUA=D2;K.isAndroid=fS;K.isBrowser=dS;K.isChrome=w2;K.isChromium=_2;K.isConsole=lS;K.isDesktop=v2;K.isEdge=N2;K.isEdgeChromium=j2;K.isElectron=z2;K.isEmbedded=g2;K.isFirefox=E2;K.isIE=gS;K.isIOS=mS;K.isIOS13=F2;K.isIPad13=L2;K.isIPhone13=B2;K.isIPod13=U2;K.isLegacyEdge=$2;K.isMIUI=G2;K.isMacOs=W2;var cO=K.isMobile=Th;K.isMobileOnly=cS;K.isMobileSafari=y2;K.isOpera=T2;K.isSafari=I2;K.isSamsungBrowser=K2;K.isSmartTV=aS;K.isTablet=hS;K.isWearable=uS;K.isWinPhone=pS;K.isWindows=q2;K.isYandex=O2;K.mobileModel=C2;K.mobileVendor=R2;K.osName=A2;K.osVersion=S2;K.parseUserAgent=Vl;K.setUserAgent=u2;K.useDeviceData=yS;K.useDeviceSelectors=uO;K.useMobileOrientation=lO;K.withOrientationChange=aO;function hO(t,e){const r=t.split(`
`).length-1;let i=0;return e&&(i=100/30),console.log(i*30),t.length/40+r+i}function dO(t){let e=[],n=[],r=[],i=0,s=0,o=0;return t.map(a=>{const u=hO(a.body,a.base64_image);console.log(u);const c=Math.min(i,s,o);i==c?(e.push(a),i+=u):s==c?(n.push(a),s+=u):(r.push(a),o+=u)}),{col1:e,col2:n,col3:r}}function fO({postsList:t}){const e=t.sort((s,o)=>parseInt(o.date)-parseInt(s.date)),{col1:n,col2:r,col3:i}=dO(e);return re.jsx(IE,{className:"w-full h-full gap-4",children:cO?re.jsx(re.Fragment,{children:re.jsx(Cr,{className:"flex-1 gap-4",children:e.map((s,o)=>re.jsx(wu,{body:s.body,date:s.date,author:s.author,base64_image:s.base64_image},o))})}):re.jsxs(re.Fragment,{children:[re.jsx(Cr,{className:"flex-1 gap-4",children:n.map((s,o)=>re.jsx(wu,{body:s.body,date:s.date,author:s.author,base64_image:s.base64_image},o))}),re.jsx(Cr,{className:"flex-1 gap-4",children:r.map((s,o)=>re.jsx(wu,{body:s.body,date:s.date,author:s.author,base64_image:s.base64_image},o))}),re.jsx(Cr,{className:"flex-1 gap-4",children:i.map((s,o)=>re.jsx(wu,{body:s.body,date:s.date,author:s.author,base64_image:s.base64_image},o))})]})})}function pO(){const[t,e]=Q.useState([]),n=dE();Q.useEffect(()=>{v1.collection("Messages").get().then(i=>i.docs.map(s=>s.data())).then(i=>e(i))},[]);const r=()=>{n("/submit")};return re.jsxs(Cr,{className:"w-full p-4 bg-[#bde0fe] overflow-y-auto gap-8",children:[re.jsxs(IE,{className:"relative w-full py-10 bg-[#a2d2ff] rounded-md justify-center items-center",children:[re.jsx(AE,{className:"absolute -bottom-5 left-10",onClick:r,children:"Add Post"}),re.jsx(SE,{size:"displayM",center:!0,children:"Happy Birthday, Cindy!"})]}),re.jsx(fO,{postsList:t})]})}function mO(){const[t,e]=Q.useState(""),[n,r]=Q.useState(""),[i,s]=Q.useState(""),o=dE(),a=c=>{const d=c.target.files[0],f=new FileReader;f.onloadend=()=>{s(f.result)},d&&f.readAsDataURL(d)},u=()=>{const d=new Date().toISOString().split("T")[0],f=Math.floor(Math.random()*1e6);v1.collection("Messages").doc(f.toString()).set({author:t,body:n,date:d,base64_image:i}),o("/")};return re.jsx(Cr,{className:"w-screen h-screen p-4 bg-[#bde0fe] overflow-y-auto justify-center items-center",children:re.jsxs(Cr,{className:"w-[30em] bg-white rounded-lg gap-4 p-6",children:[re.jsx(SE,{className:"text-center text-xl font-bold mb-4",children:"Submit Post"}),re.jsx("input",{type:"text",placeholder:"Name",className:"p-2 border border-gray-300 rounded",value:t,onChange:c=>e(c.target.value)}),re.jsx("textarea",{placeholder:"Message",className:"p-2 border border-gray-300 rounded h-24",value:n,onChange:c=>r(c.target.value)}),re.jsx("input",{type:"file",accept:"image/*",className:"p-2",onChange:a}),re.jsx(AE,{className:"p-2 bg-blue-500 text-white rounded",onClick:u,children:"Submit"})]})})}function gO(){return re.jsx(cP,{basename:"/",children:re.jsxs(aP,{children:[re.jsx(yf,{index:!0,path:"/",element:re.jsx(pO,{})}),re.jsx(yf,{index:!0,path:"/submit",element:re.jsx(mO,{})})]})})}Id.createRoot(document.getElementById("root")).render(re.jsx(ew.StrictMode,{children:re.jsx(gO,{})}));
